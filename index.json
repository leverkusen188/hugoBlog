[
{
	"uri": "https://leverkusen188.github.io/",
	"title": "My New Hugo Site",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "https://leverkusen188.github.io/rxswift/",
	"title": "RxSwifts",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "https://leverkusen188.github.io/rxswift/rxswift%E8%BF%81%E7%A7%BBcombine%E6%8C%87%E5%8D%97/",
	"title": "RxSwiftè¿ç§»CombineæŒ‡å—",
	"tags": [],
	"description": "",
	"content": "è¯‘è‡ª RxSwift to Combine: The Complete Transition Guide\nä¸é€å­—ç¿»è¯‘äº†ï¼Œåªç¿»ä¸»è¦çš„çŸ¥è¯†ç‚¹ä¿¡æ¯ã€‚ ç®€ä»‹ Combine æ˜¯swiftæ–°æ¨å‡ºçš„ä¸€ç§é¢å‘ å“åº”å¼ç¼–ç¨‹çš„æ¡†æ¶ã€‚ å¾ˆå¤šå¼€å‘è€…éƒ½æƒ³ä»RxSwift åˆ‡æ¢åˆ°Combineï¼Œä¸¤è€…ä¹‹é—´æœ‰å¾ˆå¤šçš„ç›¸ä¼¼ä¹‹å¤„ã€‚ ä½†ç»†èŠ‚æ–¹é¢è¿˜æ˜¯æœ‰å¾ˆå¤šåŒºåˆ«çš„ï¼Œå¦‚æœä½ æƒ³åˆ‡æ¢è¿‡æ¥ï¼Œè¿™ç¯‡æ–‡ç« ä¼šåˆ—å‡º RxSwiftå’ŒCombineä¹‹é—´çš„ æ“ä½œç¬¦ï¼Œå‡½æ•°ï¼Œç±»å‹ç­‰ç­‰çš„æ˜ å°„ã€‚\nå“åº”å¼ç¼–ç¨‹å¯ä»¥è®© æ•°æ®çŠ¶æ€åœ¨å¯¹è±¡ä¹‹é—´ï¼Œå·¥ç¨‹ä¹‹é—´ï¼Œç”šè‡³appä¹‹é—´äº’ç›¸åŒæ­¥ã€‚ åœ¨ioså¼€å‘ä¸­ï¼Œæœ€å¸¸è§çš„å°±æ˜¯åœ¨UIå’ŒModelä¹‹é—´è¿›è¡ŒçŠ¶æ€åŒæ­¥ã€‚åœ¨ä¹‹å‰å¾ˆé•¿ä¸€æ®µæ—¶é—´é‡Œï¼ŒRxSwiftéƒ½æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚ä½†appleæ¨å‡ºäº† è·ŸSwiftUI æ›´å¥‘åˆçš„Combine ä½œä¸ºå“åº”å¼ç¼–ç¨‹çš„æ¡†æ¶ï¼ŒåŸºæœ¬å¯ä»¥å®Œå…¨æ›¿ä»£RxSwiftçš„æ‰€æœ‰åŠŸèƒ½äº†ã€‚\næ­¤æ–‡ç« å°†åˆ†ä¸º Combineæ˜¯æ€ä¹ˆå·¥ä½œçš„ åˆ‡æ¢åˆ°Combineæ˜¯å¥½çš„é€‰æ‹©å— æ€ä¹ˆæ›´ç®€å•åœ°ä»RxSwiftåˆ‡æ¢åˆ°Combine ä¸‰ä¸ªéƒ¨åˆ†ã€‚\nRxSwift å’Œ Combineçš„ä¸»è¦åŒºåˆ« RxSwift Combine æ”¯æŒçš„iOSç‰ˆæœ¬ iOS 8.0+ iOS 13.0+ æ”¯æŒçš„å¹³å° iOS, macOS, tvOS, watchOS, Linux iOS, macOS, tvOS, watchOS, UIKit for Mac æ¡†æ¶æ‰€å± ç¬¬ä¸‰æ–¹ Appleç¬¬ä¸€æ–¹ï¼ŒSDKå†…ç½® è°æ¥ç»´æŠ¤? å¼€æºç¤¾åŒº AppleæŠ€æœ¯å›¢é˜Ÿ åä½œçš„UIæ¡†æ¶ RxCocoa SwiftUI Combineæ˜¯æ€ä¹ˆå·¥ä½œçš„ è€ƒè™‘åˆ°æœ¬æ–‡ç« æ˜¯ä»‹ç»å¦‚ä½•ä»RxSwiftè¿ç§»åˆ°Combineï¼Œ å‡è®¾è¯»è€…å·²ç»å¯¹RxSwiftæœ‰ä¸€å®šçš„äº†è§£äº†ã€‚ å¦‚æœéœ€è¦äº†è§£RxSwiftï¼Œå¯ä»¥å‚è€ƒ RxSwift repository on GitHub.\nCombineåœ¨å¾ˆå¤šæ–¹é¢è·ŸRxSwiftéƒ½æœ‰ç›¸ä¼¼ä¹‹å¤„ä»¥åŠå¯¹ç­‰çš„æ˜ å°„æ¦‚å¿µæ˜ å°„ï¼Œæ¯”å¦‚ æ–¹æ³•ï¼Œç±»å‹å£°æ˜ç­‰ã€‚ å¦‚æœè¦æ‰¾å‡ºä¸¤è€…ä¹‹é—´æ›´æ·±å±‚æ¬¡çš„å·®å¼‚ï¼Œéœ€è¦å¯¹Combineè¿›è¡Œæ›´æ·±åœ°æŒ–æ˜ï¼Œçœ‹çœ‹å®ƒçš„åº•å±‚æœºåˆ¶ã€‚\nPublisher è·ŸRxSwiftçš„Observable ç›¸å¯¹åº”çš„æ˜¯Combineé‡Œçš„Publisherã€‚ åœ¨RxSwifté‡Œæ˜¯ä¸€ä¸ªç±»ï¼Œè€Œåœ¨Combineé‡Œæ˜¯ä¸€ä¸ªåè®®ã€‚\nprotocol Publisher { associatedtype Output associatedtype Failure: Error func receive\u0026lt;S: Subscriber\u0026gt;(subscriber: S) where Self.Failure == S.Failure, Self.Output == S.Input } Combine ä¸ä¼šæŒ‡å®š Wrapper typesæ¥æè¿°å®ƒçš„å”¯ä¸€ç‰¹å¾ï¼Œæ¯”å¦‚RxSwifté‡Œçš„Infallible, Maybe or Singleã€‚ ä½†æ¯ä¸ªPublisherä¹Ÿæœ‰è‡ªå·±çš„è‡ªå®šä¹‰ç±»å‹ï¼Œå€Ÿç”±è¯¥ç±»å‹ï¼ŒPublisherçš„ç‰¹å¾ä¹Ÿèƒ½è¢«æ¨å¯¼å‡ºæ¥ã€‚\nRxSwiftçš„Observable éœ€è¦å®ç°subscribe å‡½æ•°ï¼Œå¯¹åº”çš„Publisheréœ€è¦å®ç° receiveå‡½æ•°ï¼Œå®ƒä»¬çš„åŠŸèƒ½åŸºæœ¬ä¸€è‡´ã€‚ç›¸æ¯”äºRxSwiftè€Œè¨€ï¼ŒPublisheræŒ‡å®šäº†ä¸€ä¸ª Failureç±»å‹ï¼Œå¯ä»¥è¡¨æ˜è¯¥publisher æ˜¯å¦/å¦‚ä½• å¤±è´¥ã€‚å¯¹äºé‚£äº›ä¸ç”¨å¤„ç†å¤±è´¥çš„Publisherï¼Œæˆ‘ä»¬è®¾å®šFailureç±»å‹ä¸ºNever å³å¯ã€‚\nCombineçš„Publisher å¯ä»¥æ˜¯ å€¼ç±»å‹ï¼ˆæ¯”å¦‚structï¼‰æˆ–æ˜¯ å¼•ç”¨ç±»å‹ï¼ˆæ¯”å¦‚ç±»ï¼‰ã€‚å¤§å¤šæ•°çš„Publisheréƒ½æ˜¯å€¼ç±»å‹çš„ã€‚\nåœ¨RxSwifté‡Œï¼Œæ“ä½œç¬¦ä¸€èˆ¬å°±æ˜¯ç®€å•åœ°è¿”å›ä¸€ä¸ªObservable ç±»å‹ï¼Œè€ŒCombineé‡Œè¿”å›çš„æ˜¯ä¸€ä¸ªæ··åˆç±»å‹ï¼Œæ¯”è¾ƒå¤æ‚ï¼›æ¯”å¦‚Timer.TimerPublisher ï¼Œ CombineLatest\u0026lt;Just\u0026lt;Int\u0026gt;, Just\u0026lt;Int\u0026gt;\u0026gt;. é‰´äºè‡ªå·±å®šä¹‰ä¸€ä¸ªæ··åˆç±»å‹æ¯”è¾ƒéº»çƒ¦ï¼Œæˆ‘ä»¬å¯ä»¥å°±ç”¨ AnyPublisher æ¥ç®€åŒ–Publisherçš„ä½¿ç”¨ã€‚ ä¸¾ä¸ªä¾‹å­ï¼šAnyPublisher\u0026lt;Int, Never\u0026gt;ï¼Œå¯ä»¥ä½œä¸ºä¸€ä¸ª ä¸ä¼šå¤±è´¥çš„æŠ›å‡ºIntå€¼çš„Publisherã€‚ Subscriber Subscriber ï¼ˆRxSwift: Observerï¼‰å¯ä»¥æ¥æ”¶è®¢é˜…ä¿¡æ¯(subscriptions), è¾“å…¥æ•°æ®(inputs)ï¼Œä»¥åŠç»“æŸå›è°ƒ(completions). è¿™ç‚¹è·ŸRxSwiftä¸åŒï¼Œæ²¡æœ‰å£°æ˜åŒ…å«äº†æ•°æ®å›è°ƒä»¥åŠ ç»“æŸå›è°ƒçš„eventçš„æšä¸¾ï¼Œä½†æä¾›äº†å•ç‹¬çš„æ–¹æ³•æ¥åˆ†åˆ«å¤„ç†å¯¹åº”çš„äº‹ä»¶ã€‚\nprotocol Subscriber: CustomCombineIdentifierConvertible { associatedtype Input associatedtype Failure: Error func receive(subscription: Subscription) func receive(_ input: Self.Input) -\u0026gt; Subscribers.Demand func receive(completion: Subscribers.Completion\u0026lt;Self.Failure\u0026gt;) } åœ¨ä¸Šé¢çš„ä»£ç ç‰‡æ®µé‡Œï¼Œä½ å¯ä»¥çœ‹åˆ°Subscriber ä¹Ÿå£°æ˜äº†ä¸€ä¸ªFailure ç±»å‹ï¼Œå†³å®šäº†å®ƒèƒ½å¤±è´¥ï¼Œä»¥åŠå¤±è´¥çš„ç›¸å…³ç±»å‹ã€‚å¯¹åº”çš„RxSwiftä¹Ÿå£°æ˜äº†ç‹¬ç«‹çš„Erroräº‹ä»¶ã€‚Combineéå¸¸æ˜æ˜¾çš„è¡¨æ˜äº† å¤±è´¥ä¼šå¯¼è‡´Publisher ç»ˆç»“ï¼ˆRxSwifté‡Œï¼Œerroräº‹ä»¶ä¹Ÿè¡¨æ˜äº† Observableçš„ç»ˆç»“ï¼‰ã€‚\nSubscribers å¿…é¡»æ˜¯ç±»ï¼Œå› ä¸º subscriptionè¦å¼•ç”¨å®ƒæ¥åšæ•°æ®ä¼ é€’ï¼Œè€Œä¸èƒ½åœ¨è®¢é˜…æœŸé—´é‡æ–°åˆ›å»ºå¤šæ¬¡Subscribersï¼ˆå€¼ç±»å‹æ¯”å¦‚struct ä¼šåœ¨æ•°æ®å˜åŒ–æ—¶ä¼šé‡æ–°åˆ›å»ºå®ä¾‹ï¼‰ã€‚\nSubscription æ¯å½“ä½ è®¢é˜…æ—¶ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ª Subscriptionï¼Œå®ƒä¼šæŒæœ‰æ‰€æœ‰å¿…è¦çš„èµ„æºçš„å¼•ç”¨ï¼Œè€Œä¸”å¯ä»¥éšæ—¶cancel(å¯¹åº”RxSwifté‡Œçš„DisposeBag)ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆSubscription å¿…é¡»æ˜¯ç±»ã€‚\nprotocol Subscription: Cancellable, ... { func request(_ demand: Subscribers.Demand) } protocol Cancellable { func cancel() } ä¸RxSwiftç›¸æ¯”ï¼ŒCombineå…è®¸è®¢é˜…è€…éšæ—¶å¯ä»¥å»è·å–æ›´å¤šæ•°æ®ï¼Œå¹¶ä»¥ backpressure support çš„å½¢å¼è¿”å›ï¼›å› æ­¤ å®é™…ä¸Šæ˜¯è®¢é˜…è€…åœ¨ä¸»åŠ¨è¯·æ±‚æ•°æ®è€Œä¸æ˜¯ Publisheræ¥å†³å®šä»€ä¹ˆæ—¶å€™å°†æ•°æ®ä¼ å‡ºå»ã€‚ è¿™èƒ½è®©è®¢é˜…è€…ä¸ä¼šè¢«å¤§é‡æ•°æ®å µå¡è€Œå¯¼è‡´æ— æ³•åŠæ—¶å¤„ç†ï¼Œè¿™çœ‹ä¸Šå»æ›´åƒæ˜¯å¯æ§åˆ¶çš„æ•°æ®æµã€‚\nå¦‚æœæƒ³æ›´æ·±å…¥åœ°äº†è§£ backpressure support ï¼Œå¯ä»¥å‚è€ƒ Processing Published Elements with Subscribers\nSubject Subject è·ŸRxSwiftçš„å·®ä¸å¤šï¼Œå¯ä»¥çœ‹ä½œæ˜¯ Subscriber å’Œ Publisher çš„ç»„åˆï¼Œæ—¢å¯ä»¥å‘é€æ•°æ®ä¹Ÿèƒ½æ¥æ”¶æ•°æ®ã€‚\nprotocol Subject: AnyObject, Publisher { func send(_ value: Self.Output) func send(completion: Subscribers.Completion\u0026lt;Self.Failure\u0026gt;) func send(subscription: Subscription) } ä¸€æ–¹é¢ä½ å¯ä»¥å°†æ•°æ®ä¼ ç»™ Subjectï¼Œå¦ä¸€æ–¹é¢ç”±äº Subject éµä»äº† Publisheråè®®ï¼Œå®ƒä¹Ÿå¯ä»¥è¢«ç›‘å¬æ¥è·å–æ•°æ®ã€‚\nåœ¨Combineé‡Œï¼Œè®¢é˜…è€… receive è€Œ Subject send äº‹ä»¶ã€‚å°½ç®¡å¦‚æ­¤ï¼Œåœ¨æ¯ä¸ªsubjecté‡Œï¼Œæ¯å½“value éµä» Subscriberåè®®æ—¶ï¼Œä½ éƒ½å¿…é¡»åˆ›å»ºä¸€ä¸ª AnySubscriberã€‚\nç»¼ä¸Šæ‰€è¿°ï¼ŒRxSwiftå’ŒCombine å¤§éƒ¨åˆ†åŠŸèƒ½éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä½†åœ¨æ¥å£æ–¹é¢æœ‰ä¸€äº›å¾ˆå°çš„åŒºåˆ«ã€‚ é‚£ä¹ˆå“ªä¸ªæ›´é€‚åˆæˆ‘ä»¬å‘¢ï¼Ÿ\nåˆ‡æ¢åˆ°Combineæ˜¯å¥½çš„é€‰æ‹©å— æœ€å¤§çš„äº‰è®®ç‚¹åœ¨äºï¼ŒCombineæ˜¯appleçš„ç¬¬ä¸€æ–¹æ¡†æ¶ï¼Œä½¿ç”¨å®ƒä½ å°±ä¸ç”¨åšä¸€äº›å¤šä½™çš„framework ä¾èµ–é…ç½®å·¥ä½œï¼Œappä¹Ÿä½“ç§¯ä¹Ÿä¼šå°ä¸€äº›ã€‚\nå½“ç„¶ï¼ŒRxSwiftä¹Ÿæ²¡æœ‰æ˜ç¡®è¡¨æ˜æ˜¯å¦ä¼šæœ‰é”™è¯¯å‘ç”Ÿã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç›´æ¥å°±ç”¨ Observable ç„¶åç­‰ç€æ•°æ®è¿‡æ¥å°±è¡Œäº†ã€‚ ä½†åœ¨Combineé‡Œï¼Œå°±æ˜ç¡®è¡¨æ˜äº†Publisher å¯èƒ½ä¼šå¤±è´¥ï¼Œè€Œä¸”å¤±è´¥åäº§ç”Ÿçš„é”™è¯¯æ˜¯å•¥ã€‚\nä½†è¿™äº›å¯å¤±è´¥å’Œä¸ä¼šå¤±è´¥çš„publisherçš„äº¤äº’å¯èƒ½ä¼šéå¸¸å¤æ‚ï¼Œä½ å¾—åœ¨æ¯ä¸ªä½¿ç”¨å¤„éƒ½åŠ ä¸Š eraseToAnyPublisher()ï¼Œä½†å¸®åŠ©ä¹Ÿä¸å¤§ã€‚\nåœ¨ backpressure support çš„å¸®åŠ©ä¸‹ï¼ŒCombine èƒ½è€ƒè™‘å¾—æ›´åŠ å‘¨åˆ°ã€‚è®¢é˜…è€…å¯ä»¥éšæ—¶è·å–æ•°æ®ï¼Œè€Œä¸ç”¨ç­‰å¾…Publisher æ¥å‘é€æ•°æ®ã€‚è¿™æ›´ç¬¦åˆæˆ‘ä»¬çš„ç›´è§‰ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¸€äº›å¾ˆè€—æ—¶çš„æ“ä½œå‘ç”Ÿæ—¶ï¼Œå¤§é‡çš„æ•°æ®åŒæ—¶åœ¨publisher è¿›å‡ºã€‚\nç®€å•æ¥è¯´ï¼ŒCombine æ›´é€‚åº”æ•´ä¸ªswiftçš„ç¯å¢ƒã€‚å¾ˆå¤šæ‰©å±•æ–¹æ³•å·²ç»åœ¨å¸¸ç”¨çš„ç±»å‹é‡Œå®ç°äº†(æ¯”å¦‚ Timer.publisher, (0...3).publisher, Optional\u0026lt;String\u0026gt;.none.publisher)ï¼Œè¿™äº›æ–¹æ³•è®©Combineçš„åŠŸèƒ½æ›´åŠ çš„å…¨é¢ã€‚\nä¸è¿‡Combineä¸åƒRxSwifté‚£æ ·å…¨é¢å’Œå¼ºå¤§ï¼Œæ˜¯ä¹ˆï¼Ÿ RxSwift æ²¡æœ‰åƒCombine é‚£ä¹ˆå¤šçš„ç¼–è¯‘é—®é¢˜ã€‚RxSwiftä¸ç”¨ç®¡ å¤±è´¥çš„é”™è¯¯ç±»å‹ï¼Œè€Œä¸”å•ä¸ªæ³›å‹ç±»å‹çš„æ£€æŸ¥æ¯”ä¸¤ä¸ªè¦ç®€å•å¾—å¤šã€‚\nRxSwiftæ”¯æŒiOS9ä»¥åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œä½†Combineåªèƒ½ç”¨åœ¨iOS13 ä»¥åŠä»¥ä¸Šç‰ˆæœ¬ã€‚å®ƒä¿©åœ¨æ‰€æœ‰çš„apple å¹³å°ä¸Šéƒ½èƒ½workï¼Œä½†Combineå¯¹äºlinuxçš„æ”¯æŒè¿˜æ˜¯æœ‰ç¼ºå¤±ã€‚OpenCombine å¯ä»¥å¸®åŠ©è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®ƒç”¨çš„æ˜¯è·ŸCombineä¸€æ ·çš„æ¥å£ï¼Œä¸”èƒ½æ”¯æŒæ›´å¤šå¹³å°ã€‚\nCombineçš„å‘½åè§„åˆ™æ›´å¥‘åˆiOSå¹³å°ï¼Œè€ŒRxSwift æ›´å¥‘åˆè·¨å¹³å°æ¨¡å¼çš„è§„åˆ™ã€‚\nRxSwiftçš„æŠ€æœ¯ç¤¾åŒºå·²ç»å­˜åœ¨å¾ˆé•¿ä¸€æ®µæ—¶é—´äº†ï¼Œåœ¨ç»´æŠ¤å’Œæ‰©å±•æ¡†æ¶æ–¹é¢å·²ç»åšäº†å¾ˆå¤šæ”¹è¿›äº†ã€‚ç¤¾åŒºæˆå‘˜ä»¬ä¸ºRxSwift æ‰©å±•äº†å¾ˆå¤šå…³äºç‰¹å®šåœºæ™¯çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬å¾ˆå¤šè‡ªå®šä¹‰çš„æ“ä½œç¬¦å’Œç±»å‹ç­‰ã€‚è€ŒCombineæ˜¯ä¸€ä¸ªå°é—­çš„æ¡†æ¶ï¼Œè€Œä¸”åªæ¨å‡ºäº†ä¸‰å¹´è€Œå·²ï¼Œåªåœ¨å°‘éƒ¨åˆ†çš„é¡¹ç›®é‡Œè¢«ä½¿ç”¨åˆ°ï¼Œå¦‚æœä½ éœ€è¦è‡ªå·±å†™ä¸€äº›å­—å®šä¹‰çš„æ“ä½œç¬¦ï¼Œè¿˜ä¸å¦‚ç›´æ¥ä½¿ç”¨ç°æœ‰çš„çŸ¥è¯†ç‚¹æ¥å®ç°ã€‚\nç°åœ¨ä½ è¦å†™ä¸€ä¸ªå­—å®šä¹‰çš„Publisheræ¯”è‡ªå®šä¹‰çš„Observable è¦éº»çƒ¦è®¸å¤šã€‚åœ¨RxSwifté‡Œï¼Œä½ åªè¦ç”¨ Observable.create æ¥å‘é€æ•°æ®ï¼Œå‘é€é”™è¯¯ï¼Œä»¥åŠå®Œæˆäº‹ä»¶å³å¯ã€‚åœ¨Combineé‡Œå´æ²¡æœ‰å¯¹åº”çš„æ“ä½œï¼Œä½ å¯ä»¥ç”¨Future (åŸºæœ¬ä¸Šå°±æ˜¯ä¸€ä¸ªå¸¦completionå›è°ƒçš„Publisherï¼Œä¸”completionåªä¼šè°ƒç”¨ä¸€æ¬¡) æˆ–æ˜¯å†™ä¸€ä¸ªè‡ªå®šä¹‰çš„Publisher æ¥æ¨¡æ‹Ÿ Observable.create çš„è¡Œä¸ºï¼ˆæˆ‘ä»¬æ¥ä¸‹æ¥å°±ä¼šè®²åˆ°è¿™ç‚¹ï¼‰\næ€»ç»“ä¸€ä¸‹ å›åˆ°æˆ‘ä»¬ä¹‹å‰çš„ è¯¥ç”¨RxSwiftè¿˜æ˜¯Combineçš„é—®é¢˜ï¼Œè¿™ä¸ªè¦çœ‹æƒ…å†µçš„ã€‚ å¦‚æœä½ æƒ³è¦å¹²æ‰ä¹‹å‰é‚£äº›â€œå¤šä½™çš„â€ä¾èµ–å…³ç³»ï¼Œè€Œä¸”ä½ çš„appæ”¯æŒiOS13 ä»¥åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œä¸”ä¸ç”¨æ”¯æŒiOS ä»¥å¤–çš„å¹³å°ï¼Œé‚£Combineå°±æ˜¯æ¯”è¾ƒå¥½çš„é€‰æ‹©äº†ã€‚\næ€ä¹ˆæ›´ç®€å•åœ°ä»RxSwiftåˆ‡æ¢åˆ°Combine æˆ‘ä»¬æœé›†äº†ä¸‹é¢çš„åˆ‡æ¢å¼•å¯¼ä¿¡æ¯ï¼Œä½ å¯ä»¥ç›´æ¥æœç´¢RxSwiftçš„æ–¹æ³•ï¼Œæ“ä½œç¬¦æ¥æ‰¾åˆ°Combineé‡Œçš„å¯¹åº”æ›¿æ¢æ–¹æ¡ˆã€‚\nä¸€äº›ç®€å•çš„è¯´æ˜ ä¸€èˆ¬æ¥è¯´ï¼ŒCombineåœ¨å¤„ç†é”™è¯¯æ—¶ï¼Œç›¸å…³æ¥å£çœ‹ä¸Šå»æ¯”è¾ƒå¤æ‚ã€‚ç»™ä¸ªå°æç¤ºï¼Œ setFailureType(to: Failure.self) æ›´å®¹æ˜“ç†è§£ï¼Œè€Œä¸æ˜¯å½“ä½œ mapError { _ -\u0026gt; Failure in } æ¥çœ‹å¾…ã€‚\nä¸‹é¢çš„è¿™äº›é“¾æ¥åœ¨æˆ‘ä»¬ä»RxSwiftåˆ‡æ¢åˆ°Combineæ—¶æä¾›äº†å¾ˆå¤§çš„å¸®åŠ©ã€‚\nCombineExt é‡Œæ˜¯CombineæŠ€æœ¯ç¤¾åŒºæä¾›çš„ä¸€äº› å½“å‰ç³»ç»ŸCombineé‡Œæ²¡æœ‰æ”¯æŒçš„æ“ä½œç¬¦ã€‚ cheat sheet ä¹Ÿæä¾›äº†ä¸å°‘å¸®åŠ©ã€‚ ç±»å‹ Disposable RxSwift Combine Disposable Cancellable UseÂ AnyCancellable to create them like RxSwiftâ€™sÂ Disposables.create DisposeBag Set anyÂ RandomAccessCollection ofÂ AnyCancellable of course, you can also create references one by one â„¹ï¸ æ³¨æ„ï¼Œsubscriptions ä¼šåœ¨ Cancellable ææ„åç›´æ¥cancelæ‰ã€‚\nPublishers RxSwift Combine Observable AnyPublisher\u0026lt;Element, Error\u0026gt;æˆ–è€… å…¶ä»–çš„ Publisher ç±»å‹åŒæ ·æ ¹æ®æŠ›å‡ºçš„é”™è¯¯ç±»å‹ï¼ŒCombineä¹Ÿèƒ½åˆ›å»ºå¯¹åº”çš„Failureç±»å‹ Single AnyPublisher\u0026lt;Element, Error\u0026gt; Future\u0026lt;Element, Error\u0026gt; å¯æƒœä¸èƒ½ä¿è¯åªæŠ›å‡ºä¸€ä¸ªå€¼ï¼Œé™¤éä½¿ç”¨Future publisher ConnectableObservable ConnectablePublisher Infallible AnyPublisher\u0026lt;Element, Never\u0026gt; æ³¨æ„ï¼šFailureåœ¨è¿™é‡Œçš„ç±»å‹æ˜¯ Never Maybe åœ¨Combineé‡Œæ²¡æœ‰å¯¹åº”çš„ä¸œä¸œ Subjects RxSwift Combine BehaviorSubject CurrentValueSubject PublishSubject PassthroughSubject ReplaySubject Combineé‡Œæ²¡æœ‰ğŸ‘‰Â CombineExté‡Œçš„æ›¿ä»£æ–¹æ¡ˆ AsyncSubject Combine é‡Œæ²¡æœ‰ Relays Relayæ˜¯Subjectçš„ä¸€ä¸ªå˜ç§ï¼Œä»–è·ŸSubjectçš„ä¸åŒä¹‹å¤„åœ¨äº æ— æ³•å‘é€/æ¥æ”¶ å®Œæˆäº‹ä»¶ã€‚\nclass Relay\u0026lt;SubjectType: Subject\u0026gt;: Publisher, CustomCombineIdentifierConvertible where SubjectType.Failure == Never { typealias Output = SubjectType.Output typealias Failure = SubjectType.Failure let subject: SubjectType init(subject: SubjectType) { self.subject = subject } func send(_ value: Output) { subject .send(value) } func receive\u0026lt;S: Subscriber\u0026gt;(subscriber: S) where Failure == S.Failure, Output == S.Input { subject .subscribe(on: DispatchQueue.main) .receive(subscriber: subscriber) } } typealias CurrentValueRelay\u0026lt;Output\u0026gt; = Relay\u0026lt;CurrentValueSubject\u0026lt;Output, Never\u0026gt;\u0026gt; typealias PassthroughRelay\u0026lt;Output\u0026gt; = Relay\u0026lt;PassthroughSubject\u0026lt;Output, Never\u0026gt;\u0026gt; extension Relay { convenience init\u0026lt;O\u0026gt;(_ value: O) where SubjectType == CurrentValueSubject\u0026lt;O, Never\u0026gt; { self.init(subject: CurrentValueSubject(value)) } convenience init\u0026lt;O\u0026gt;() where SubjectType == PassthroughSubject\u0026lt;O, Never\u0026gt; { self.init(subject: PassthroughSubject()) } } Observer Operators RxSwift Combine asObserver() AnySubscriber on(_:) Subscriber â†³ receive(_:)â†³ receive(completion:) Subjectâ†³ send(_:)â†³ send(completion:) onNext(_:) Subscriberâ†³ receive(_:) Subjectâ†³ send(_:) onError(_:) Subscriber â†³receive(completion: .failure()) Subjectâ†³ send(completion: .failure()) onCompleted() Subscriber â†³ receive(completion: .finished) Subject â†³ send(completion: .finished) mapObserver(_:) Combineé‡Œæ²¡æœ‰å¯¹åº”çš„ï¼Œä¸è¿‡å®ç°èµ·æ¥å¾ˆç®€å•ğŸ‘‰replacement in CombineExt å¦‚æœè¦ä¿®æ”¹subscriberçš„ Input æˆ– Failure ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™ä¸ªæ‰©å±•æ–¹å¼\nextension Subscriber { func map\u0026lt;Input\u0026gt;( _ map: @escaping (Input) -\u0026gt; Self.Input ) -\u0026gt; AnySubscriber\u0026lt;Input, Failure\u0026gt; { .init( receiveSubscription: receive, receiveValue: { self.receive(map($0)) }, receiveCompletion: receive ) } func mapError\u0026lt;Failure\u0026gt;( _ map: @escaping (Failure) -\u0026gt; Self.Failure ) -\u0026gt; AnySubscriber\u0026lt;Input, Failure\u0026gt; { .init( receiveSubscription: receive, receiveValue: receive, receiveCompletion: { completion in switch completion { case let .failure(error): self.receive(completion: .failure(map(error))) case .finished: self.receive(completion: .finished) } } ) } } Scheduling RxSwift æœ‰å¾ˆå¤šä¸åŒçš„Scheduler ç±»å‹ï¼Œæ¯”å¦‚ï¼šMainSchedulerï¼ŒConcurrentDispatchQueueScheduler, SerialDispatchQueueScheduler, CurrentThreadScheduler, HistoricalScheduler, OperationQueueSchedulerï¼Œä»¥åŠå…¶ä»–æ›´å¤šç±»å‹ã€‚\nè€Œåœ¨Combineé‡Œï¼Œè¿™ä¸ªå°±å¾ˆç®€å•äº†ã€‚å¯ä»¥ç›´æ¥ä½¿ç”¨GCD(Grand Central Dispatc)çš„ç›¸å…³ç±»å‹å°±å¯ä»¥äº†ã€‚æ¯”å¦‚ DispatchQueue, OperationQueue ä»¥åŠ RunLoopã€‚ Combineé‡Œå”¯ä¸€çš„Schedulerç±»å‹åªæœ‰ ImmediateSchedulerï¼Œå®ƒèƒ½è®©ä»»åŠ¡ç›´æ¥åŒæ­¥æ‰§è¡Œï¼ˆè·ŸCurrentThreadScheduler å·®ä¸å¤šï¼‰ã€‚\nåœ¨è¿™ç¯‡æ–‡ç« é‡Œå¯ä»¥è·å–æ›´å¤šå…³äºCombineé‡Œçš„scheduling çš„ä¿¡æ¯ã€‚\nFactory Functions RxSwift Combine amb(\u0026hellip;) Combineé‡Œæ²¡æœ‰ ğŸ‘‰replacement in CombineExt catch(sequence:) Combineé‡Œæ²¡æœ‰ combineLatest(\u0026hellip;) Publishers.CombineLatest Publishers.CombineLatest3 Publishers.CombineLatest4 Publisher.combineLatest(_:)æ³¨æ„ï¼šä½ å¯ä»¥æŠŠå®ƒä»¬ä¸²èµ·æ¥ä½¿ç”¨ï¼Œç„¶åç”¨mapè½¬æˆç‰¹æ®Šçš„æ•°æ®ç±»å‹æ¥ä½¿ç”¨ concat(\u0026hellip;) Publishers.Concatenate Publisher.appendä¸æ”¯æŒå¤šäºä¸¤ä¸ªå€¼ï¼Œå¯ä»¥ç”¨reduce æ¥è¾¾åˆ°ç›®çš„ create(_:) å•ä¸ªå€¼çš„Publisherå¯ä»¥ç”¨ Futureå¤šä¸ªå€¼çš„Publisherå¯ä»¥å‚è€ƒ replacement in CombineExt deferred(_:) Deferred empty() Empty error(_:) Fail from(_:) Collection.publisher Optional.publisher generate( initialState: condition: iterate:) Combineé‡Œæ²¡æœ‰ just(_:) Just merge(\u0026hellip;) Publishers.Merge Publishers.Merge3 Publishers.Merge4 Publishers.Merge5 Publishers.Merge6 Publishers.Merge7 Publishers.Merge8 Publishers.MergeMany never() Empty(completeImmediately: false) of(\u0026hellip;) Collection.publisher range() Collection.publisherå¯ä»¥ç”¨Rangeæˆ–ClosedRange ç”¨ stride repeatElement(_:) Combineé‡Œæ²¡æœ‰ timer(_:period:scheduler:) Timer.publish+ delay+ autoconnect using(_:observableFactory:) Combineé‡Œæ²¡æœ‰ zip(\u0026hellip;) Publishers.Zip Publishers.Zip3 Publishers.Zip4 ğŸ‘‰replacement in CombineExt Publisher / Observable Operators RxSwift Combine amb(_:) Combineé‡Œæ²¡æœ‰ğŸ‘‰Â replacement in CombineExt asCompletable() Combineé‡Œæ²¡æœ‰ asObservable() eraseToAnyPublisher() buffer( timeSpan: count: scheduler:) collect( .byTimeOrCount(::_:), options: ) catch(:)catchError(:) catch(_:) tryCatch(_:) catchAndReturn(:)catchErrorJustReturn(:) replaceError(with:) compactMap(_:) compactMap(_:) tryCompactMap(_:) concat(\u0026hellip;) append Publishers.Concatenate concatMap(_:) Combineé‡Œæ²¡æœ‰å¯ä»¥ç”¨ reduce(::)å’Œ append(_:)æ¥å®ç° debounce(_:scheduler:) debounce( for: scheduler: options: ) debug( _: trimOutput: file: line: function:) print(_:to:) delay(_:scheduler:) delay( for: tolerance: scheduler: options: ) delaySubscription( _: scheduler:) Combineé‡Œæ²¡æœ‰å¯ä»¥ç”¨ Deferredå’Œ delay(for:scheduler:options:)çš„ç»„åˆæ¥æ›¿ä»£ dematerialize() Combineé‡Œæ²¡æœ‰ğŸ‘‰Â replacement in CombineExt distinctUntilChanged(\u0026hellip;) removeDuplicates()å½“Outputæ˜¯Equatableæ—¶ç”¨ removeDuplicates(by:) tryRemoveDuplicates(by:) do( onNext: afterNext: onError: afterError: onCompleted: afterCompleted: onSubscribe: onSubscribed: onDispose:) handleEvents( receiveSubscription: receiveOutput: receiveCompletion: receiveCancel: receiveRequest: )æ²¡æœ‰onDispose: åœ¨publisher completeæ—¶ï¼Œcancelä¸ä¼šè¢«è°ƒç”¨ã€‚ element(at:) output(at:) enumerated() Combineé‡Œæ²¡æœ‰å»ºè®®å¯ä»¥ç”¨ scan(::)é­”æ”¹ä¸€ä¸‹ filter(_:) filter(_:) tryFilter(_:) first() first() flatMapFirst(_:) Combineé‡Œæ²¡æœ‰ flatMap(_:) flatMap(_:) tryFlatMap(_:) flatMapLatest(_:) map(_:)æ¥ä¸Š switchToLatest()ğŸ‘‰Â replacement in CombineExt groupBy(keySelector:) æ²¡æœ‰ ifEmpty(default:) replaceEmpty(with:) ifEmpty(switchTo:) æ²¡æœ‰ ignoreElements() ignoreOutput() map(_:) map(_:) tryMap(_:) materialize() æ²¡æœ‰ğŸ‘‰Â replacement in CombineExt multicast(_:) multicast(subject:) multicast(makeSubject:) multicast(_:) observe(on:) observe(on:)Combineç”¨çš„æ˜¯ä¸åŒçš„schedulerç±»å‹ï¼ publish() multicast { PassthroughSubject() } makeConnectable() reduce(into:_:) æ²¡æœ‰ ä¸è¿‡å¯ä»¥ç”¨ reduce æ¥å®ç° reduce(::) reduce(::) tryReduce(::) reduce( _: accumulator: mapResult:) reduce(::)æ¥ä¸Š map(_:) æˆ–Â tryMap(_:) refCount() autoconnect() replay(_:) æ²¡æœ‰å¯ä»¥ç”¨ multicast(_:)å’Œ ReplaySubject æ¥å®ç° replayAll() æ²¡æœ‰ retry() retry(.max)å¯èƒ½æœ‰å¾®å°çš„æ„ä¹‰ä¸Šçš„å·®åˆ«ï¼Œä½†å®é™…ä½¿ç”¨ä¸­ä¸€èˆ¬æ²¡åŒºåˆ« retry(_:) retry(_:) retry(when:) æ²¡æœ‰ sample(_:defaultValue:) æ²¡æœ‰ scan(into:_:) æ²¡æœ‰å¯ä»¥ç”¨ä¸€èˆ¬çš„ scan(::)æ¥å®ç° scan(::) scan(::) tryScan(::) share(replay:scope:) share()æˆ–è€…ç”¨ multicast(_:)åŠ ä¸Š PassthroughSubjectå’Œ autoconnect()æˆ–è€…ç”¨ multicast(_:)åŠ ä¸Š ReplaySubject ğŸ‘‰Â extension in CombineExt single() æ²¡æœ‰å½“æœ‰ä¸”åªæœ‰ä¸€ä¸ªå€¼æ—¶ï¼Œç”¨ first()ï¼Œå¦åˆ™ä¼šæŠ¥é”™ single(_:) æ²¡æœ‰å¯ä»¥ç”¨ filter(_:)æ¥ä¸Š single()çš„æ›¿ä»£æ–¹æ¡ˆ skip(_:) dropFirst(_:) skip(while:) drop(while:) skip(until:) drop(untilOutputFrom:) startWith(\u0026hellip;) prepend(\u0026hellip;) subscribe(_:) æœ€ç±»ä¼¼çš„æ¥å£: sink( receiveValue: receiveCompletion: ) subscribe(on:) subscribe(on:options:)Combineç”¨çš„æ˜¯ä¸åŒçš„schedulerç±»å‹ï¼ subscribe( onNext: onError: onCompleted: onDisposed:) æœ€ç±»ä¼¼çš„æ¥å£: sink( receiveValue: receiveCompletion: ) subscribe( with: onNext: onError: onCompleted: onDisposed:) æœ€ç±»ä¼¼çš„æ¥å£ï¼š sink( receiveValue: receiveCompletion: ) æˆ– [weak object] switchLatest() switchToLatest() take(_:) prefix(_:) take(for:scheduler:) æ²¡æœ‰å¯ä»¥ç”¨ä»¥ä¸‹æ–¹å¼è§£å†³:prefix(untilOutputFrom: Timer.publish( every: , on: ) .autoconnect() .prefix(1) )ğŸ‘‰Â replacement in CombineExt take(until:) prefix(untilOutputFrom:) take(until:behavior:) ç”¨ prefix(while:)çš„ç›¸åæ¡ä»¶æ¥æ›¿ä»£ï¼Œä½†æ²¡æœ‰ behaviorå‚æ•°åŠŸèƒ½äº† take(while:behavior:) prefix(while:)ï¼Œä½†æ²¡æœ‰ behaviorå‚æ•°åŠŸèƒ½äº† takeLast(_:) æ²¡æœ‰æœ€æ¥è¿‘çš„æ–¹æ¡ˆï¼šreduce([]) { $0 + [$1] } .flatMap { $0.suffix().publisher } throttle( _: latest: scheduler:) throttle( for: scheduler: latest: ) timeout( _: other: scheduler:) æœ€æ¥è¿‘çš„æ–¹æ¡ˆï¼š timeout( _: scheduler: options: customError: )ç„¶åå† catch(_:), ç”¨mapè½¬åˆ°å…¶ä»–publisherä¸Š timeout(_:scheduler:) timeout( _: scheduler: options: customError: ) toArray() collect() window( timeSpan: count: scheduler:) collect( .byTime(, ) ) collect( .byTimeOrCount( , , ) ) withLatestFrom(_:) æ²¡æœ‰ğŸ‘‰Â replacement in CombineExt withLatestFrom( _: resultSelector:) æ²¡æœ‰ğŸ‘‰Â replacement in CombineExt withUnretained(_:) æœ€æ¥è¿‘çš„æ–¹æ¡ˆï¼š compactMap { [weak object] value in object.map { ($0, value) } } withUnretained( _: resultSelector:) æœ€æ¥è¿‘çš„æ–¹æ¡ˆï¼š compactMap { [weak object] value in object.map { resultSelector($0, value) } } æ€»ç»“ä¸€ä¸‹ å¯¹æˆ‘ä»¬æ¥è¯´ï¼Œæ€»æ˜¯è¦è°ƒç”¨ setFailureType(to:) å’Œ eraseToAnyPublisher() æ„Ÿè§‰ä¸èˆ’å¦ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜æ˜¯è§‰å¾—Combine å¾ˆæ£’çš„ã€‚\n"
},
{
	"uri": "https://leverkusen188.github.io/%E9%9D%9E%E6%8A%80%E6%9C%AF/2010%E5%A4%A9%E6%B6%AFkk%E5%A4%A7%E7%A5%9E%E9%A2%84%E6%B5%8B%E6%80%BB%E7%BB%93/",
	"title": "2010å¤©æ¶¯KKå¤§ç¥é¢„æµ‹æ€»ç»“",
	"tags": [],
	"description": "",
	"content": "kkndme_tianyaï¼ˆæŒç»­æ›´æ–°ä¸­\u0026hellip;ï¼‰\næˆ¿äº§çš„ç¨€ç¼ºæ€§ æˆ¿äº§çš„ç¨€ç¼ºæ€§æ¥è‡ªäºåœŸåœ°çš„ç¨€ç¼ºæ€§ï¼Œæ›´æ¥è‡ªäº è¯¥åœŸåœ°å‘¨å›´çš„ç›¸å…³é…å¥—èµ„æºçš„ç¨€ç¼ºæ€§ï¼ŒåŒ…æ‹¬ç”Ÿæ´»ä¾¿åˆ©æ€§ï¼Œäº¤é€šï¼Œæ•™è‚²ï¼ŒåŒ»ç–—ç­‰ã€‚\nzfå¯¹åœŸåœ°å’Œæˆ¿äº§çš„å„æ–­ zfå„æ–­åœŸåœ°èµ„æºï¼Œå¯ä»¥è¿›è¡Œå‡ ä¹æ— é£é™©çš„å–åœ°è¡Œä¸ºï¼Œå°†é£é™©ï¼ˆå¼€å‘å•†çš„èµ„é‡‘å‹åŠ›ï¼Œå±…æ°‘çš„ä¸­é•¿æœŸè´·æ¬¾ï¼‰ç”©ç»™å¼€å‘å•†å’Œé“¶è¡Œã€‚\nç¤¾ä¼šçš„åŸºæœ¬ç¨³å®šæ˜¯zfçš„æ²»ç†ç›®æ ‡ zfåªç”¨ä¿è¯æœ€åº•å±‚çš„å†œæ°‘åƒé¥±å³å¯ï¼Œå°±èƒ½åŸºæœ¬ä¿è¯ç¤¾ä¼šçš„ç¨³å®šï¼Œåº•å±‚å†œæ°‘ä»¬åªå…³å¿ƒæœ€åŸºæœ¬çš„ç”Ÿæ´»èµ„æºï¼Œä»–ä»¬å¹¶ä¸å…³å¿ƒåŸå¸‚çš„æˆ¿äº§ä»·æ ¼å¦‚ä½•ã€‚è€Œå¯¹æˆ¿äº§ä»·æ ¼æå…¶æ•æ„Ÿçš„æ‰€è°“ä¸­äº§é˜¶çº§ç™½é¢†ï¼Œä»–ä»¬å‡ºäº†å‘»åŸå‡ å£°å¤–æ²¡æœ‰ä»»ä½•çš„å…¶ä»–èƒ½é‡ã€‚\nç»´æŒå¤§é‡åº•å±‚åŠ³åŠ›æ˜¯zfçš„æ²»ç†ç›®æ ‡ zfå¿…é¡»ç»´æŒå¤§é‡çš„åº•å±‚åŠ³åŠ›ï¼Œå‡ ä¹ä¸ç”¨ç»™äºˆä»–ä»¬ä¸Šå‡ç©ºé—´ï¼Œå› ä¸ºå¤§é‡çš„ä½ç«¯äººå£æ‰èƒ½ä¿è¯ç²¾è‹±ä»¬çš„å¹¸ç¦ç”Ÿæ´»ï¼Œç±»ä¼¼äºç½‘ç»œæ¸¸æˆé‡Œå…è´¹ç©å®¶æ˜¯ä»˜è´¹ç©å®¶çš„ç¦åˆ©ä¸€æ ·ã€‚\nzfé€šè¿‡åˆ›é€ éœ€æ±‚æ¥æé«˜åœŸåœ°å’Œæˆ¿äº§çš„ç¨€ç¼ºæ€§ zfå¯ä»¥é€šè¿‡å„ç§è¡Œä¸ºæ¥åˆ›é€ éœ€æ±‚ï¼Œä»¥æé«˜æˆ¿äº§çš„å‡ºå”®æ•°å’Œä»·æ ¼ï¼Œæ¯”å¦‚æ‹†è¿åŸä¸­æ‘ï¼ŒæŠŠå±…æ°‘èµ¶å…¥åŸé‡Œä¹°æˆ¿ï¼›ä¸ºæŸåœ°è§„åˆ’äº¤é€šå’Œæ•™è‚²åŒ»ç–—èµ„æºä»¥æé«˜è¯¥åœ°é™„è¿‘çš„æˆ¿äº§ä»·æ ¼ï¼›å¯¹åŸä¸­æ‘è¿›è¡Œæ”¹é€ ï¼Œæé«˜ç§Ÿèµä»·æ ¼ä»¥æé«˜æ•´ä½“ç§Ÿæˆ¿ä»·æ ¼ï¼Œå¹¶å¯¹è¯¥åœ°äººå‘˜è¿›è¡Œç»æµç­›é€‰ï¼Œæ²¡é’±çš„æ»šå›è€å®¶å»ã€‚\n"
},
{
	"uri": "https://leverkusen188.github.io/iosrelated/ios%E6%80%A7%E8%83%BD/",
	"title": "IOS appæ€§èƒ½è°ƒä¼˜ç›¸å…³çŸ¥è¯†ç‚¹",
	"tags": [],
	"description": "",
	"content": "å‰è¨€ æœ¬æ–‡è¾ƒé•¿ï¼ˆ5000å­—å·¦å³ï¼‰ï¼Œå»ºè®®é˜…è¯»æ—¶é—´ï¼š 20min+\nä¸€ä¸ªiOS Appçš„ç¨³å®šæ€§ï¼Œä¸»è¦å†³å®šäºæ•´ä½“çš„ç³»ç»Ÿæ¶æ„è®¾è®¡ï¼ŒåŒæ—¶ä¹Ÿä¸å¯å¿½ç•¥ç¼–ç¨‹çš„ç»†èŠ‚ï¼Œæ­£æ‰€è°“â€œåƒé‡Œä¹‹å ¤ï¼Œæºƒäºèšç©´â€ï¼Œä¸€æ—¦è€ƒè™‘ä¸å‘¨ï¼Œçœ‹ä¼¼æ— å…³ç´§è¦çš„ä»£ç ç‰‡æ®µå¯èƒ½ä¼šå¸¦æ¥æ•´ä½“è½¯ä»¶ç³»ç»Ÿçš„å´©æºƒã€‚å°¤å…¶å› ä¸ºè‹¹æœé™åˆ¶äº†çƒ­æ›´æ–°æœºåˆ¶ï¼ŒAppæœ¬èº«çš„ç¨³å®šæ€§åŠå®¹é”™æ€§å°±æ˜¾çš„æ›´åŠ é‡è¦ï¼Œä¹‹å‰å¯ä»¥é€šè¿‡å‘å¸ƒçƒ­è¡¥ä¸çš„æ–¹å¼è§£å†³çº¿ä¸Šä»£ç é—®é¢˜ï¼Œç°åœ¨å°±éœ€è¦åœ¨æäº¤ä¹‹å‰å¯¹Appå¼€å‘å‘¨æœŸå†…çš„å„ä¸ªæŒ‡æ ‡è¿›è¡Œå®æ—¶ç›‘æµ‹ï¼Œå°½é‡è®©é—®é¢˜æš´æ¼åœ¨å¼€å‘é˜¶æ®µï¼Œç„¶ååŠæ—¶ä¿®å¤ï¼Œå‡å°‘çº¿ä¸Šå‡ºé—®é¢˜çš„å‡ ç‡ã€‚é’ˆå¯¹ä¸€ä¸ªAppçš„å¼€å‘å‘¨æœŸï¼Œå®ƒçš„ç¨³å®šæ€§æŒ‡æ ‡ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªç¯èŠ‚æ„æˆï¼Œç”¨ä¸€ä¸ªè„‘å›¾è¡¨ç¤ºå¦‚ä¸‹ï¼š\n1 å¼€å‘è¿‡ç¨‹ å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸»è¦æ˜¯é€šè¿‡ç›‘æ§å†…å­˜ä½¿ç”¨åŠæ³„éœ²ï¼ŒCPUä½¿ç”¨ç‡ï¼ŒFPSï¼Œå¯åŠ¨æ—¶é—´ç­‰æŒ‡æ ‡ï¼Œä»¥åŠå¸¸è§çš„UIçš„ä¸»çº¿ç¨‹ç›‘æµ‹ï¼ŒNSAssertæ–­è¨€ç­‰ï¼Œæœ€å¥½èƒ½åœ¨Debugæ¨¡å¼ä¸‹ï¼Œå®æ—¶æ˜¾ç¤ºåœ¨ç•Œé¢ä¸Šï¼Œé’ˆå¯¹å‡ºç°çš„é—®é¢˜åŠæ—©è§£å†³ã€‚\nå†…å­˜é—®é¢˜ å†…å­˜é—®é¢˜ä¸»è¦åŒ…æ‹¬ä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€ä¸ªæ˜¯iOSä¸­å¸¸è§å¾ªç¯å¼•ç”¨å¯¼è‡´çš„å†…å­˜æ³„éœ² ï¼Œå¦å¤–å°±æ˜¯å¤§é‡æ•°æ®åŠ è½½åŠä½¿ç”¨å¯¼è‡´çš„å†…å­˜è­¦å‘Šã€‚\nmmap è™½ç„¶è‹¹æœå¹¶æ²¡æœ‰æ˜ç¡®æ¯ä¸ªAppåœ¨è¿è¡ŒæœŸé—´å¯ä»¥ä½¿ç”¨çš„å†…å­˜æœ€å¤§å€¼ï¼Œä½†æ˜¯æœ‰å¼€å‘è€…è¿›è¡Œäº†å®éªŒå’Œç»Ÿè®¡ï¼Œä¸€èˆ¬åœ¨å ç”¨ç³»ç»Ÿå†…å­˜è¶…è¿‡20%çš„æ—¶å€™ä¼šæœ‰å†…å­˜è­¦å‘Šï¼Œè€Œè¶…è¿‡50%çš„æ—¶å€™ï¼Œå°±å¾ˆå®¹æ˜“Crashäº†ï¼Œæ‰€ä»¥å†…å­˜ä½¿ç”¨ç‡è¿˜æ˜¯å°½é‡è¦å°‘ï¼Œå¯¹äºæ•°æ®é‡æ¯”è¾ƒå¤§çš„åº”ç”¨ï¼Œå¯ä»¥é‡‡ç”¨åˆ†æ­¥åŠ è½½æ•°æ®çš„æ–¹å¼ï¼Œæˆ–è€…é‡‡ç”¨mmapæ–¹å¼ã€‚mmap æ˜¯ä½¿ç”¨é€»è¾‘å†…å­˜å¯¹ç£ç›˜æ–‡ä»¶è¿›è¡Œæ˜ å°„ï¼Œä¸­é—´åªæ˜¯è¿›è¡Œæ˜ å°„æ²¡æœ‰ä»»ä½•æ‹·è´æ“ä½œï¼Œé¿å…äº†å†™æ–‡ä»¶çš„æ•°æ®æ‹·è´ã€‚ æ“ä½œå†…å­˜å°±ç›¸å½“äºåœ¨æ“ä½œæ–‡ä»¶ï¼Œé¿å…äº†å†…æ ¸ç©ºé—´å’Œç”¨æˆ·ç©ºé—´çš„é¢‘ç¹åˆ‡æ¢ã€‚ä¹‹å‰åœ¨å¼€å‘è¾“å…¥æ³•çš„æ—¶å€™ ï¼Œè¯åº“çš„åŠ è½½ä¹Ÿæ˜¯ä½¿ç”¨mmapæ–¹å¼ï¼Œå¯ä»¥æœ‰æ•ˆé™ä½Appçš„å†…å­˜å ç”¨ç‡ï¼Œå…·ä½“ä½¿ç”¨å¯ä»¥å‚è€ƒé“¾æ¥ç¬¬ä¸€ç¯‡æ–‡ç« ã€‚\nå¾ªç¯å¼•ç”¨ å¾ªç¯å¼•ç”¨æ˜¯iOSå¼€å‘ä¸­ç»å¸¸é‡åˆ°çš„é—®é¢˜ï¼Œå°¤å…¶å¯¹äºæ–°æ‰‹æ¥è¯´æ˜¯ä¸ªå¤´ç–¼çš„é—®é¢˜ã€‚å¾ªç¯å¼•ç”¨å¯¹Appæœ‰æ½œåœ¨çš„å±å®³ï¼Œä¼šä½¿å†…å­˜æ¶ˆè€—è¿‡é«˜ï¼Œæ€§èƒ½å˜å·®å’ŒCrashç­‰ï¼ŒiOSå¸¸è§çš„å†…å­˜ä¸»è¦ä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼š\nDelegate ä»£ç†åè®®æ˜¯ä¸€ä¸ªæœ€å…¸å‹çš„åœºæ™¯ï¼Œéœ€è¦ä½ ä½¿ç”¨å¼±å¼•ç”¨æ¥é¿å…å¾ªç¯å¼•ç”¨ã€‚ARCæ—¶ä»£ï¼Œéœ€è¦å°†ä»£ç†å£°æ˜ä¸ºweakæ˜¯ä¸€ä¸ªå³å¥½åˆå®‰å…¨çš„åšæ³•ï¼š\n@property (nonatomic, weak) id \u0026lt;MyCustomDelegate\u0026gt; delegate; å¤åˆ¶ä»£ç  NSTimer NSTimeræˆ‘ä»¬å¼€å‘ä¸­ä¼šç”¨åˆ°å¾ˆå¤šï¼Œæ¯”å¦‚ä¸‹é¢ä¸€æ®µä»£ç \n- (void)viewDidLoad { [super viewDidLoad]; self.timer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(doSomeThing) userInfo:nil repeats:YES]; } - (void)doSomeThing { } - (void)dealloc { [self.timer invalidate]; self.timer = nil; } å¤åˆ¶ä»£ç  è¿™æ˜¯å…¸å‹çš„å¾ªç¯å¼•ç”¨ï¼Œå› ä¸ºtimerä¼šå¼ºå¼•ç”¨selfï¼Œè€ŒselfåˆæŒæœ‰äº†timerï¼Œæ‰€æœ‰å°±é€ æˆäº†å¾ªç¯å¼•ç”¨ã€‚é‚£æœ‰äººå¯èƒ½ä¼šè¯´ï¼Œæˆ‘ä½¿ç”¨ä¸€ä¸ªweakæŒ‡é’ˆï¼Œæ¯”å¦‚\n__weak typeof(self) weakSelf = self; self.mytimer = [NSTimer scheduledTimerWithTimeInterval:1 target:weakSelf selector:@selector(doSomeThing) userInfo:nil repeats:YES]; å¤åˆ¶ä»£ç  ä½†æ˜¯å…¶å®å¹¶æ²¡æœ‰ç”¨ï¼Œå› ä¸ºä¸ç®¡æ˜¯weakSelfè¿˜æ˜¯strongSelfï¼Œæœ€ç»ˆåœ¨NSTimerå†…éƒ¨éƒ½ä¼šé‡æ–°ç”Ÿæˆä¸€ä¸ªæ–°çš„æŒ‡é’ˆæŒ‡å‘selfï¼Œè¿™æ˜¯ä¸€ä¸ªå¼ºå¼•ç”¨çš„æŒ‡é’ˆï¼Œç»“æœå°±ä¼šå¯¼è‡´å¾ªç¯å¼•ç”¨ã€‚é‚£æ€ä¹ˆè§£å†³å‘¢ï¼Ÿä¸»è¦æœ‰å¦‚ä¸‹ä¸‰ç§æ–¹å¼ï¼š\nä½¿ç”¨ç±»æ–¹æ³• ä½¿ç”¨weakProxy ä½¿ç”¨GCD timer å…·ä½“å¦‚ä½•ä½¿ç”¨ï¼Œæˆ‘å°±ä¸åšå…·ä½“çš„ä»‹ç»ï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šå¯ä»¥å‚è€ƒã€‚\nBlock Blockçš„å¾ªç¯å¼•ç”¨ï¼Œä¸»è¦æ˜¯å‘ç”Ÿåœ¨ViewControllerä¸­æŒæœ‰äº†blockï¼Œæ¯”å¦‚ï¼š\n@propertyÂ (nonatomic,Â copy)Â LFCallbackBlockÂ callbackBlock; å¤åˆ¶ä»£ç  åŒæ—¶åœ¨å¯¹callbackBlockè¿›è¡Œèµ‹å€¼çš„æ—¶å€™åˆè°ƒç”¨äº†ViewControllerçš„æ–¹æ³•ï¼Œæ¯”å¦‚ï¼š\nself.callbackBlock = ^{ [self doSomething]; }]; å¤åˆ¶ä»£ç  å°±ä¼šå‘ç”Ÿå¾ªç¯å¼•ç”¨ï¼Œå› ä¸ºï¼šViewController-\u0026gt;å¼ºå¼•ç”¨äº†callback-\u0026gt;å¼ºå¼•ç”¨äº†ViewControllerï¼Œè§£å†³æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼š\n__weakÂ __typeof(self)Â weakSelfÂ =Â self; self.callbackBlock = ^{ [weakSelf doSomething]; }]; å¤åˆ¶ä»£ç  åŸå› æ˜¯ä½¿ç”¨MRCç®¡ç†å†…å­˜æ—¶ï¼ŒBlockçš„å†…å­˜ç®¡ç†éœ€è¦åŒºåˆ†æ˜¯Global(å…¨å±€)ã€Stack(æ ˆ)è¿˜æ˜¯Heap(å †)ï¼Œè€Œåœ¨ä½¿ç”¨äº†ARCä¹‹åï¼Œè‹¹æœè‡ªåŠ¨ä¼šå°†æ‰€æœ‰åŸæœ¬åº”è¯¥æ”¾åœ¨æ ˆä¸­çš„Blockå…¨éƒ¨æ”¾åˆ°å †ä¸­ã€‚å…¨å±€çš„Blockæ¯”è¾ƒç®€å•ï¼Œå‡¡æ˜¯æ²¡æœ‰å¼•ç”¨åˆ°Blockä½œç”¨åŸŸå¤–é¢çš„å‚æ•°çš„Blockéƒ½ä¼šæ”¾åˆ°å…¨å±€å†…å­˜å—ä¸­ï¼Œåœ¨å…¨å±€å†…å­˜å—çš„Blockä¸ç”¨è€ƒè™‘å†…å­˜ç®¡ç†é—®é¢˜ã€‚(æ”¾åœ¨å…¨å±€å†…å­˜å—æ˜¯ä¸ºäº†åœ¨ä¹‹åå†æ¬¡è°ƒç”¨è¯¥Blockæ—¶èƒ½å¿«é€Ÿååº”ï¼Œå½“ç„¶æ²¡æœ‰è°ƒç”¨å¤–éƒ¨å‚æ•°çš„Blockæ ¹æœ¬ä¸ä¼šå‡ºç°å†…å­˜ç®¡ç†é—®é¢˜)ã€‚\næ‰€ä»¥Blockçš„å†…å­˜ç®¡ç†å‡ºç°é—®é¢˜çš„ï¼Œç»å¤§éƒ¨åˆ†éƒ½æ˜¯åœ¨å †å†…å­˜ä¸­çš„Blockå‡ºç°äº†é—®é¢˜ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒBlockåˆå§‹åŒ–éƒ½æ˜¯åœ¨æ ˆä¸Šçš„ï¼Œä½†å¯èƒ½éšæ—¶è¢«æ”¶å›ï¼Œé€šè¿‡å°†Blockç±»å‹å£°æ˜ä¸ºcopyç±»å‹ï¼Œè¿™æ ·å¯¹Blockèµ‹å€¼çš„æ—¶å€™ï¼Œä¼šè¿›è¡Œcopyæ“ä½œï¼Œcopyåˆ°å †ä¸Šï¼Œå¦‚æœé‡Œé¢æœ‰å¯¹selfçš„å¼•ç”¨ï¼Œåˆ™ä¼šæœ‰ä¸€ä¸ªå¼ºå¼•ç”¨çš„æŒ‡é’ˆæŒ‡å‘selfï¼Œå°±ä¼šå‘ç”Ÿå¾ªç¯å¼•ç”¨ï¼Œå¦‚æœé‡‡ç”¨weakSelfï¼Œå†…éƒ¨ä¸ä¼šæœ‰å¼ºç±»å‹çš„æŒ‡é’ˆï¼Œæ‰€ä»¥å¯ä»¥è§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜ã€‚\né‚£æ˜¯ä¸æ˜¯æ‰€æœ‰çš„blockéƒ½ä¼šå‘ç”Ÿå¾ªç¯å¼•ç”¨å‘¢ï¼Ÿå…¶å®ä¸ç„¶ï¼Œæ¯”å¦‚UIViewçš„ç±»æ–¹æ³•BlockåŠ¨ç”»ï¼ŒNSArrayç­‰çš„ç±»çš„éå†æ–¹æ³•ï¼Œä¹Ÿéƒ½ä¸ä¼šå‘ç”Ÿå¾ªç¯å¼•ç”¨ï¼Œå› ä¸ºå½“å‰æ§åˆ¶å™¨ä¸€èˆ¬ä¸ä¼šå¼ºå¼•ç”¨ä¸€ä¸ªç±»ã€‚\nå…¶ä»–å†…å­˜é—®é¢˜ 1 NSNotification addObserverä¹‹åï¼Œè®°å¾—åœ¨deallocé‡Œé¢æ·»åŠ remove;\n2 åŠ¨ç”»çš„repeat countæ— é™å¤§ï¼Œè€Œä¸”ä¹Ÿä¸ä¸»åŠ¨åœæ­¢åŠ¨ç”»ï¼ŒåŸºæœ¬å°±ç­‰äºæ— é™å¾ªç¯äº†;\n3 forwardingTargetForSelectorè¿”å›äº†selfã€‚\nå†…å­˜è§£å†³æ€è·¯ï¼š 1 é€šè¿‡Instrumentsæ¥æŸ¥çœ‹leaks\n2 é›†æˆFacebookå¼€æºçš„FBRetainCycleDetector\n3 é›†æˆMLeaksFinder\nå…·ä½“åŸç†åŠä½¿ç”¨ï¼Œå¯ä»¥å‚è€ƒé“¾æ¥ã€‚\nCPUä½¿ç”¨ç‡ CPUçš„ä½¿ç”¨ä¹Ÿå¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ¥æŸ¥çœ‹ï¼Œä¸€ç§æ˜¯åœ¨è°ƒè¯•çš„æ—¶å€™Xcodeä¼šæœ‰å±•ç¤ºï¼Œå…·ä½“è¯¦ç»†ä¿¡æ¯å¯ä»¥è¿›å…¥Instrumentså†…æŸ¥çœ‹ï¼Œé€šè¿‡æŸ¥çœ‹Instrumentsçš„time profileæ¥å®šä½å¹¶è§£å†³é—®é¢˜ã€‚å¦ä¸€ç§å¸¸è§çš„æ–¹æ³•æ˜¯é€šè¿‡ä»£ç è¯»å–CPUä½¿ç”¨ç‡ï¼Œç„¶åæ˜¾ç¤ºåœ¨Appçš„è°ƒè¯•é¢æ¿ä¸Šï¼Œå¯ä»¥åœ¨Debugç¯å¢ƒä¸‹æ˜¾ç¤ºä¿¡æ¯ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š\nint result; mib[0] = CTL_HW; mib[1] = HW_CPU_FREQ; length = sizeof(result); if (sysctl(mib, 2, \u0026amp;result, \u0026amp;length, NULL, 0) \u0026lt; 0) { perror(\u0026#34;getting cpu frequency\u0026#34;); } printf(\u0026#34;CPU Frequency = %u hz\\n\u0026#34;, result); å¤åˆ¶ä»£ç  FPSç›‘æ§ ç›®å‰ä¸»è¦ä½¿ç”¨CADisplayLinkæ¥ç›‘æ§FPSï¼ŒCADisplayLinkæ˜¯ä¸€ä¸ªèƒ½è®©æˆ‘ä»¬ä»¥å’Œå±å¹•åˆ·æ–°ç‡ç›¸åŒçš„é¢‘ç‡å°†å†…å®¹ç”»åˆ°å±å¹•ä¸Šçš„å®šæ—¶å™¨ã€‚æˆ‘ä»¬åœ¨åº”ç”¨ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ CADisplayLink å¯¹è±¡ï¼ŒæŠŠå®ƒæ·»åŠ åˆ°ä¸€ä¸ªrunloopä¸­ï¼Œå¹¶ç»™å®ƒæä¾›ä¸€ä¸ª target å’Œselector åœ¨å±å¹•åˆ·æ–°çš„æ—¶å€™è°ƒç”¨ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯æ·»åŠ åˆ°runloopçš„common modeé‡Œé¢ï¼Œä»£ç å¦‚ä¸‹ï¼š\n- (void)setupDisplayLink { _displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(linkTicks:)]; [_displayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes]; } - (void)linkTicks:(CADisplayLink *)link { //æ‰§è¡Œæ¬¡æ•° _scheduleTimes ++; //å½“å‰æ—¶é—´æˆ³ if(_timestamp == 0){ _timestamp = link.timestamp; } CFTimeInterval timePassed = link.timestamp - _timestamp; if(timePassed \u0026gt;= 1.f) //fps CGFloat fps = _scheduleTimes/timePassed; printf(\u0026#34;fps:%.1f, timePassed:%f\\n\u0026#34;, fps, timePassed); } } å¤åˆ¶ä»£ç  å¯åŠ¨æ—¶é—´ ç‚¹è¯„Appé‡Œé¢æœ¬èº«å°±åŒ…å«äº†å¾ˆå¤šå¤æ‚çš„ä¸šåŠ¡ï¼Œæ¯”å¦‚å¤–å–ã€å›¢è´­ã€åˆ°ç»¼å’Œé…’åº—ç­‰ï¼ŒåŒæ—¶è¿˜å¼•å…¥äº†å¾ˆå¤šç¬¬ä¸‰æ–¹SDKæ¯”å¦‚å¾®ä¿¡ã€QQã€å¾®åšç­‰ï¼Œåœ¨Appåˆå§‹åŒ–çš„æ—¶å€™ï¼Œå¾ˆå¤šSDKåŠä¸šåŠ¡ä¹Ÿå¼€å§‹åˆå§‹åŒ–ï¼Œè¿™å°±ä¼šæ‹–æ…¢åº”ç”¨çš„å¯åŠ¨æ—¶é—´ã€‚ å¦‚ä¸‹ä¸»è¦å‚è€ƒäº†ä»Šæ—¥å¤´æ¡iOSå®¢æˆ·ç«¯å¯åŠ¨é€Ÿåº¦ä¼˜åŒ–\nAppçš„å¯åŠ¨æ—¶é—´t(Appæ€»å¯åŠ¨æ—¶é—´) = t1(main()ä¹‹å‰çš„åŠ è½½æ—¶é—´) + t2(main()ä¹‹åçš„åŠ è½½æ—¶é—´)ã€‚ t1 = ç³»ç»Ÿdylib(åŠ¨æ€é“¾æ¥åº“)å’Œè‡ªèº«Appå¯æ‰§è¡Œæ–‡ä»¶çš„åŠ è½½ï¼› t2 = mainæ–¹æ³•æ‰§è¡Œä¹‹ååˆ°AppDelegateç±»ä¸­çš„- (BOOL)Application:(UIApplication *)Application didFinishLaunchingWithOptions:(NSDictionary *)launchOptionsæ–¹æ³•æ‰§è¡Œç»“æŸå‰è¿™æ®µæ—¶é—´ï¼Œä¸»è¦æ˜¯æ„å»ºç¬¬ä¸€ä¸ªç•Œé¢ï¼Œå¹¶å®Œæˆæ¸²æŸ“å±•ç¤ºã€‚ å¤åˆ¶ä»£ç  é’ˆå¯¹t1çš„ä¼˜åŒ–ï¼Œä¼˜åŒ–ä¸»è¦æœ‰å¦‚ä¸‹ï¼š\nå‡å°‘ä¸å¿…è¦çš„frameworkï¼Œå› ä¸ºåŠ¨æ€é“¾æ¥æ¯”è¾ƒè€—æ—¶ï¼› æ£€æŸ¥frameworkåº”å½“è®¾ä¸ºoptionalå’Œrequiredï¼Œå¦‚æœè¯¥frameworkåœ¨å½“å‰Appæ”¯æŒçš„æ‰€æœ‰iOSç³»ç»Ÿç‰ˆæœ¬éƒ½å­˜åœ¨ï¼Œé‚£ä¹ˆå°±è®¾ä¸ºrequiredï¼Œå¦åˆ™å°±è®¾ä¸ºoptionalï¼Œå› ä¸ºoptionalä¼šæœ‰äº›é¢å¤–çš„æ£€æŸ¥ï¼› åˆå¹¶æˆ–è€…åˆ å‡ä¸€äº›OCç±»ï¼Œè¿™äº›æˆ‘ä¼šåœ¨åç»­çš„é™æ€æ£€æŸ¥ä¸­è¿›è¡Œè¯¦è§£ï¼› é’ˆå¯¹t2çš„æ—¶é—´ä¼˜åŒ–ï¼Œå¯ä»¥é‡‡ç”¨ï¼š\nå¼‚æ­¥åˆå§‹åŒ–éƒ¨åˆ†æ“ä½œï¼Œæ¯”å¦‚ç½‘ç»œï¼Œæ•°æ®è¯»å–ï¼› é‡‡ç”¨å»¶è¿ŸåŠ è½½æˆ–è€…æ‡’åŠ è½½æŸäº›è§†å›¾ï¼Œå›¾ç‰‡ç­‰çš„åˆå§‹åŒ–æ“ä½œï¼› å¯¹ä¸å›¾ç‰‡å±•ç¤ºç±»çš„Appï¼Œå¯ä»¥å°†è§£ç çš„å›¾ç‰‡ä¿å­˜åˆ°æœ¬åœ°ï¼Œä¸‹æ¬¡å¯åŠ¨æ—¶ç›´æ¥åŠ è½½è§£ç åçš„å›¾ç‰‡ï¼› å¯¹å®ç°äº†+load()æ–¹æ³•çš„ç±»è¿›è¡Œåˆ†æï¼Œå°½é‡å°†loadé‡Œçš„ä»£ç å»¶åè°ƒç”¨ã€‚ UIçš„ä¸»çº¿ç¨‹ç›‘æµ‹ æˆ‘ä»¬éƒ½çŸ¥é“iOSçš„UIçš„æ“ä½œä¸€å®šæ˜¯åœ¨ä¸»çº¿ç¨‹è¿›è¡Œï¼Œè¯¥ç›‘æµ‹å¯ä»¥é€šè¿‡hook UIViewçš„å¦‚ä¸‹ä¸‰ä¸ªæ–¹æ³•\n-setNeedsLayoutï¼Œ -setNeedsDisplayï¼Œ -setNeedsDisplayInRect å¤åˆ¶ä»£ç  ç¡®ä¿å®ƒä»¬éƒ½æ˜¯åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œã€‚å­çº¿ç¨‹æ“ä½œUIå¯èƒ½ä¼šå¼•èµ·ä»€ä¹ˆé—®é¢˜ï¼Œè‹¹æœè¯´å¾—å¹¶ä¸æ¸…æ¥šï¼Œä½†æ˜¯åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°æ•´ä¸ªAppçš„åŠ¨ç”»ä¸¢å¤±ï¼Œå¾ˆå¤§åŸå› å°±æ˜¯UIæ“ä½œä¸æ˜¯åœ¨ä¸»çº¿ç¨‹å¯¼è‡´ã€‚\n2 é™æ€åˆ†æè¿‡ç¨‹ é™æ€åˆ†æåœ¨è¿™é‡Œï¼Œæˆ‘ä¸»è¦ä»‹ç»ä¸¤æ–¹é¢ï¼Œä¸€ä¸ªæ˜¯æ­£å¸¸çš„code reviewæœºåˆ¶ï¼Œå¦å¤–ä¸€ä¸ªå°±æ˜¯ä»£ç é™æ€æ£€æŸ¥å·¥å…·\ncode review ç»„å†…çš„code reviewæœºåˆ¶ï¼Œå¯ä»¥å‚è€ƒå›¢é˜Ÿä¹‹å‰çš„OpenDoc - å‰ç«¯å›¢é˜ŸCodeReviewåˆ¶åº¦ï¼ŒiOSå®¢æˆ·ç«¯å¼€å‘ï¼Œä¼šåœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œä¸€äº›å¸¸è§æ‰‹è¯¯åŠCrashæƒ…å†µçš„é‡ç‚¹æ ‡è®°ï¼Œæ¯”å¦‚ï¼š\n1 æˆ‘ä»¬å¼€å‘ä¸­é¦–å…ˆéƒ½æ˜¯åœ¨æµ‹è¯•ç¯å¢ƒå¼€å‘ï¼Œå¼€å‘æ—¶å¯ä»¥å°†æµ‹è¯•ç¯å¢ƒçš„urlå†™æ­»åˆ°ä»£ç ä¸­ï¼Œä½†æ˜¯åœ¨æäº¤ä»£ç çš„æ—¶å€™ä¸€å®šè¦å°†ä»–æ”¹ä¸ºçº¿ä¸Šç¯å¢ƒçš„urlï¼Œè¿™ä¸ªå°±å¯ä»¥é€šè¿‡gitlabä¸­çš„é‡ç‚¹æ¯”è¾ƒéƒ¨åˆ†å­—ç¬¦ä¸²ï¼Œç»™æäº¤è€…ä¸€ä¸ªå¼ºåŠ›çš„æç¤ºï¼›\n2 å…¶ä»–å¸¸è§Crashçš„é‡ç‚¹æ£€æŸ¥ï¼Œæ¯”å¦‚NSMutableString/NSMutableArray/NSMutableDictionary/NSMutableSet ç­‰ç±»ä¸‹æ ‡è¶Šç•Œåˆ¤æ–­ä¿æŠ¤ï¼Œæˆ–è€… append/insert/add nilå¯¹è±¡çš„ä¿æŠ¤ï¼›\n3 ARCä¸‹çš„releaseæ“ä½œï¼ŒUITableViewCellè¿”å›nilï¼Œä»¥åŠå‰é¢ä»‹ç»çš„å¸¸è§çš„å¾ªç¯å¼•ç”¨ç­‰ã€‚\ncode reviewæœºåˆ¶ï¼Œä¸€æ–¹é¢æ˜¯ä¾èµ–å†™ä»£ç è€…çš„ä»£ç ä¹ æƒ¯åŠè´¨é‡ï¼Œå¦ä¸€åä¾èµ–å®¡æŸ¥è€…çš„ç»éªŒå’Œç»†å¿ƒç¨‹åº¦ï¼Œå³ä½¿è®©å¤šäººrevewï¼Œä¹Ÿå¯èƒ½ä¼šæ¼è¿‡ä¸€äº›é”™è¯¯ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆæ·»åŠ äº†ä»£ç çš„é™æ€æ£€æŸ¥ã€‚\nä»£ç é™æ€æ£€æŸ¥ ä»£ç é™æ€åˆ†æ(Static Program Analysis)æ˜¯æŒ‡åœ¨ä¸è¿è¡Œç¨‹åºçš„æ¡ä»¶ä¸‹ï¼Œç”±ä»£ç é™æ€åˆ†æå·¥å…·è‡ªåŠ¨å¯¹ç¨‹åºè¿›è¡Œåˆ†æçš„æ–¹æ³•. iOSå¸¸è§çš„é™æ€æ‰«æå·¥å…·æœ‰Clang Static Analyzerã€OCLintã€Inferï¼Œè¿™äº›ä¸»è¦æ˜¯ç”¨æ¥æ£€æŸ¥å¯èƒ½å­˜åœ¨çš„é—®é¢˜ï¼Œè¿˜æœ‰Deploymateç”¨æ¥æ£€æŸ¥apiçš„å…¼å®¹æ€§ã€‚\nClang Static Analyzer Clang Static Analyzeræ˜¯ä¸€æ¬¾é™æ€ä»£ç æ‰«æå·¥å…·ï¼Œä¸“é—¨ç”¨äºé’ˆå¯¹Cï¼ŒC++å’ŒObjective-Cçš„ç¨‹åºè¿›è¡Œåˆ†æã€‚å·²ç»è¢«Xcodeé›†æˆï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨Xcodeè¿›è¡Œé™æ€ä»£ç æ‰«æåˆ†æï¼ŒClangé»˜è®¤çš„é…ç½®ä¸»è¦æ˜¯ç©ºæŒ‡é’ˆæ£€æµ‹ï¼Œç±»å‹è½¬æ¢æ£€æµ‹ï¼Œç©ºåˆ¤æ–­æ£€æµ‹ï¼Œå†…å­˜æ³„æ¼æ£€æµ‹è¿™ç§ç­‰é—®é¢˜ã€‚å¦‚æœéœ€è¦æ›´å¤šçš„é…ç½®ï¼Œå¯ä»¥ä½¿ç”¨å¼€æºçš„Clangé¡¹ç›®ï¼Œç„¶åé›†æˆåˆ°è‡ªå·±çš„CIä¸Šã€‚\nOCLint OCLintæ˜¯ä¸€ä¸ªå¼ºå¤§çš„é™æ€ä»£ç åˆ†æå·¥å…·ï¼Œå¯ä»¥ç”¨æ¥æé«˜ä»£ç è´¨é‡ï¼ŒæŸ¥æ‰¾æ½œåœ¨çš„bugï¼Œä¸»è¦é’ˆå¯¹ Cã€C++å’ŒObjective-Cçš„é™æ€åˆ†æã€‚åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œè€Œä¸”æ˜¯å‡ºè‡ªå›½äººä¹‹æ‰‹ã€‚OCLintåŸºäº Clang è¾“å‡ºçš„æŠ½è±¡è¯­æ³•æ ‘å¯¹ä»£ç è¿›è¡Œé™æ€åˆ†æï¼Œæ”¯æŒä¸ç°æœ‰çš„CIé›†æˆï¼Œéƒ¨ç½²ä¹‹ååŸºæœ¬ä¸éœ€è¦ç»´æŠ¤ï¼Œç®€å•æ–¹ä¾¿ã€‚\nOCLintå¯ä»¥å‘ç°è¿™äº›é—®é¢˜\nå¯èƒ½çš„bug - ç©ºçš„ if / else / try / catch / finally è¯­å¥ æœªä½¿ç”¨çš„ä»£ç  - æœªä½¿ç”¨çš„å±€éƒ¨å˜é‡å’Œå‚æ•° å¤æ‚çš„ä»£ç  - é«˜åœˆå¤æ‚åº¦, NPathå¤æ‚, é«˜NCSS å†—ä½™ä»£ç  - å¤šä½™çš„ifè¯­å¥å’Œæ— ç”¨çš„æ‹¬å· åå‘³é“çš„ä»£ç  - è¿‡é•¿çš„æ–¹æ³•å’Œè¿‡é•¿çš„å‚æ•°åˆ—è¡¨ ä¸å¥½çš„ä½¿ç”¨ - å€’é€»è¾‘å’Œå…¥å‚é‡æ–°èµ‹å€¼ å¯¹äºOCLintçš„ä¸åŸç†å’Œéƒ¨ç½²æ–¹æ³•ï¼Œè¿™é‡Œä¸åšç»†è®²è§£ï¼Œä¸»è¦æ˜¯æ¯æ¬¡æäº¤ä»£ç åï¼Œå¯ä»¥åœ¨æ‰“åŒ…çš„è¿‡ç¨‹ä¸­è¿›è¡Œä»£ç æ£€æŸ¥ï¼ŒåŠæ—©å‘ç°æœ‰é—®é¢˜çš„ä»£ç ã€‚å½“ç„¶ä¹Ÿå¯ä»¥åœ¨åˆå¹¶ä»£ç ä¹‹å‰æ‰§è¡Œå¯¹åº”çš„æ£€æŸ¥ï¼Œå¦‚æœæ£€æŸ¥ä¸é€šè¿‡ï¼Œä¸èƒ½åˆå¹¶ä»£ç ï¼Œè¿™æ ·æ£€æŸ¥çš„åŠ›åº¦æ›´å¤§ã€‚\nInfer Infer facebookå¼€æºçš„é™æ€åˆ†æå·¥å…·ï¼ŒInferå¯ä»¥åˆ†æ Objective-Cï¼Œ Java æˆ–è€… C ä»£ç ï¼ŒæŠ¥å‘Šæ½œåœ¨çš„é—®é¢˜ã€‚Inferæ•ˆç‡é«˜ï¼Œè§„æ¨¡å¤§ï¼Œå‡ åˆ†é’Ÿèƒ½æ‰«ææ•°åƒè¡Œä»£ç ï¼› C/OCä¸­æ•æ‰çš„bugç±»å‹ä¸»è¦æœ‰ï¼š\n1:Resource leak 2:Memory leak 3:Null dereference 4:Premature nil termination argument å¤åˆ¶ä»£ç  åªåœ¨ OCä¸­æ•æ‰çš„bugç±»å‹\n1:Retain cycle 2:Parameter not null checked 3:Ivar not null checked å¤åˆ¶ä»£ç  ç»“è®º Clang Static Analyzerå’ŒXcodeé›†æˆåº¦æ›´é«˜ã€æ›´å¥½ç”¨ï¼Œæ”¯æŒå‘½ä»¤è¡Œå½¢å¼ï¼Œå¹¶ä¸”èƒ½å¤Ÿç”¨äºæŒç»­é›†æˆã€‚OCLintæœ‰æ›´å¤šçš„æ£€æŸ¥è§„åˆ™å’Œå®šåˆ¶ï¼Œå’Œå¾ˆå¤šå·¥å…·é›†æˆï¼Œä¹ŸåŒæ ·å¯ç”¨äºæŒç»­é›†æˆã€‚Inferæ•ˆç‡é«˜ï¼Œè§„æ¨¡å¤§ï¼Œå‡ åˆ†é’Ÿèƒ½æ‰«ææ•°åƒè¡Œä»£ç ï¼›æ”¯æŒå¢é‡åŠéå¢é‡åˆ†æï¼›åˆ†è§£åˆ†æï¼Œæ•´åˆè¾“å‡ºç»“æœã€‚inferèƒ½å°†ä»£ç åˆ†è§£ï¼Œå°èŒƒå›´åˆ†æåå†å°†ç»“æœæ•´åˆåœ¨ä¸€èµ·ï¼Œå…¼é¡¾åˆ†æçš„æ·±åº¦å’Œé€Ÿåº¦ï¼Œæ‰€ä»¥æ ¹æ®è‡ªå·±çš„é¡¹ç›®ç‰¹ç‚¹ï¼Œé€‰æ‹©åˆé€‚çš„æ£€æŸ¥å·¥å…·å¯¹ä»£ç è¿›è¡Œæ£€æŸ¥ï¼Œå‡å°‘äººåŠ›reviewæˆæœ¬ï¼Œä¿è¯ä»£ç è´¨é‡ï¼Œæœ€å¤§é™åº¦çš„é¿å…è¿è¡Œé”™è¯¯ã€‚\n3 æµ‹è¯•è¿‡ç¨‹ å‰é¢ä»‹ç»äº†å¾ˆå¤šæŒ‡æ ‡çš„ç›‘æµ‹ï¼Œä»£ç é™æ€æ£€æŸ¥ï¼Œè¿™äº›éƒ½æ˜¯æ€§èƒ½ç›¸å…³çš„ï¼ŒçœŸæ­£å†³å®šä¸€ä¸ªAppåŠŸèƒ½ç¨³å®šæ˜¯å¦çš„æ˜¯æµ‹è¯•ç¯èŠ‚ã€‚æµ‹è¯•æ˜¯å‘å¸ƒä¹‹å‰çš„æœ€åä¸€é“å¡ï¼Œå¦‚æœbugä¸èƒ½åœ¨æµ‹è¯•ä¸­å‘ç°ï¼Œé‚£ä¹ˆæœ€ç»ˆå°±ä¼šè§¦è¾¾ç”¨æˆ·ï¼Œæ‰€ä»¥ä¸€ä¸ªAppçš„ç¨³å®šæ€§ï¼Œå¾ˆå¤§ç¨‹åº¦å†³å®šå®ƒçš„æµ‹è¯•è¿‡ç¨‹ã€‚iOS Appçš„æµ‹è¯•åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªå±‚æ¬¡ï¼šå•å…ƒæµ‹è¯•ï¼ŒUIæµ‹è¯•ï¼ŒåŠŸèƒ½æµ‹è¯•ï¼Œå¼‚å¸¸æµ‹è¯•ã€‚\nå•å…ƒæµ‹è¯• XCTestæ˜¯è‹¹æœå®˜æ–¹æä¾›çš„å•å…ƒæµ‹è¯•æ¡†æ¶ï¼Œä¸Xcodeé›†æˆåœ¨ä¸€èµ·ï¼Œç”±æ­¤è‹¹æœæä¾›äº†å¾ˆè¯¦ç»†çš„æ–‡æ¡£XCTestã€‚\nXcodeå•å…ƒæµ‹è¯•åŒ…å«åœ¨ä¸€ä¸ªXCTestCaseçš„å­ç±»ä¸­ã€‚ä¾æ®çº¦æŸï¼Œæ¯ä¸€ä¸ª XCTestCase å­ç±»å°è£…ä¸€ä¸ªç‰¹æ®Šçš„æœ‰å…³è”çš„é›†åˆï¼Œä¾‹å¦‚ä¸€ä¸ªåŠŸèƒ½ã€ç”¨ä¾‹æˆ–è€…ä¸€ä¸ªç¨‹åºæµã€‚åŒæ—¶è¿˜æä¾›äº†XCTestExpectationæ¥å¤„ç†å¼‚æ­¥ä»»åŠ¡çš„æµ‹è¯•ï¼Œä»¥åŠæ€§èƒ½æµ‹è¯•measureBlock()ï¼Œè¿˜åŒ…æ‹¬å¾ˆå¤šç¬¬ä¸‰æ–¹æµ‹è¯•æ¡†æ¶æ¯”å¦‚ï¼šKiWiï¼ŒQuickï¼ŒSpectaç­‰ï¼Œä»¥åŠå¸¸ç”¨çš„mockæ¡†æ¶OCMockã€‚\nå•å…ƒæµ‹è¯•çš„ç›®çš„æ˜¯å°†ç¨‹åºä¸­æ‰€æœ‰çš„æºä»£ç ï¼Œéš”ç¦»æˆæœ€å°çš„å¯æµ‹è¯•å•å…ƒï¼Œä»¥ç¡®ä¿æ¯ä¸ªå•å…ƒçš„æ­£ç¡®æ€§ï¼Œå¦‚æœæ¯ä¸ªå•å…ƒéƒ½èƒ½ä¿è¯æ­£ç¡®ï¼Œå°±èƒ½ä¿è¯åº”ç”¨ç¨‹åºæ•´ä½“ç›¸å½“ç¨‹åº¦çš„æ­£ç¡®æ€§ã€‚ä½†æ˜¯åœ¨å®é™…çš„æ“ä½œè¿‡ç¨‹ä¸­ï¼Œå¾ˆå¤šå…¬å¸éƒ½å¾ˆéš¾å½»åº•æ‰§è¡Œå•å…ƒæµ‹è¯•ï¼Œä¸»è¦å°±æ˜¯å•å…ƒæµ‹è¯•ä»£ç é‡ç”šè‡³å¤§äºåŠŸèƒ½å¼€å‘ï¼Œæ¯”è¾ƒéš¾äºç»´æŠ¤ã€‚\nå¯¹äºæµ‹è¯•ç”¨ä¾‹è¦†ç›–åº¦å¤šå°‘åˆé€‚è¿™ä¸ªè¯é¢˜ï¼Œä¹Ÿæ˜¯ä»è€…è§ä»æ™ºè€…è§æ™ºï¼Œå…¶å®ä¸€ä¸ªè½¯ä»¶è¦†ç›–åº¦åœ¨50%ä»¥ä¸Šå°±å¯ä»¥ç§°ä¸ºä¸€ä¸ªå¥å£®çš„è½¯ä»¶äº†ï¼Œè¦è¾¾åˆ°70ï¼Œ80è¿™äº›å·²ç»æ˜¯éå¸¸éš¾äº†ï¼Œä¸è¿‡æˆ‘ä»¬å¸¸è§çš„ä¸€äº›ç¬¬ä¸‰æ–¹å¼€æºæ¡†æ¶çš„æµ‹è¯•ç”¨ä¾‹è¦†ç›–ç‡è¿˜æ˜¯éå¸¸é«˜çš„ï¼Œè®©äººå’‹èˆŒã€‚ä¾‹å¦‚ï¼ŒAFNNetWorkingçš„è¦†ç›–ç‡é«˜è¾¾87%,SDWebImageçš„è¦†ç›–ç‡é«˜è¾¾77%ã€‚\nUIæµ‹è¯• Xcode7ä¸­æ–°å¢äº†UI Testæµ‹è¯•ï¼ŒUIæµ‹è¯•æ˜¯æ¨¡æ‹Ÿç”¨æˆ·æ“ä½œï¼Œè¿›è€Œä»ä¸šåŠ¡å¤„å±‚é¢æµ‹è¯•ï¼Œå¸¸ç”¨ç¬¬ä¸‰æ–¹åº“æœ‰KIFï¼Œappiumã€‚å…³äºXCTestçš„UIæµ‹è¯•ï¼Œå»ºè®®çœ‹çœ‹WWDC 2015çš„è§†é¢‘UI Testing in Xcodeã€‚ UIæµ‹è¯•è¿˜æœ‰ä¸€ä¸ªæ ¸å¿ƒåŠŸèƒ½æ˜¯UI Recordingã€‚é€‰ä¸­ä¸€ä¸ªUIæµ‹è¯•ç”¨ä¾‹ï¼Œç„¶åç‚¹å‡»å›¾ä¸­çš„å°çº¢ç‚¹æ—¢å¯ä»¥å¼€å§‹UI Recodingã€‚ä½ ä¼šå‘ç°ï¼šéšç€ç‚¹å‡»æ¨¡æ‹Ÿå™¨ï¼Œè‡ªåŠ¨åˆæˆäº†æµ‹è¯•ä»£ç ã€‚ï¼ˆé€šå¸¸è‡ªåŠ¨åˆæˆä»£ç åï¼Œè¿˜éœ€è¦æ‰‹åŠ¨çš„å»è°ƒæ•´ï¼‰\n[å›¾ç‰‡ä¸Šä¼ ä¸­\u0026hellip;(image-bce7b8-1554696366212-78)]\nåŠŸèƒ½æµ‹è¯• åŠŸèƒ½æµ‹è¯•è·Ÿä¸Šè¿°çš„UTå’ŒUIæµ‹è¯•æœ‰ä¸€äº›ç›¸é€šçš„åœ°æ–¹ï¼Œé¦–å…ˆé’ˆå¯¹å„ä¸ªæ¨¡å—è®¾è®¡çš„åŠŸèƒ½ï¼Œæµ‹è¯•æ˜¯å¦è¾¾åˆ°äº§å“çš„ç›®çš„ï¼Œé€šå¸¸åŠŸèƒ½æµ‹è¯•ä¸»è¦æ˜¯æµ‹è¯•åŠäº§å“äººå‘˜ï¼Œç„¶åè¿˜éœ€è¦è¿›è¡Œä¸“é¡¹æµ‹è¯•ï¼Œæ¯”å¦‚æˆ‘ä»¬å…¬å¸çš„äº‘æµ‹å¹³å°ï¼Œä¼šå¯¹æ•´ä¸ªAppçš„æ€§èƒ½ï¼Œç¨³å®šæ€§ï¼ŒUIç­‰éƒ½è¿›è¡Œæ•´ä½“è¯„æµ‹ï¼Œçœ‹æ˜¯å¦è¾¾åˆ°æ ‡å‡†ï¼Œå¯¹äºå¤§è§„æ¨¡çš„æ´»åŠ¨ï¼Œè¿˜éœ€è¦è¿›è¡ŒæœåŠ¡ç«¯çš„å‹åŠ›æµ‹è¯•ï¼Œç¡®ä¿æ•´ä¸ªåŠŸèƒ½æ— å¼‚å¸¸ã€‚æµ‹è¯•é€šè¿‡åï¼Œå¯ä»¥è¿›è¡ŒestFlightæµ‹è¯•ï¼Œåˆ°æœ€åæ­£å¼å‘å¸ƒã€‚\nåŠŸèƒ½æµ‹è¯•è¿˜åŒ…æ‹¬å¦‚ä¸‹åœºæ™¯ï¼šç³»ç»Ÿå…¼å®¹æ€§æµ‹è¯•ï¼Œå±å¹•åˆ†è¾¨ç‡å…¼å®¹æ€§æµ‹è¯•ï¼Œè¦†ç›–å®‰è£…æµ‹è¯•ï¼ŒUIæ˜¯å¦ç¬¦åˆè®¾è®¡ï¼Œæ¶ˆæ¯æ¨é€ç­‰ï¼Œä»¥åŠå‰é¢å¼€å‘è¿‡ç¨‹ä¸­éœ€è¦ç›‘æ§çš„å†…å­˜ã€cpuã€ç”µé‡ã€ç½‘ç»œæµé‡ã€å†·å¯åŠ¨æ—¶é—´ã€çƒ­å¯åŠ¨æ—¶é—´ã€å­˜å‚¨ã€å®‰è£…åŒ…çš„å¤§å°ç­‰æµ‹è¯•ã€‚\nå¼‚å¸¸æµ‹è¯• å¼‚å¸¸æµ‹è¯•ä¸»è¦æ˜¯é’ˆå¯¹ä¸€äº›ä¸å¸¸è§„çš„æ“ä½œ\nä½¿ç”¨è¿‡ç¨‹ä¸­çš„æ¥ç”µæ—¶åŠç»“æŸåï¼Œç•Œé¢æ˜¾ç¤ºæ˜¯å¦æ­£å¸¸ï¼› çŠ¶æ€æ ä¸ºä¸¤å€é«˜åº¦æ—¶ï¼Œç•Œé¢æ˜¯å¦æ˜¾ç¤ºæ­£å¸¸ï¼› æ„å¤–æ–­ç”µåï¼Œæ•°æ®æ˜¯å¦ä¿å­˜ï¼Œæ•°æ®æ˜¯å¦æœ‰æŸå®³ç­‰ï¼› è®¾å¤‡å……ç”µæ—¶ï¼Œä¸åŒç”µé‡æ—¶çš„Appå“åº”é€Ÿåº¦åŠæ“ä½œæµç•…åº¦ç­‰ï¼› å…¶ä»–Appçš„ç›¸äº’åˆ‡æ¢ï¼Œå‰åå°è½¬æ¢æ—¶ï¼Œæ˜¯å¦æ­£å¸¸ï¼› ç½‘ç»œå˜åŒ–æ—¶çš„æç¤ºï¼Œå¼±ç½‘ç¯å¢ƒä¸‹çš„ç½‘ç»œè¯·æ±‚æˆåŠŸç‡ç­‰ï¼› å„ç§monkeyçš„éšæœºç‚¹å‡»ï¼Œå¤šç‚¹è§¦æ‘¸æµ‹è¯•ç­‰æ˜¯å¦æ­£å¸¸ï¼› æ›´æ”¹ç³»ç»Ÿæ—¶é—´ï¼Œå­—ä½“å¤§å°ï¼Œè¯­è¨€ç­‰æ˜¾ç¤ºæ˜¯å¦æ­£å¸¸ï¼› è®¾å¤‡å­˜å‚¨ä¸å¤Ÿæ—¶ï¼Œæ˜¯å¦èƒ½æ­£å¸¸æ“ä½œï¼› \u0026hellip; å¼‚å¸¸æµ‹è¯•æœ‰å¾ˆå¤šï¼ŒAppé’ˆå¯¹è‡ªèº«çš„ç‰¹ç‚¹ï¼Œå¯ä»¥é€‰æ‹©æ€§çš„è¿›è¡Œè¾¹ç•Œå’Œå¼‚å¸¸æµ‹è¯•ï¼Œä¹Ÿæ˜¯ä¿è¯Appç¨³å®šè¡Œçš„ä¸€ä¸ªé‡è¦æ–¹é¢ã€‚\n4 å‘å¸ƒåŠç›‘æ§ å› ä¸ºç§»åŠ¨Appçš„ç‰¹ç‚¹ï¼Œå³ä½¿æˆ‘ä»¬é€šè¿‡äº†å„ç§æµ‹è¯•ï¼Œäº§å“æœ€ç»ˆå‘å¸ƒåï¼Œè¿˜æ˜¯ä¼šé‡åˆ°å¾ˆå¤šé—®é¢˜ï¼Œæ¯”å¦‚Crashï¼Œç½‘ç»œå¤±è´¥ï¼Œæ•°æ®æŸåï¼Œè´¦å·å¼‚å¸¸ç­‰ç­‰ã€‚é’ˆå¯¹å·²ç»å‘å¸ƒçš„Appï¼Œä¸»è¦æœ‰ä¸€ä¸‹æ–¹å¼ä¿è¯ç¨³å®šæ€§ï¼š\nçƒ­ä¿®å¤ ç›®å‰æ¯”è¾ƒæµè¡Œçš„çƒ­ä¿®å¤æ–¹æ¡ˆéƒ½æ˜¯åŸºäºJSPatchã€React Nativeã€Weexã€lua+waxã€‚\nJSPatchèƒ½åšåˆ°é€šè¿‡jsè°ƒç”¨å’Œæ”¹å†™OCæ–¹æ³•ã€‚æœ€æ ¹æœ¬çš„åŸå› æ˜¯ Objective-C æ˜¯åŠ¨æ€è¯­è¨€ï¼ŒOCä¸Šæ‰€æœ‰æ–¹æ³•çš„è°ƒç”¨/ç±»çš„ç”Ÿæˆéƒ½é€šè¿‡ objective-c Runtime åœ¨è¿è¡Œæ—¶è¿›è¡Œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç±»åå’Œæ–¹æ³•ååå°„å¾—åˆ°ç›¸åº”çš„ç±»å’Œæ–¹æ³•ï¼Œä¹Ÿå¯ä»¥æ›¿æ¢æŸä¸ªç±»çš„æ–¹æ³•ä¸ºæ–°çš„å®ç°ï¼Œè¿˜å¯ä»¥æ–°æ³¨å†Œä¸€ä¸ªç±»ï¼Œä¸ºç±»æ·»åŠ æ–¹æ³•ã€‚JSPatch çš„åŸç†å°±æ˜¯ï¼šJSä¼ é€’å­—ç¬¦ä¸²ç»™OCï¼ŒOCé€šè¿‡ Runtime æ¥å£è°ƒç”¨å’Œæ›¿æ¢OCæ–¹æ³•ã€‚\nReact Native æ˜¯ä» Web å‰ç«¯å¼€å‘æ¡†æ¶ React å»¶ä¼¸å‡ºæ¥çš„è§£å†³æ–¹æ¡ˆï¼Œä¸»è¦è§£å†³çš„é—®é¢˜æ˜¯ Web é¡µé¢åœ¨ç§»åŠ¨ç«¯æ€§èƒ½ä½çš„é—®é¢˜ï¼ŒReact Native è®©å¼€å‘è€…å¯ä»¥åƒå¼€å‘ Web é¡µé¢é‚£æ ·ç”¨ React çš„æ–¹å¼å¼€å‘åŠŸèƒ½ï¼ŒåŒæ—¶æ¡†æ¶ä¼šé€šè¿‡ JavaScript ä¸ Objective-C çš„é€šä¿¡è®©ç•Œé¢ä½¿ç”¨åŸç”Ÿç»„ä»¶æ¸²æŸ“ï¼Œè®©å¼€å‘å‡ºæ¥çš„åŠŸèƒ½æ‹¥æœ‰åŸç”ŸAppçš„æ€§èƒ½å’Œä½“éªŒã€‚\nWeexé˜¿é‡Œå¼€æºçš„ï¼ŒåŸºäºVue+Nativeçš„å¼€å‘æ¨¡å¼ï¼Œè·ŸRNçš„ä¸»è¦åŒºåˆ«å°±åœ¨Reactå’ŒVueçš„åŒºåˆ«ï¼ŒåŒæ—¶åœ¨RNçš„åŸºç¡€ä¸Šè¿›è¡Œäº†éƒ¨åˆ†æ€§èƒ½ä¼˜åŒ–ï¼Œæ€»ä½“å¼€å‘æ€è·¯è·ŸRNæ˜¯æ¯”è¾ƒåƒçš„ã€‚\nä½†æ˜¯åœ¨ä»Šå¹´ä¸ŠåŠå¹´ï¼Œè‹¹æœä»¥å®‰å…¨ä¸ºç†ç”±ï¼Œå¼€å§‹æ‹’ç»æœ‰çƒ­ä¿®å¤åŠŸèƒ½çš„åº”ç”¨ï¼Œä½†å…¶å®è‹¹æœæ‹’çš„ä¸æ˜¯çƒ­æ›´æ–°ï¼Œæ‹’çš„æ˜¯ä»ç½‘ç»œä¸‹è½½ä»£ç å¹¶ä¿®æ”¹åº”ç”¨è¡Œä¸ºï¼Œè‹¹æœç¦æ­¢çš„æ˜¯â€œåŸºäºåå°„çš„çƒ­æ›´æ–°â€œï¼Œè€Œä¸æ˜¯ â€œåŸºäºæ²™ç›’æ¥å£çš„çƒ­æ›´æ–°â€ã€‚è€Œå¤§éƒ¨åˆ†æ¡†æ¶ï¼ˆå¦‚ React Nativeã€weexï¼‰å’Œæ¸¸æˆå¼•æ“ï¼ˆæ¯”å¦‚ Unityã€Cocos2d-xç­‰ï¼‰éƒ½å±äºåè€…ï¼Œæ‰€ä»¥ä¸åœ¨è¢«è­¦å‘ŠèŒƒå›´å†…ã€‚è€ŒJSPatchå› ä¸ºåœ¨å›½å†…å¤§éƒ¨åˆ†åº”ç”¨æ¥åšçƒ­æ›´æ–°ä¿®å¤bugçš„è¡Œä¸ºï¼Œæ‰€ä»¥æ‰å›è¢«è‹¹æœç¦æ­¢ã€‚\né™çº§ ç”¨æˆ·ä½¿ç”¨Appä¸€æ®µæ—¶é—´åï¼Œå¯èƒ½ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼šæ¯æ¬¡æ‰“å¼€Appæ—¶é—ªé€€ï¼Œæˆ–è€…æ­£å¸¸æ“ä½œåˆ°æŸä¸ªç•Œé¢æ—¶é—ªé€€ï¼Œæ— æ³•æ­£å¸¸ä½¿ç”¨Appã€‚è¿™æ ·çš„ç”¨æˆ·ä½“éªŒååˆ†ç³Ÿç³•ï¼Œå¦‚æœæ²¡æœ‰ä¸€ä¸ªå¥½çš„è§£å†³æ–¹æ¡ˆï¼Œå¾ˆå®¹æ˜“è¢«ç”¨æˆ·åˆ é™¤Appï¼Œå¯¼è‡´ç”¨æˆ·é‡çš„æµå¤±ã€‚å› ä¸ºçƒ­æ›´æ–°åŸºæœ¬ä¸èƒ½ä½¿ç”¨ï¼Œé‚£å°±åªèƒ½æ˜¯Appè‡ªèº«ä¿®å¤èƒ½åŠ›ã€‚ç›®å‰å¸¸ç”¨çš„ä¿®å¤èƒ½åŠ›æœ‰ï¼š\nå¯åŠ¨Crashçš„ç›‘æ§åŠä¿®å¤ 1 åœ¨åº”ç”¨èµ·æ¥çš„æ—¶å€™ï¼Œè®°å½•flagå¹¶ä¿å­˜æœ¬åœ°ï¼Œå¯åŠ¨ä¸€ä¸ªå®šæ—¶å™¨ï¼Œæ¯”å¦‚5ç§’é’Ÿå†…ï¼Œå¦‚æœæ²¡æœ‰å‘ç”ŸCrashï¼Œåˆ™è®¤ä¸ºç”¨æˆ·æ“ä½œæ­£å¸¸ï¼Œæ¸…ç©ºæœ¬åœ°flagã€‚\n2 ä¸‹æ¬¡å¯åŠ¨ï¼Œå‘ç°æœ‰flagï¼Œåˆ™è¡¨æ˜ä¸Šæ¬¡å¯åŠ¨Crashï¼Œå¦‚æœflagæ•°ç»„è¶Šå¤§ï¼Œåˆ™è¯´æ˜Crashçš„æ¬¡æ•°è¶Šå¤šï¼Œè¿™æ ·å°±éœ€è¦å¯¹æ•´ä¸ªAppè¿›è¡Œé™çº§å¤„ç†ï¼Œæ¯”å¦‚ç™»å‡ºè´¦å·ï¼Œæ¸…ç©ºDocuments/Library/Cachesç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚\nå…·ä½“ä¸šåŠ¡ä¸‹çš„CrashåŠä¿®å¤ é’ˆå¯¹æŸäº›å…·ä½“ä¸šåŠ¡Crashåœºæ™¯ï¼Œå¦‚æœæ˜¯ä¸Šçº¿çš„å‰ç«¯é¡µé¢å¼•èµ·çš„ï¼Œå¯ä»¥å…ˆå¯¹å‰ç«¯åŠŸèƒ½è¿›è¡Œå›æ»šï¼Œæˆ–è€…éšè—å…¥å£ï¼Œç­‰ä¿®å¤å®Œæ¯•åå†ä¸Šçº¿ï¼Œå¦‚æœæ˜¯å®¢æˆ·ç«¯çš„æŸäº›å¼‚å¸¸ï¼Œæ¯”å¦‚æ•°æ®åº“å‡è¿é—®é¢˜ï¼Œä¸»è¦æ˜¯è¿›è¡Œä¸šåŠ¡æ•°æ®åº“ä¿®å¤ï¼Œç¼“å­˜æ–‡ä»¶çš„åˆ é™¤ï¼Œè´¦å·é€€å‡ºç­‰æ“ä½œï¼Œå°½é‡åªä¿®å¤æ­¤ä¸šåŠ¡çš„ç›¸å…³çš„æ•°æ®ã€‚\nç½‘ç»œé™çº§ æ¯”å¦‚ç‚¹è¯„Appï¼Œæœ¬èº«æœ‰CIPï¼ˆå…¬å¸å†…éƒ¨è‡ªå·±ç ”å‘çš„ï¼‰é•¿è¿æ¥ï¼Œæ¥å…¥è…¾è®¯äº‘çš„WNSé•¿è¿æ¥ï¼ŒUDPè¿æ¥ï¼ŒHTTPçŸ­è¿æ¥ï¼Œå¦‚æœCIPæœåŠ¡å™¨å‘ç”Ÿé—®é¢˜ï¼Œå¯ä»¥åŠæ—¶åˆ‡æ¢åˆ°WNSè¿æ¥ï¼Œæˆ–è€…é™çº§åˆ°Httpè¿æ¥ï¼Œä¿è¯ç½‘ç»œè¿æ¥çš„æˆåŠŸç‡ã€‚\nçº¿ä¸Šç›‘æ§ Crashç›‘æ§ Crashæ˜¯å¯¹ç”¨æˆ·æ¥è¯´æ˜¯æœ€ç³Ÿç³•çš„ä½“éªŒï¼ŒCrashæ—¥å¿—èƒ½å¤Ÿè®°å½•ç”¨æˆ·é—ªé€€çš„å´©æºƒæ—¥å¿—åŠå †æ ˆï¼Œè¿›ç¨‹çº¿ç¨‹ä¿¡æ¯ï¼Œç‰ˆæœ¬å·ï¼Œç³»ç»Ÿç‰ˆæœ¬å·ï¼Œç³»ç»Ÿæœºå‹ç­‰æœ‰ç”¨ä¿¡æ¯ï¼Œæ”¶é›†çš„ä¿¡æ¯è¶Šè¯¦ç»†ï¼Œè¶Šèƒ½å¤Ÿå¸®åŠ©è§£å†³å´©æºƒï¼Œæ‰€ä»¥å„å¤§Appéƒ½æœ‰è‡ªå·±å´©æºƒæ—¥å¿—æ”¶é›†ç³»ç»Ÿï¼Œæˆ–è€…ä¹Ÿå¯ä»¥ä½¿ç”¨å¼€æºæˆ–è€…ä»˜è´¹çš„ç¬¬ä¸‰æ–¹Crashæ”¶é›†å¹³å°ã€‚\nç«¯åˆ°ç«¯æˆåŠŸç‡ç›‘æ§ ç«¯åˆ°ç«¯ç›‘æ§æ˜¯ä»å®¢æˆ·ç«¯Appå‘å‡ºè¯·æ±‚æ—¶è®¡æ—¶ï¼Œåˆ°Appæ”¶åˆ°æ•°æ®æ•°æ®çš„æˆåŠŸç‡ï¼Œç»Ÿè®¡å¯¹è±¡æ˜¯ï¼šç½‘ç»œæ¥å£è¯·æ±‚ï¼ˆåŒ…æ‹¬H5é¡µé¢åŠ è½½ï¼‰çš„æˆè´¥å’Œç«¯åˆ°ç«¯å»¶æ—¶æƒ…å†µã€‚ç«¯åˆ°ç«¯ç›‘æ§SDKæä¾›äº†ç›‘æ§ä¸Šä¼ æ¥å£ï¼Œè°ƒç”¨SDKæä¾›çš„ç›‘æ§APIå¯ä»¥å°†æ•°æ®ä¸ŠæŠ¥åˆ°ç›‘æ§æœåŠ¡å™¨ä¸­ã€‚\næ•´ä¸ªç«¯åˆ°ç«¯ç›‘æ§çš„å¯ä»¥åœ¨å¤šä¸ªç»´åº¦ä¸ŠåšæŸ¥è¯¢ç«¯åˆ°ç«¯æˆåŠŸç‡ã€å“åº”æ—¶é—´ã€è®¿é—®é‡çš„æŸ¥è¯¢ï¼Œç»´åº¦åŒ…æ‹¬ï¼šè¿”å›ç ã€ç½‘ç»œã€ç‰ˆæœ¬ã€å¹³å°ã€åœ°åŒºã€è¿è¥å•†ç­‰ã€‚\nç”¨æˆ·è¡Œä¸ºæ—¥å¿— ç”¨æˆ·è¡Œä¸ºæ—¥å¿—ï¼Œä¸»è¦è®°å½•ç”¨æˆ·åœ¨ä½¿ç”¨Appè¿‡ç¨‹ä¸­ï¼Œç‚¹å‡»å…ƒç´ çš„æ—¶é—´ç‚¹ï¼Œæµè§ˆæ—¶é•¿ï¼Œè·³è½¬æµç¨‹ç­‰ï¼Œç„¶ååŸºäºæ­¤è¿›è¡Œç”¨æˆ·è¡Œä¸ºåˆ†æï¼Œå¤§éƒ¨åˆ†åº”ç”¨çš„æ¨èç®—æ³•éƒ½æ˜¯åŸºäºç”¨æˆ·è¡Œä¸ºæ—¥å¿—æ¥ç»Ÿè®¡çš„ã€‚æŸäº›æƒ…å†µä¸‹ï¼ŒCrashåˆ†æéœ€è¦æŸ¥è¯¢ç”¨æˆ·çš„è¡Œä¸ºæ—¥å¿—ï¼Œè·å–ç”¨æˆ·ä½¿ç”¨Appçš„æµç¨‹ï¼Œå¸®åŠ©è§£å†³Crashç­‰å…¶ä»–é—®é¢˜ã€‚\nä»£ç çº§æ—¥å¿— ä»£ç çº§åˆ«çš„æ—¥å¿—ï¼Œä¸»è¦ç”¨æ¥è®°å½•ä¸€ä¸ªAppçš„æ€§èƒ½ç›¸å…³çš„æ•°æ®ï¼Œæ¯”å¦‚é¡µé¢æ‰“å¼€é€Ÿåº¦ï¼Œå†…å­˜ä½¿ç”¨ç‡ï¼ŒCPUå ç”¨ç‡ï¼Œé¡µé¢çš„å¸§ç‡ï¼Œç½‘ç»œæµé‡ï¼Œè¯·æ±‚é”™è¯¯ç»Ÿè®¡ç­‰ï¼Œé€šè¿‡æ”¶é›†ç›¸å…³çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä¼˜åŒ–Appæ€§èƒ½ã€‚\næ€»ç»“ è™½ç„¶ç°åœ¨å¸‚é¢ä¸Šç¬¬ä¸‰æ–¹å¹³å°å·²ç»å¾ˆæˆç†Ÿï¼Œä½†æ˜¯å„å¤§äº’è”å…¬å¸éƒ½ä¼šè‡ªå·±å¼€å‘çº¿ä¸Šç›‘æ§ç³»ç»Ÿï¼Œè¿™æ ·ä¿è¯æ•°æ®å®‰å…¨ï¼ŒåŒæ—¶æ›´åŠ çµæ´»ã€‚å› ä¸ºç§»åŠ¨ç”¨æˆ·çš„ç‰¹ç‚¹ï¼Œåœ¨å¼€å‘æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œå¾ˆéš¾å®Œå…¨è¦†ç›–æ‰€æœ‰ç”¨æˆ·çš„å…¨éƒ¨åœºæ™¯ï¼Œæœ‰äº›é—®é¢˜ä¹Ÿåªä¼šåœ¨ç‰¹å®šç¯å¢ƒä¸‹æ‰å‘ç”Ÿï¼Œæ‰€ä»¥é€šè¿‡çº¿ä¸Šç›‘æ§å¹³å°ï¼Œé€šè¿‡æ—¥å¿—å›æç­‰æœºåˆ¶ï¼ŒåŠæ—¶è·å–ç‰¹å®šåœºæ™¯çš„ä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œç»“åˆæ•°æ®åˆ†æï¼Œèƒ½å¤ŸåŠæ—¶å‘ç°é—®é¢˜ï¼Œå¹¶åç»­ä¿®å¤ï¼Œæé«˜Appçš„ç¨³å®šæ€§ã€‚\nå…¨æ–‡æ€»ç»“ æœ¬æ–‡ä¸»è¦ä»å¼€å‘æµ‹è¯•å‘å¸ƒç­‰æµç¨‹æ¥ä»‹ç»äº†ä¸€ä¸ªAppç¨³å®šæ€§æŒ‡æ ‡åŠç›‘æµ‹æ–¹æ³•ï¼Œå¼€å‘é˜¶æ®µä¸»è¦é’ˆå¯¹ä¸€äº›æ¯”è¾ƒå…·ä½“çš„æŒ‡æ ‡ï¼Œé™æ€æ£€æŸ¥ä¸»è¦æ˜¯æ‰«æä»£ç æ½œåœ¨é—®é¢˜ï¼Œç„¶åé€šè¿‡æµ‹è¯•ä¿è¯AppåŠŸèƒ½çš„ç¨³å®šæ€§ï¼Œçº¿ä¸Šé™çº§ä¸»è¦æ˜¯åœ¨å°½é‡ä¸å‘ç‰ˆçš„æƒ…å†µä¸‹ï¼Œè¿›è¡Œè‡ªä¿®å¤ï¼Œé…åˆçº¿ä¸Šç›‘æ§ï¼Œä¿¡æ¯æ”¶é›†ï¼Œç”¨æˆ·è¡Œä¸ºè®°å½•ï¼Œæ–¹ä¾¿åç»­é—®é¢˜ä¿®å¤åŠä¼˜åŒ–ã€‚æœ¬æ–‡è§‚ç‚¹æ˜¯ä½œè€…ä»äº‹iOSå¼€å‘çš„ä¸€äº›ç»éªŒï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œè§‚ç‚¹ä¸åŒæ¬¢è¿è®¨è®ºã€‚\nå‚è€ƒï¼š å¾®ä¿¡mars çš„é«˜æ€§èƒ½æ—¥å¿—æ¨¡å— xlog åŸºäº CADisplayLink çš„ FPS æŒ‡ç¤ºå™¨è¯¦è§£ ä»Šæ—¥å¤´æ¡iOSå®¢æˆ·ç«¯å¯åŠ¨é€Ÿåº¦ä¼˜åŒ– å¾®ä¿¡è¯»ä¹¦ iOS æ€§èƒ½ä¼˜åŒ–æ€»ç»“ ç§»åŠ¨ç«¯ç›‘æ§ä½“ç³»ä¹‹æŠ€æœ¯åŸç†å‰–æ ç¾å›¢ç‚¹è¯„ç§»åŠ¨ç½‘ç»œä¼˜åŒ–å®è·µ iOS å¯åŠ¨è¿ç»­é—ªé€€ä¿æŠ¤æ–¹æ¡ˆ å¾®ä¿¡ SQLite æ•°æ®åº“ä¿®å¤å®è·µ\nä½œè€…ï¼šç¾å›¢ç‚¹è¯„ç‚¹é¤ é“¾æ¥ï¼šhttps://juejin.im/post/58ca0832a22b9d006418fe43 æ¥æºï¼šæ˜é‡‘ è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚\n"
},
{
	"uri": "https://leverkusen188.github.io/iosrelated/ios%E4%B8%8E%E5%A4%96%E8%AE%BE%E9%80%9A%E4%BF%A1/",
	"title": "iOS ä¸å¤–è®¾é€šä¿¡",
	"tags": [],
	"description": "",
	"content": "è“ç‰™é€šè®¯ PSï¼š _notifyCharacteristicIDï¼Œ_writeCharacteristicIDï¼Œ_externalCharacteristicID éƒ½æ˜¯è·Ÿç¡¬ä»¶çº¦å®šå¥½çš„å¯¹åº”æƒé™çš„Characteristicç‰¹å¾çš„uuid\nåŸºæœ¬æ¦‚å¿µ Peripheralã€Centralï¼šä¸­å¿ƒå’Œå¤–è®¾ï¼Œå‘èµ·è¿æ¥çš„æ˜¯ Centralï¼Œè¢«è¿æ¥çš„è®¾å¤‡ä¸º Peripheralï¼›å¤–è®¾è®¾å¤‡ä¼šä¸åœåœ°å‘å¤–å¹¿æ’­ä»¥å¯»æ±‚è¿æ¥ã€‚ åœ¨Mimoé‡Œï¼Œappçš„è§’è‰²æ˜¯ Centralï¼Œè€Œç›¸æœºæ˜¯ Peripheral\nService: æ¯ä¸ªservice æœ‰å”¯ä¸€çš„uuidï¼Œå¤šä¸ªå¤–è®¾å¯ä»¥å…±ç”¨ä¸€ä¸ªserviceï¼Œä¹Ÿå°±æ˜¯ æ‰«ææŒ‡å®šçš„uuidçš„serviceæ—¶ï¼Œä¼šè¿”å›æ‰€æœ‰ä½¿ç”¨äº†è¯¥serviceçš„ å¤–è®¾ï¼ˆPeripheralï¼‰ æ¯ä¸ªserviceä¼šæœ‰ä¸€ä¸ªæˆ–å¤šä¸ª Characteristicï¼ˆç‰¹å¾ï¼‰ï¼Œ\nCharacteristicï¼šç‰¹å¾ï¼Œä¹Ÿæ˜¯è®¾å¤‡ä¹‹é—´çš„æ•°æ®ä¼ è¾“é€šé“ï¼Œæ¯ä¸ªç‰¹å¾ä¹Ÿæœ‰å”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼ˆuuidï¼‰ã€‚åˆ†ä¸º writeï¼Œnotifyï¼Œ Writeç±»å‹ç”¨ä»¥ å¾€å¤–è®¾ä¸Šå‘é€æ•°æ®ã€‚\nå·¥ä½œæµç¨‹ï¼ˆä»¥Centralç«¯ä¸ºä¾‹ï¼‰ å¼€å§‹æ‰«æä½¿ç”¨æŒ‡å®š uuid serviceçš„Peripheral å¤–è®¾ //åˆ›å»º CBCentralManager _centralManager = [[CBCentralManager alloc] initWithDelegate:self queue:_bleWorkQueue options:options]; //æ‰«ææŒ‡å®šçš„å¤šä¸ªuuidçš„service [_centralManager scanForPeripheralsWithServices:_scanServices options:options]; æ‰«æåˆ°Peripheral ä¿¡æ¯åï¼Œå¼€å§‹è¿æ¥è¯¥å¤–è®¾ - (void)centralManager:(CBCentralManager *)central didDiscoverPeripheral:(CBPeripheral *)peripheral advertisementData:(NSDictionary\u0026lt;NSString *, id\u0026gt; *)advertisementData RSSI:(NSNumber *)RSSI { //å‘ç°å¤–è®¾åï¼Œå°è¯•è¿æ¥ [[DJIBLECentralManager defautManager] connectPeripheral:aPeripheral] } è¿æ¥åˆ°å¤–è®¾åï¼Œåœ¨è¯¥å¤–è®¾ä¸Šæ£€ç´¢ æŒ‡å®šçš„serviceï¼Œå¹¶ç›‘å¬ç›¸å…³å›è°ƒ - (void)centralManager:(CBCentralManager *)central didConnectPeripheral:(CBPeripheral *)peripheral { [peripheral setDelegate:self]; [peripheral discoverServices:@[_serviceUUID]]; } æ£€ç´¢åˆ°serviceä»¥åï¼Œå¼€å§‹åœ¨è¯¥serviceä¸Šæ£€ç´¢ Characteristic ç‰¹å¾ã€‚ - (void)peripheral:(CBPeripheral *)peripheral didDiscoverServices:(NSError *)error { for (CBService *aService in peripheral.services) { if ([aService.UUID isEqual:_serviceUUID]) { NSMutableArray *searchUUIDs = [NSMutableArray array]; if (_notifyCharacteristicID) { [searchUUIDs addObject:[CBUUID UUIDWithString:_notifyCharacteristicID]]; } if (_writeCharacteristicID) { [searchUUIDs addObject:[CBUUID UUIDWithString:_writeCharacteristicID]]; } if (_externalCharacteristicID) { [searchUUIDs addObject:[CBUUID UUIDWithString:_externalCharacteristicID]]; } [peripheral discoverCharacteristics:searchUUIDs forService:aService]; } } } æ£€ç´¢åˆ°Characteristic ç‰¹å¾ä»¥åï¼Œå°±å¯ä»¥ç”¨å¯¹åº”ç±»å‹çš„ç‰¹å¾æ¥åšç›¸å…³äº‹æƒ…äº†ï¼Œæ¯”å¦‚ç”¨writeç±»å‹ç‰¹å¾å¾€å¤–è®¾ä¸Šå†™å…¥æ•°æ® - (void)peripheral:(CBPeripheral *)peripheral didDiscoverCharacteristicsForService:(CBService *)service error:(NSError *)error { for (CBCharacteristic *aCharacteristic in service.characteristics) { if ([aCharacteristic.UUID isEqual:[CBUUID UUIDWithString:_writeCharacteristicID]]) { self.writeCharacteristic = aCharacteristic; } } //å¾€writeç±»å‹çš„ç‰¹å¾é€šé“ä¸Šå†™å…¥æ•°æ® [_peripheral writeValue:sendData forCharacteristic:_writeCharacteristic type:CBCharacteristicWriteWithoutResponse]; } æˆ–æ˜¯æ¥æ”¶æ¥è‡ªæŸä¸ª ç‰¹å¾é€šé“çš„æ•°æ®\n- (void)peripheral:(CBPeripheral *)peripheral didUpdateValueForCharacteristic:(CBCharacteristic *)characteristic error:(nullable NSError *)error { NSData * updatedValue = characteristic.value; } MFI è®¤è¯é€šè®¯ ä»€ä¹ˆæ˜¯MFI è‹¹æœ MFi è®¤è¯ï¼Œæ˜¯è‹¹æœå…¬å¸ï¼ˆApple Inc.ï¼‰å¯¹å…¶æˆæƒé…ä»¶å‚å•†ç”Ÿäº§çš„å¤–ç½®é…ä»¶çš„ä¸€ç§æ ‡è¯†ä½¿ç”¨è®¸å¯ï¼Œæ˜¯ Apple å…¬å¸ â€œMade for iOSâ€ çš„è‹±æ–‡ç¼©å†™ã€‚\nä¸ºä»€ä¹ˆè¦åš MFi è®¤è¯ iOS App è·Ÿå¤–è®¾çš„è¿æ¥æ–¹å¼æœ‰ç½‘ç»œã€EAP å’Œ BLEã€‚ åªæœ‰ç»è¿‡ MFi è®¤è¯çš„å¤–è®¾æ‰èƒ½ä½¿ç”¨ EAPï¼ˆExternal Accessory Protocolï¼‰ è·Ÿ App è¿›è¡Œé€šä¿¡ã€‚\nå› ä¸ºå¦‚æœé‡‡ç”¨ EAPï¼Œé‚£ä¹ˆå¯¹åº”çš„ App å°±å¿…é¡»é›†æˆè‹¹æœçš„ EA æ¡†æ¶ï¼ˆExternalAccessory.frameworkï¼‰\n"
},
{
	"uri": "https://leverkusen188.github.io/iosrelated/%E6%BA%90%E7%A0%81%E4%BA%8C%E8%BF%9B%E5%88%B6%E7%BC%96%E8%AF%91%E5%88%87%E6%8D%A2/",
	"title": "IOS å­å·¥ç¨‹ æºç å’ŒäºŒè¿›åˆ¶åº“ ç¼–è¯‘æ–¹å¼åˆ‡æ¢æ–¹æ¡ˆ",
	"tags": [],
	"description": "",
	"content": "https://www.jianshu.com/p/a6d0f37cdc27 è¿™ä¸ªä¸»è¦æ˜¯ç”¨ ç¯å¢ƒå˜é‡æ§åˆ¶ podspec é‡Œï¼Œæ˜¯ä½¿ç”¨æºç è¿˜æ˜¯ .a ã€‚æœ€ç»ˆ pod install æ¥è®©ä¸»å·¥ç¨‹åˆ‡æ¢å­æ¨¡å—çš„ æºç å’ŒäºŒè¿›åˆ¶ç¼–è¯‘æ–¹å¼ã€‚\nhttps://juejin.im/entry/5b5308c66fb9a04f932ff87e è¿™ä¸ªå¥½ä¸€ç‚¹ï¼Œéœ€è¦åˆ›å»ºç§æœ‰podï¼Œåœ¨podspecé‡Œé…ç½® subspecï¼›ç„¶åé€šè¿‡ä¿®æ”¹ ä¸»å·¥ç¨‹podfileï¼ŒæŒ‡å®šç§æœ‰podçš„ subspec æ¥åˆ‡æ¢ç¼–è¯‘æ–¹å¼ã€‚\nå…·ä½“å®æ–½ï¼š\nä¸ºéœ€è¦æä¾›åˆ‡æ¢åŠŸèƒ½çš„å·¥ç¨‹é…å¥½podspecï¼Œä½œä¸ºlocal podsæ¥ç®¡ç†ã€‚ pod lib create \u0026ldquo;podname\u0026rdquo;\nç¼–å†™ è¯¥å·¥ç¨‹çš„ build è„šæœ¬ï¼Œç”¨ä»¥å°†è¯¥å·¥ç¨‹çš„ framework / .a ä»¥åŠå¤´æ–‡ä»¶ç­‰è¾“å‡ºä¸ºäºŒè¿›åˆ¶ï¼Œä»¥ä¾›åˆ‡æ¢ç¼–è¯‘ç”¨ã€‚ #!/bin/sh #è¦buildçš„targetå TARGET_NAME=\u0026#39;BottomStatic\u0026#39; CONFIGURATION=\u0026#39;Debug\u0026#39; #${PROJECT_NAME} if [[ $1 ]] then TARGET_NAME=$1 fi UNIVERSAL_OUTPUT_FOLDER=\u0026#34;${SRCROOT}/${PROJECT_NAME}_Products/\u0026#34; UNIVERSAL_OUTPUT_FOLDER=\u0026#34;${TARGET_NAME}_Products/\u0026#34; BUILD_DIR=\u0026#34;Build/\u0026#34; BUILD_ROOT=\u0026#34;Output/\u0026#34; SRCROOT=\u0026#34;.\u0026#34; #åˆ›å»ºè¾“å‡ºç›®å½•ï¼Œå¹¶åˆ é™¤ä¹‹å‰çš„frameworkæ–‡ä»¶ mkdir -p \u0026#34;${UNIVERSAL_OUTPUT_FOLDER}\u0026#34; mkdir -p \u0026#34;${BUILD_DIR}\u0026#34; mkdir -p \u0026#34;${BUILD_ROOT}\u0026#34; rm -rf \u0026#34;${UNIVERSAL_OUTPUT_FOLDER}/${TARGET_NAME}.framework\u0026#34; #åˆ†åˆ«ç¼–è¯‘æ¨¡æ‹Ÿå™¨å’ŒçœŸæœºçš„Framework xcodebuild -target \u0026#34;${TARGET_NAME}\u0026#34; ONLY_ACTIVE_ARCH=NO -configuration ${CONFIGURATION} -sdk iphoneos BUILD_DIR=\u0026#34;${BUILD_DIR}\u0026#34; BUILD_ROOT=\u0026#34;${BUILD_ROOT}\u0026#34; clean build xcodebuild -target \u0026#34;${TARGET_NAME}\u0026#34; ONLY_ACTIVE_ARCH=NO -configuration ${CONFIGURATION} -sdk iphonesimulator BUILD_DIR=\u0026#34;${BUILD_DIR}\u0026#34; BUILD_ROOT=\u0026#34;${BUILD_ROOT}\u0026#34; clean build #æ‹·è´frameworkåˆ°univerç›®å½• cp -R \u0026#34;${BUILD_DIR}/${CONFIGURATION}-iphonesimulator/${TARGET_NAME}.framework\u0026#34; \u0026#34;${UNIVERSAL_OUTPUT_FOLDER}\u0026#34; #åˆå¹¶frameworkï¼Œè¾“å‡ºæœ€ç»ˆçš„frameworkåˆ°buildç›®å½• lipo -create -output \u0026#34;${UNIVERSAL_OUTPUT_FOLDER}/${TARGET_NAME}.framework/${TARGET_NAME}\u0026#34; \u0026#34;${BUILD_DIR}/${CONFIGURATION}-iphonesimulator/${TARGET_NAME}.framework/${TARGET_NAME}\u0026#34; \u0026#34;${BUILD_DIR}/${CONFIGURATION}-iphoneos/${TARGET_NAME}.framework/${TARGET_NAME}\u0026#34; #åˆ é™¤ç¼–è¯‘ä¹‹åç”Ÿæˆçš„æ— å…³çš„é…ç½®æ–‡ä»¶ dir_path=\u0026#34;${UNIVERSAL_OUTPUT_FOLDER}/${TARGET_NAME}.framework/\u0026#34; for file in ls $dir_path do if [[ ${file} =~ \u0026#34;.xcconfig\u0026#34; ]] then rm -f \u0026#34;${dir_path}/${file}\u0026#34; fi done #åˆ¤æ–­buildæ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨åˆ™åˆ é™¤ if [ -d \u0026#34;${SRCROOT}/build\u0026#34; ] then rm -rf \u0026#34;${SRCROOT}/build\u0026#34; fi rm -rf \u0026#34;${BUILD_DIR}/${CONFIGURATION}-iphonesimulator\u0026#34; \u0026#34;${BUILD_DIR}/${CONFIGURATION}-iphoneos\u0026#34; #æ‰“å¼€åˆå¹¶åçš„æ–‡ä»¶å¤¹ open \u0026#34;${UNIVERSAL_OUTPUT_FOLDER}\u0026#34; ç›´æ¥æ‰§è¡Œ . build.sh target_name å³å¯ã€‚\næ‰§è¡Œè„šæœ¬ï¼Œç¼–è¯‘å‡ºframeworkåï¼Œä¿®æ”¹ podspecæ–‡ä»¶ã€‚ #ç”¨ç¯å¢ƒå˜é‡æ§åˆ¶ç¼–è¯‘æ–¹å¼ if ENV[\u0026#39;BINARY\u0026#39;] s.ios.vendored_framework = \u0026#39;DJIMidWare_Products/*.framework\u0026#39; else s.source_files = \u0026#39;DJIMidWare/DJIMidWare/**/*\u0026#39;, \u0026#39;DJIMidWare/DJIMidWare/*\u0026#39;, end æœ€åä½¿ç”¨ç¯å¢ƒå˜é‡æ¨¡å¼æ¥ pod updateä¸€ä¸‹è¿™ä¸ªlocal pods å³å¯ã€‚ BINARY=1 pod update BottomStatic --no-repo-update æœ‰å‡ ç‚¹è¦æ³¨æ„ä¸€ä¸‹ï¼š\né’ˆå¯¹è¦åˆ‡æ¢ç¼–è¯‘æ¨¡å¼çš„å·¥ç¨‹ï¼Œ æ•´ä¸ªé¡¹ç›®é‡Œå…¶ä»–ä¾èµ–è¯¥å·¥ç¨‹çš„ å·¥ç¨‹ï¼Œä¹Ÿéœ€è¦é…ç½®podsæ¥linkå®ƒï¼Œè€Œä¸èƒ½é€šè¿‡project linkçš„æ¨¡å¼ã€‚\næºç ç¼–è¯‘æ–¹å¼æ—¶ï¼Œä¸»å·¥ç¨‹è·Ÿè¯¥å·¥ç¨‹åŒæ—¶å¼€å‘éƒ½æ˜¯æ²¡é—®é¢˜çš„ã€‚å¦‚æœåªæ˜¯ä¿®æ”¹äº†æºç æ–‡ä»¶ï¼Œç›´æ¥buildä¸»å·¥ç¨‹å³å¯ä½“ç°ä¿®æ”¹ï¼›ä½†å¦‚æœæ–°å¢äº†æ–‡ä»¶ï¼Œéœ€è¦ pod updateä¸€ä¸‹æ‰è¡Œ\n"
},
{
	"uri": "https://leverkusen188.github.io/iosrelated/%E7%BB%84%E4%BB%B6%E5%8C%96%E5%8A%A8%E6%80%81%E5%BA%93/",
	"title": "IOS ç»„ä»¶åŒ–-åŠ¨æ€åº“å®æˆ˜",
	"tags": [],
	"description": "",
	"content": "èµ·å› \nç†è®ºåŠŸåº•\nåŠ¨æ€åº“å’Œé™æ€åº“\nä»‹ç»\né™æ€åº“å’ŒåŠ¨æ€åº“çš„åŒºåˆ«\nä¸¾ä¸ªä¾‹å­ï¼Œ iOS é¡¹ç›®ä¸­ä½¿ç”¨ Embeded Framework\né™æ€åº“å’ŒåŠ¨æ€åº“å¦‚ä½•æ„å»ºå’ŒåŠ è½½\né™æ€åº“å’ŒåŠ¨æ€åº“ä¾èµ–å…³ç³»\nXcode é¡¹ç›®ç»“æ„\niOS ä¾èµ–ç®¡ç†äº‹å®ä¸Šçš„æ ‡å‡†\nè§£å†³é—®é¢˜\nåˆ¶ä½œåŠ¨æ€åº“\nå‰–æä¸‹åŠ¨æ€åº“ Framework å§\nå›è¿‡å¤´æ¥çœ‹ Embened Framework\nWhy Swift does not Support Staic Libraies\nCocoaPods ä½¿ç”¨ Use_framework!\nåŠ¨æ€åº“ Framework çš„æ–‡ä»¶ç»“æ„\næ›´æ„‰å¿«çš„å¯¼å…¥æ–‡ä»¶\nèµ„æºé—®é¢˜\nå‚è€ƒ\nèµ·å› \nå»å¹´ï¼Œå…¬å¸iOSç«¯ï¼Œä¹‹å‰ç”±äºæ‰€æœ‰çš„ä¸šåŠ¡ç«¯ä»£ç éƒ½æ˜¯æ··ä¹±ç®¡ç†ï¼Œé€ æˆå¼€å‘æœ‰å¾ˆå¤šç—›ç‚¹æ— æ³•å•æµ‹ï¼Œå›¢é˜Ÿæˆå‘˜æäº¤ä»£ç å†²çªæœºç‡å¤§ï¼ŒCIé…åˆæ•ˆæœå·®ï¼ŒåŠŸèƒ½æ€§ä»£ç å¤šç«¯æ— æ³•å¤ç”¨ï¼Œå•ä»“åº“ä»£ç é‡å¤§ï¼Œç¼–è¯‘æ—¶é—´é•¿ ç­‰ç­‰ç—›ç‚¹ï¼Œé¢†å¯¼å’Œç»„å†…å¤šæ¬¡æ²Ÿé€šå¼€å§‹ç€æ‰‹ç»„ä»¶åŒ–å¼€å‘ï¼Œå¸Œæœ›èƒ½æ”¹è¿›è¿™äº›å¼€å‘ä¸­çš„ç—›ç‚¹ï¼Œæˆç«‹ç»„ä»¶åŒ–å›¢é˜Ÿã€‚\nç»„ä»¶åŒ–çš„æ–¹æ¡ˆå¤§åŒå°å¼‚ï¼ŒåŸºç¡€æ€§ä»£ç å°è£…ç§æœ‰åº“ï¼Œä¸šåŠ¡ç»„ä»¶äº¤äº’äº¤ç”±ä¸­é—´ä»¶è´Ÿè´£ï¼Œé¡¹ç›®ä¾èµ–å·¥å…·ç”¨iOSé¡¹ç›®äº‹å®ä¸Šçš„æ ‡å‡†CocoaPods\nå‰æœŸçš„åŸºç¡€æ€§ç»„ä»¶æ‹†åˆ†éƒ½è¾ƒä¸ºé¡ºåˆ©ï¼Œä»ä¾èµ–æ ‘çš„å¶å­èŠ‚ç‚¹å¼€å‘æ˜¯æœ€åˆé€‚çš„æ–¹æ¡ˆã€‚\néšç€ç»„ä»¶æŠ½ç¦»çš„è¶Šæ¥è¶Šå¤šï¼Œç§æœ‰åº“çš„ä¾èµ–ä½“ç³»ä¹Ÿè¶Šæ¥è¶Šå¤æ‚ï¼Œæ…¢æ…¢è¿‡æ¸¡åˆ°äº†ä¸šåŠ¡ç»„ä»¶ã€‚ä¸šåŠ¡ç»„ä»¶ç”¨äº†Swiftçš„ç¬¬ä¸‰æ–¹ç»„ä»¶ï¼Œç”¨äº†Swiftåº“çš„åŒå­¦éƒ½çŸ¥é“å¿…é¡»åŠ ä¸Šuse_frameworks!ï¼Œè¿™ä¸ªæ ‡è®°æ˜¯è¯´Podç®¡ç†çš„ä¾èµ–å…¨éƒ¨ç¼–è¯‘ä¸ºåŠ¨æ€åº“ï¼Œç„¶åå‘¢æˆ‘ä»¬çš„å¾ˆå¤šç»„ä»¶åˆä¾èµ–äº†è¯¸å¦‚ç™¾åº¦åœ°å›¾ï¼Œå¾®ä¿¡åˆ†äº«ç­‰é™æ€åº“ï¼Œäºæ˜¯æˆ‘åœ¨æ‰§è¡Œ pod install æŠ¥äº†ä¸€ä¸ªæ²¡æœ‰ç¢°è§è¿‡çš„é”™è¯¯ã€‚\n1[!] The \u0026lsquo;Pods-LJA_Example\u0026rsquo;target has transitive dependencies that include static binaries:\nè¿™å°±å°´å°¬äº†ï¼Œäºæ˜¯ä¸€é˜µç–¯ç‹‚çš„æœç´¢google stackoverflowç­‰ï¼Œç„¶è€Œå¹¶æ²¡æœ‰ä»€ä¹ˆåµç”¨ï¼Œè€Œä¸”ä¸Šé¢å‚¬å¾—æ€¥ï¼Œæ ¹æœ¬æ²¡æ—¶é—´å¤„ç†è¿™äº›å°é—®é¢˜ ä¸šåŠ¡é‡æ„æ˜¯æœ€ä¸»è¦çš„ï¼Œä»¥è‡³äºæˆ‘ä»¬çš„ä¸šåŠ¡ç»„ä»¶æ²¡æœ‰åšåˆ°ç‹¬ç«‹ä»“åº“æ‹†åˆ†ã€‚\nç›´åˆ°æœ€è¿‘ç»ˆäºæ‰¾åˆ°äº†è§£å†³åŠæ³•:( ä¸»è¦æ˜¯è‡ªå·±çš„åŠŸåŠ›ä¸å¤Ÿæ·±åšï¼‰\nç†è®ºåŠŸåº•\nåŠ¨æ€åº“å’Œé™æ€åº“\nä»‹ç»\né¦–å…ˆé™æ€åº“å’ŒåŠ¨æ€åº“éƒ½æ˜¯ä»¥äºŒè¿›åˆ¶æä¾›ä»£ç å¤ç”¨çš„ä»£ç åº“\né™æ€åº“ å¸¸è§çš„æ˜¯ .a\nåŠ¨æ€åº“å¸¸è§çš„æ˜¯ .dll(windows)ï¼Œ.dylib(mac)ï¼Œso(linux)\nframework(in Apple): Framework æ˜¯Cocoa/Cocoa Touchç¨‹åºä¸­ä½¿ç”¨çš„ä¸€ç§èµ„æºæ‰“åŒ…æ–¹å¼ï¼Œå¯ä»¥å°†ä»£ç æ–‡ä»¶ã€å¤´æ–‡ä»¶ã€èµ„æºæ–‡ä»¶ã€è¯´æ˜æ–‡æ¡£ç­‰é›†ä¸­åœ¨ä¸€èµ·ï¼Œæ–¹ä¾¿å¼€å‘è€…ä½¿ç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬çš„ frameworkå…¶å®æ˜¯èµ„æºæ‰“åŒ…çš„æ–¹å¼ï¼Œå’Œé™æ€åº“åŠ¨æ€åº“çš„æœ¬è´¨æ˜¯æ²¡æœ‰å…³ç³»çš„\né™æ€åº“å’ŒåŠ¨æ€åº“çš„åŒºåˆ«\né™æ€åº“: é“¾æ¥æ—¶ä¼šè¢«å®Œæ•´çš„å¤åˆ¶åˆ°å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œæ‰€ä»¥å¦‚æœä¸¤ä¸ªç¨‹åºéƒ½ç”¨äº†æŸä¸ªé™æ€åº“ï¼Œé‚£ä¹ˆæ¯ä¸ªäºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶é‡Œé¢å…¶å®éƒ½å«æœ‰è¿™ä»½é™æ€åº“çš„ä»£ç \nåŠ¨æ€åº“: é“¾æ¥æ—¶ä¸å¤åˆ¶ï¼Œåœ¨ç¨‹åºå¯åŠ¨åç”¨dyldåŠ è½½ï¼Œç„¶åå†å†³è®®ç¬¦å·ï¼Œæ‰€ä»¥ç†è®ºä¸ŠåŠ¨æ€åº“åªç”¨å­˜åœ¨ä¸€ä»½ï¼Œå¥½å¤šä¸ªç¨‹åºéƒ½å¯ä»¥åŠ¨æ€é“¾æ¥åˆ°è¿™ä¸ªåŠ¨æ€åº“ä¸Šé¢ï¼Œè¾¾åˆ°äº†èŠ‚çœå†…å­˜(ä¸æ˜¯ç£ç›˜æ˜¯å†…å­˜ä¸­åªæœ‰ä¸€ä»½åŠ¨æ€åº“)ï¼Œè¿˜æœ‰å¦å¤–ä¸€ä¸ªå¥½å¤„ï¼Œç”±äºåŠ¨æ€åº“å¹¶ä¸ç»‘å®šåˆ°å¯æ‰§è¡Œç¨‹åºä¸Šï¼Œæ‰€ä»¥æˆ‘ä»¬æƒ³å‡çº§è¿™ä¸ªåŠ¨æ€åº“å°±å¾ˆå®¹æ˜“ï¼Œwindowså’Œlinuxä¸Šé¢ä¸€èˆ¬æ’ä»¶å’Œæ¨¡å—æœºåˆ¶éƒ½æ˜¯è¿™æ ·å®ç°çš„ã€‚\nButæˆ‘ä»¬çš„è‹¹æœçˆ¸çˆ¸åœ¨iOSå¹³å°ä¸Šè§„å®šä¸å…è®¸å­˜åœ¨åŠ¨æ€åº“ï¼Œå¹¶ä¸”æ‰€æœ‰çš„ IPA éƒ½éœ€è¦ç»è¿‡è‹¹æœçˆ¸çˆ¸çš„ç§é’¥åŠ å¯†åæ‰èƒ½ç”¨ï¼ŒåŸºæœ¬ä½ ç”¨äº†åŠ¨æ€åº“ä¹Ÿä¼šå› ä¸ºç­¾åä¸å¯¹æ— æ³•åŠ è½½ï¼Œ(è¶Šç‹±å’Œé APP store é™¤å¤–)ã€‚äºæ˜¯å°±æŠŠå¼€å‘è€…è‡ªå·±å¼€å‘åŠ¨æ€åº“ææ­»åœ¨å¹»æƒ³ä¸­ã€‚\nç›´åˆ°æœ‰ä¸€å¤©ï¼Œè‹¹æœçˆ¸çˆ¸çš„iOSå‡çº§åˆ°äº†8ï¼ŒiOSå‡ºç°äº†APP Extensionï¼Œswiftç¼–ç¨‹è¯­è¨€ä¹Ÿè¯ç”Ÿäº†ï¼Œç”±äºiOSä¸»APPéœ€è¦å’ŒExtensionå…±äº«ä»£ç ï¼ŒSwiftè¯­è¨€çš„æœºåˆ¶ä¹Ÿåªèƒ½æœ‰åŠ¨æ€åº“ï¼Œäºæ˜¯è‹¹æœçˆ¸çˆ¸å°´å°¬äº†ï¼Œä¸è¿‡è¿™éš¾ä¸å€’æˆ‘ä»¬çš„è‹¹æœçˆ¸çˆ¸ï¼Œæ¯•ç«Ÿæˆ‘æ˜¯çˆ¸çˆ¸ï¼Œè§„åˆ™æ˜¯æˆ‘æ¥å®šï¼Œæˆ‘æƒ³æ€æ ·å°±æ€æ ·ï¼Œäºæ˜¯æå‡ºäº†ä¸€ä¸ªæ¦‚å¿µEmbedded Frameworkï¼Œè¿™ç§åŠ¨æ€åº“å…è®¸APPå’ŒAPP Extensionå…±äº«ä»£ç ï¼Œä½†æ˜¯è¿™ä»½åŠ¨æ€åº“çš„ç”Ÿå‘½è¢«é™å®šåœ¨ä¸€ä¸ªAPPè¿›ç¨‹å†…ã€‚ç®€å•ç‚¹å¯ä»¥ç†è§£ä¸ºè¢«é˜‰å‰²çš„åŠ¨æ€åº“ã€‚\nä¸¾ä¸ªä¾‹å­ï¼ŒiOSé¡¹ç›®ä¸­ä½¿ç”¨Embeded Framework\nå¦‚æœä½ æŠŠæŸä¸ªè‡ªå·±å¼€å‘çš„åŠ¨æ€åº“(ç³»ç»Ÿçš„ä¸ç®—ï¼Œæ¯•ç«Ÿè‹¹æœæ˜¯çˆ¸çˆ¸)æ”¾åœ¨äº†Linked Frameworks and Librariesé‡Œé¢ï¼Œç¨‹åºä¸€å¯åŠ¨å°±ä¼šæŠ¥Reason: Image Not Foundï¼Œä½ åªèƒ½æŠŠå®ƒæ”¾åœ¨Embeded Binariesé‡Œé¢æ‰èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œ\nçœ‹å›¾:\né™æ€åº“å’ŒåŠ¨æ€åº“å¦‚ä½•æ„å»ºå’ŒåŠ è½½\nç®€å•ç‚¹ï¼Œè¯´è¯çš„æ–¹å¼ç®€å•ç‚¹~~\nä¸Šé¢çš„ä»‹ç»è²Œä¼¼æœ‰ç‚¹æŠ½è±¡å•Šå¥—ç”¨åœ¨ç¾å›¢æŠ€æœ¯åˆ†äº«å¤§ä¼šä¸Šçš„è¯å°±æ˜¯:\né™æ€åº“: ä¸€å †ç›®æ ‡æ–‡ä»¶(.o/.obj)çš„æ‰“åŒ…ä½“(å¹¶éäºŒè¿›åˆ¶æ–‡ä»¶)\nåŠ¨æ€åº“: ä¸€ä¸ªæ²¡æœ‰mainå‡½æ•°çš„å¯æ‰§è¡Œæ–‡ä»¶\nè¿™é‡Œæˆ‘ä»¬æ¥å¤ä¹ ä¸‹Cè¯­è¨€çš„åŸºæœ¬åŠŸï¼Œç¼–è¯‘å’Œé“¾æ¥\nç¼–è¯‘: å°†æˆ‘ä»¬çš„æºä»£ç æ–‡ä»¶ç¼–è¯‘ä¸ºç›®æ ‡æ–‡ä»¶\né“¾æ¥: å°†æˆ‘ä»¬çš„å„ç§ç›®æ ‡æ–‡ä»¶åŠ ä¸Šä¸€äº›ç¬¬ä¸‰æ–¹åº“ï¼Œå’Œç³»ç»Ÿåº“é“¾æ¥ä¸ºå¯æ‰§è¡Œæ–‡ä»¶ã€‚\nç”±äºæŸä¸ªç›®æ ‡æ–‡ä»¶çš„ç¬¦å·(å¯ä»¥ç†è§£ä¸ºå˜é‡ï¼Œå‡½æ•°ç­‰)å¯èƒ½æ¥è‡ªå…¶ä»–ç›®æ ‡æ–‡ä»¶ï¼Œå…¶å®é“¾æ¥è¿™ä¸€æ­¥æœ€ä¸»è¦çš„æ“ä½œå°±æ˜¯å†³è®®ç¬¦å·çš„åœ°å€ã€‚\nè‹¥ç¬¦å·æ¥è‡ªé™æ€åº“(æœ¬è´¨å°±æ˜¯.o çš„é›†åˆåŒ…)æˆ– .oï¼Œå°†å…¶çº³å…¥é“¾æ¥äº§ç‰©ï¼Œå¹¶ç¡®å®šç¬¦å·åœ°å€\nè‹¥ç¬¦å·æ¥è‡ªåŠ¨æ€åº“ï¼Œæ‰“ä¸ªæ ‡è®°ï¼Œç­‰å¯åŠ¨çš„æ—¶å€™å†è¯´\u0026mdash;äº¤ç»™dyldå»åŠ è½½å’Œé“¾æ¥ç¬¦å·\näºæ˜¯é“¾æ¥åŠ è£…è½½å°±æœ‰äº†ä¸åŒçš„æƒ…å†µ\nLoad è£…è½½ï¼šå°†åº“æ–‡ä»¶è½½å…¥å†…å­˜\nStatic Loadingï¼šå¯åŠ¨æ—¶ Dynamic Loadingï¼šå¯åŠ¨åï¼ˆä½¿ç”¨æ—¶ï¼‰ Link é“¾æ¥ï¼šå†³è®®ç¬¦å·åœ°å€\nStatic Linkingï¼šæ„å»ºï¼ˆé“¾æ¥ï¼‰æ—¶ Dynamic Linkingï¼šè¿è¡Œæ—¶ï¼ˆå¯åŠ¨æ—¶æˆ–ä½¿ç”¨æ—¶ï¼‰ ç„¶åç»„åˆèµ·æ¥å°±æ˜¯ 2 * 2 = 4 äº†\nStatic Loading + Static Linking\nStatic Loading + Dynamic Linking\nDynamic Loading + Dynamic Linking\nDynamic Loading + Static Linking\nç¬¬ä¸€ç§æ˜¯çº¯é™æ€åº“ç›¸å…³äº†\nç¬¬äºŒç§å°±æ˜¯é™æ€åŠ è½½(å¯åŠ¨æ—¶)ï¼ŒåŠ¨æ€é“¾æ¥ï¼Œé“¾æ¥æ—¶ï¼ŒåŠ¨æ€åº“å‚ä¸é“¾æ¥ï¼Œä½†æ˜¯è¿™æ—¶å€™åªæ˜¯ç»™ç¬¦å·æ‰“äº†æ ‡è®°å‘Šè¯‰æˆ‘è¿™ä¸ªç¬¦å·æ¥è‡ªä¸åŠ¨æ€åº“ï¼Œç¨‹åºå¯åŠ¨æ—¶ï¼ŒiOSæˆ–è€…Mac OSæ“ä½œç³»ç»Ÿçš„dyldè‡ªåŠ¨load + linkã€‚\næ—¢ç„¶å…¨éƒ¨éƒ½æ˜¯è‡ªåŠ¨çš„ã€‚é‚£ä¹ˆç¬¦å·çš„è°ƒç”¨æ–¹å®Œå…¨ä¸çŸ¥é“ä½ åˆ°åº•æ˜¯æºç è¿˜æ˜¯é™æ€åº“ï¼ŒåŠ¨æ€åº“ ã€‚\nç¬¬ä¸‰ç§æ”¶åˆ°è°ƒç”¨dlopen + performSelectoré€šå¸¸iOSçš„APPä¸é€‚ç”¨è¿™é‡Œä¸è®¨è®º\nç¬¬å››ç§ï¼Œæ²¡è§è¿‡ï¼Œä¸ªäººä¹Ÿä¸æ˜¯ç‰¹åˆ«æ‡‚\næœ‰éœ€æ±‚è¯·å‚çœ‹æ–‡åçš„ç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»ä¸€ä¹¦\né™æ€åº“å’ŒåŠ¨æ€åº“ä¾èµ–å…³ç³»\næ—¢ç„¶æœ‰ 2 ç§åº“ï¼Œé‚£ä¹ˆä¾èµ–å…³ç³»åˆæ˜¯ 2 * 2 å–½\nlibA.a dependency libB.a\nUIKit.dylib dependency Foundation.dylib\nlibA.a dependency Foundation.dylib\nMyXX.dylib dependency libA.a\nç¬¬ä¸€ç§ é™æ€åº“äº’ç›¸ä¾èµ–ï¼Œè¿™ç§æƒ…å†µéå¸¸å¸¸è§ï¼Œåˆ¶ä½œé™æ€åº“çš„æ—¶å€™åªéœ€è¦æœ‰è¢«ä¾èµ–çš„é™æ€åº“å¤´æ–‡ä»¶åœ¨å°±èƒ½ç¼–è¯‘å‡ºæ¥ã€‚ä½†æ˜¯è¿™å°±æ„å‘³è€…ä½ è¦æ”¶åˆ°å‘Šè¯‰ä½¿ç”¨è€…ä½ çš„ä¾èµ–å…³ç³»\nå¹¸è¿çš„æ˜¯CocoaPodå°±æ˜¯è¿™æ ·åšçš„\nç¬¬äºŒç§åŠ¨æ€åº“ä¾èµ–åŠ¨æ€åº“ï¼Œä¸¤ä¸ªåŠ¨æ€åº“æ˜¯ç›¸äº’éš”ç¦»çš„å…·æœ‰éš”ç¦»æ€§ï¼Œä½†æ˜¯åˆ¶ä½œçš„é™æ€åº“çš„æ—¶å€™éœ€è¦è¢«ä¾èµ–åŠ¨æ€åº“å‚ä¸é“¾æ¥ï¼Œä½†æ˜¯å…·ä½“çš„ç¬¦å·å†³è®®äº¤ç»™dyldæ¥åšã€‚\nç¬¬ä¸‰ç§ï¼Œé™æ€åº“ä¾èµ–åŠ¨æ€åº“ï¼Œä¹Ÿå¾ˆå¸¸è§ï¼Œé™æ€åº“åˆ¶ä½œçš„æ—¶å€™ä¹Ÿéœ€è¦åŠ¨æ€åº“å‚ä¸é“¾æ¥ï¼Œä½†æ˜¯ç¬¦å·çš„å†³è®®äº¤ç»™dyldæ¥åšã€‚\nç¬¬å››ç§ï¼ŒåŠ¨æ€åº“ä¾èµ–é™æ€åº“ï¼Œè¿™ç§æƒ…å†µå°±æœ‰ç‚¹ç‰¹æ®Šäº†ã€‚é¦–å…ˆæˆ‘ä»¬è®¾æƒ³åŠ¨æ€åº“ç¼–è¯‘çš„æ—¶å€™éœ€è¦é™æ€åº“å‚ä¸ç¼–è¯‘ï¼Œä½†æ˜¯é™æ€åº“äº¤ç”±dyldæ¥åšç¬¦å·å†³è®®ï¼Œbutè¿™å’Œæˆ‘ä»¬å‰é¢è¯´çš„å°±çŸ›ç›¾äº†å•Šã€‚é™æ€åº“æœ¬è´¨æ˜¯ä¸€å †.o çš„æ‰“åŒ…ä½“ï¼Œé¦–å…ˆå¹¶ä¸æ˜¯äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå†è€…ä½ æ— æ³•ä¿è¯ä¸»ç¨‹åºæŠŠé™æ€åº“å‚ä¸é“¾æ¥å…±åŒç”ŸæˆäºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ã€‚è¿™å°±å°´å°¬äº†ã€‚\næ€ä¹ˆåŠï¼Ÿ\nç›®å‰çš„ç¼–è¯‘å™¨çš„è§£å†³åŠæ³•æ˜¯ï¼Œé¦–å…ˆæˆ‘æ— æ³•ä¿è¯ä¸»ç¨‹åºæ˜¯å¦åŒ…å«é™æ€åº“ï¼Œå†è€…é™æ€åº“ä¹Ÿæ— æ³•è¢«dyldåŠ è½½ï¼Œé‚£ä¹ˆæˆ‘ç›´æ¥æŠŠä½ é™æ€åº“çš„.o å·è¿‡æ¥ï¼Œå…±åŒç»„æˆä¸€ä¸ªæ–°çš„äºŒè¿›åˆ¶ã€‚ä¹Ÿè¢«ç§°åšå¸é™„æ€§\né‚£ä¹ˆæˆ‘æœ‰å¤šä»½åŠ¨æ€åº“éƒ½ä¾èµ–åŒæ ·çš„é™æ€åº“ï¼Œè¿™å°±å°´å°¬äº†ï¼Œæ¯ä¸ªåŠ¨æ€åº“ä¸ºäº†ä¿è¯è‡ªå·±çš„æ­£ç¡®æ€§ä¼šæŠŠé™æ€åº“å¸é™„è¿›æ¥ã€‚ç„¶åä¸¤ä¸ªåº“åŒ…å«äº†åŒæ ·çš„é™æ€åº“ï¼Œäºæ˜¯é—®é¢˜å°±å‡ºç°äº†ã€‚ çœ‹åˆ°è¿™é‡Œæƒ³å¿…å‰é¢å‡ºç°çš„é”™è¯¯ä½ å·²ç»èƒ½çŒœå‡ºæ¥äº†æŠŠ~_~\nåé¢å†è¯¦ç»†è§£é‡Š\nå…ˆæ¥ä¸ªæ€»ç»“\nå¯æ‰§æ–‡ä»¶ï¼ˆä¸»ç¨‹åºæˆ–è€…åŠ¨æ€åº“ï¼‰åœ¨æ„å»ºçš„é“¾æ¥é˜¶æ®µ\né‡åˆ°é™æ€åº“ï¼Œå¸é™„è¿›æ¥\né‡åˆ°åŠ¨æ€åº“ï¼Œæ‰“æ ‡è®°ï¼Œå½¼æ­¤ä¿æŒç‹¬\nXcode é¡¹ç›®ç»“æ„\ntargetï¼šå¯¹äºä¸€ä¸ªäº§ç‰©(app,.a ,.framework)\nprojectï¼šä¸€ä¸ªé¡¹ç›®åŒ…å«å¤šä¸ª target\nworkspace: ä¸€ä¸ªåŒ…å«å¤šä¸ª target\nschema: æŒ‡å®šäº†ä¸€ä¸ªäº§ç‰©æ˜¯æŒ‰ç…§ä½•ç§çš„ä¾èµ–å…³ç³»ï¼Œç¼–è¯‘-é“¾æ¥åˆ°æœ€ç»ˆçš„ä¸€ä¸ªäº§ç‰©\niOS ä¾èµ–ç®¡ç†äº‹å®ä¸Šçš„æ ‡å‡†\nè¿™ä¹ˆå¤šå¹´ï¼ŒAppleçš„åšå®¢å’Œæ–‡æ¡£ä¹Ÿå°±å‘Šè¯‰äº†æˆ‘ä»¬ä»€ä¹ˆæ˜¯é™æ€åº“ä»€ä¹ˆæ˜¯åŠ¨æ€åº“ï¼Œå¦‚ä½•åˆ¶ä½œç­‰ã€‚ä½†æ˜¯å¹¶æ²¡æœ‰ç»™æˆ‘ä»¬æä¾›ä¸€ç³»åˆ—çš„ä¾èµ–ç®¡ç†å·¥å…·ã€‚æ‰€ä»¥CocoaPodsæˆäº†äº‹å®ä¸Šçš„æ ‡å‡†ã€‚\né€šå¸¸CocoaPodsç®¡ç†çš„å·¥ç¨‹ç»“æ„å¦‚ä¸‹:\né‚£ä¹ˆå½“æˆ‘ä»¬æŒ‰ä¸‹CMD + Bçš„æ—¶å€™ï¼Œæ•´ä¸ªé¡¹ç›®æŒ‰ç…§å…ˆç¼–è¯‘è¢«ä¾èµ–Podï¼Œç„¶åä¾èµ–å…¶ä»–Podçš„Podä¹Ÿè¢«æ„å»ºå‡ºæ¥ï¼Œæœ€ç»ˆæ‰€æœ‰çš„ç»„ä»¶è¢«ç¼–è¯‘ä¸ºä¸€ä¸ªlib-Pods-XXXAPP.aè¢«æ·»åŠ è¿›é¡¹ç›®è¿›å»ã€‚èµ„æºé€šè¿‡CocoaPodsæä¾›çš„è„šæœ¬ä¹Ÿä¸€å¹¶è¢«å¤åˆ¶è¿›å»ã€‚æƒ³äº†è§£CocoaPodsåšäº†ä»€ä¹ˆçš„è¯»è€…å¯ä»¥å‚çœ‹åé¢çš„é“¾æ¥\nè§£å†³é—®é¢˜\nè¿™ä¹ˆå¤šç†è®ºåŠŸåº•çš„å»ºç«‹ï¼Œç›¸ä¿¡æˆ‘ä»¬å·²ç»èƒ½åˆ†æå‡ºæ¥ä¹‹å‰pod installçš„åŸå› äº†ã€‚å°±æ˜¯ç”¨äº†use_frameworké‚£ä¹ˆæˆ‘ä»¬çš„æ‰€æœ‰Podéƒ½ä¼šä»¥åŠ¨æ€åº“(Embeded Framework)çš„å½¢å¼å»æ„å»ºï¼Œäºæ˜¯é‚£äº›éå¼€æºçš„åº“(å¦‚ç™¾åº¦åœ°å›¾ï¼Œå¾®ä¿¡åˆ†äº«)å¦‚æœè¢«å¤šä¸ªPodä¾èµ–(ç»„ä»¶åŒ–å¼€å‘ä¸­å¤ªå¸¸è§äº†)äºæ˜¯è¢«å¸é™„åˆ°åŠ¨æ€åº“é‡Œé¢ï¼Œæ‰€ä»¥CocoaPodç›´æ¥å°±ä¸è®©æˆ‘ä»¬installæˆåŠŸã€‚å› ä¸ºä½ ç°åœ¨çš„ä¾èµ–ç®¡ç†å°±æ˜¯é”™è¯¯çš„ã€‚\nåœ¨å¬å–ç¾å›¢å¶æ¨‰è€å¸ˆåˆ†äº«çš„æ—¶å€™ ä»–ä»¬çš„å‡ºå‘ç‚¹æ˜¯å› ä¸ºè¦ç»•è¿‡è‹¹æœçˆ¸çˆ¸åœ¨iOS9ä»¥ä¸‹å¯¹__text æ®µ60Mçš„é™åˆ¶ä½¿ç”¨äº†åŠ¨æ€åº“æ–¹æ¡ˆï¼Œæˆ‘ä»¬æ˜¯å› ä¸ºæŸäº›swiftåº“å¿…é¡»è¦ç”¨åˆ°(å†å²é—ç•™åŸå› )åŠ¨æ€åº“ã€‚ç¾å›¢çš„åšæ³•æ˜¯æ‘˜é™¤ä¾èµ–å…³ç³»ï¼Œè‡ªå®šä¹‰CocoaPods(å¼€æºçš„æœ¬æ¥å°±æ˜¯ç”¨ç€ä¸çˆ½æˆ‘å°±æ”¹)ã€‚ä½†æ˜¯æˆ‘æ˜¯ä¸ªå°èœé¸¡å•Šã€‚æˆ‘ä¹Ÿä¸ä¼š ruby(ä»¥åä¼šå­¦çš„)ï¼Œä½†æ˜¯å¶æ¨‰è€å¸ˆç»™æˆ‘æäº†åˆ«çš„ideaã€‚å‰é¢æˆ‘ä»¬çŸ¥é“ åŠ¨æ€åº“å’ŒåŠ¨æ€åº“æ˜¯éš”ç¦»æ€§ï¼ŒåŠ¨æ€åº“ä¾èµ–é™æ€åº“å…·æœ‰å¸é™„æ€§ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªåŠ¨æ€åº“æŠŠç™¾åº¦åœ°å›¾è¿™ç§é™æ€åº“å¸é™„è¿›æ¥ã€‚å¯¹å¤–æ•´ä½“å‘ˆç°çš„æ˜¯åŠ¨æ€åº“ç‰¹æ€§ã€‚å…¶ä»–çš„ç»„ä»¶ä¾èµ–æˆ‘ä»¬è‡ªå®šä¹‰çš„åŠ¨æ€åº“ï¼Œç”±äºéš”ç¦»æ€§çš„å­˜åœ¨ï¼Œä¸ä¼šå‡ºç°é—®é¢˜ã€‚\nåˆ¶ä½œåŠ¨æ€åº“\n1 åˆ›å»ºåŠ¨æ€åº“é¡¹ç›®è¿™é‡Œä»¥ wx ä¸¾ä¾‹\n2 æŒ‰ç…§å¾®ä¿¡çš„å®˜æ–¹æ–‡æ¡£ã€‚æ·»åŠ ä¾èµ–åº“(æˆ‘æ˜¯å› ä¸ºpod installå·¨æ…¢æ‰€ä»¥æˆ‘ç›´æ¥æ‹½è¿›æ¥äº†)\n3 å°†wxçš„PublicHeaderæš´éœ²å‡ºæ¥ï¼Œæ³¨æ„ç”±äºæˆ‘å¹¶æ²¡æœ‰ä½¿ç”¨åˆ°wxç›¸å…³APIæ‰€ä»¥é“¾æ¥å™¨å¸®æˆ‘ä»¬é“¾æ¥åŠ¨æ€åº“çš„æ—¶å€™å¯èƒ½å¹¶ä¸ä¼šæŠŠwxé™æ€åº“å¸é™„è¿›æ¥ã€‚æˆ‘ä»¬æ‰‹åŠ¨åœ¨build Settingçš„other link flagsåŠ ä¸Š-all_loadæ ‡è®°\n4.åœ¨Schemaé‡Œé¢è·³è½¬ç¼–è¯‘é…ç½®ä¸ºReleaseï¼Œå¹¶ä¸”é€‰æ‹©æ‰€æœ‰çš„CPUæ¶æ„\n5 ç„¶åé€‰æ‹©æ¨¡æ‹Ÿå™¨æˆ–è€… Generic iOS Device è¿è¡Œç¼–è¯‘å°±ä¼šç”Ÿæˆå¯¹åº”ç‰ˆæœ¬çš„ Framework äº†ã€‚\n6.ä½†æ˜¯ä¸ºäº†ä¿è¯å¼€å‘è€…ä½¿ç”¨çš„æ—¶å€™æ˜¯çœŸæœºæ¨¡æ‹Ÿå™¨éƒ½èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œæˆ‘ä»¬éœ€è¦åˆå¹¶ä¸åŒæ¶æ„\nè¿™é‡Œåœ¨Build Phasesé‡Œæ·»åŠ ä»¥ä¸‹è„šæœ¬ï¼ŒçœŸæœºå’Œæ¨¡æ‹Ÿå™¨éƒ½Buildä¸€éä¹‹åå°±ä¼šåœ¨å·¥ç¨‹ç›®å½•ä¸‹ç”ŸæˆProductsæ–‡ä»¶å¤¹ï¼Œ\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\nif[ \u0026ldquo;${ACTION}\u0026quot;= \u0026ldquo;build\u0026rdquo;]\nthen\nINSTALL_DIR=${SRCROOT}/Products/${PROJECT_NAME}.framework\nDEVICE_DIR=${BUILD_ROOT}/${CONFIGURATION}-iphoneos/${PROJECT_NAME}.framework\nSIMULATOR_DIR=${BUILD_ROOT}/${CONFIGURATION}-iphonesimulator/${PROJECT_NAME}.framework\nif[ -d \u0026ldquo;${INSTALL_DIR}\u0026rdquo;]\nthen\nrm -rf \u0026ldquo;${INSTALL_DIR}\u0026rdquo;\nfi\nmkdir -p \u0026ldquo;${INSTALL_DIR}\u0026rdquo;\ncp -R \u0026ldquo;${DEVICE_DIR}/\u0026rdquo;\u0026quot;${INSTALL_DIR}/\u0026rdquo;\n#ditto \u0026ldquo;${DEVICE_DIR}/Headers\u0026rdquo; \u0026ldquo;${INSTALL_DIR}/Headers\u0026rdquo;\nlipo -create \u0026ldquo;${DEVICE_DIR}/${PROJECT_NAME}\u0026rdquo;\u0026quot;${SIMULATOR_DIR}/${PROJECT_NAME}\u0026quot;-output \u0026ldquo;${INSTALL_DIR}/${PROJECT_NAME}\u0026rdquo;\nopen \u0026ldquo;${DEVICE_DIR}\u0026rdquo;\nopen \u0026ldquo;${SRCROOT}/Products\u0026rdquo;\nfi\näºæ˜¯æˆ‘ä»¬æœ‰äº†æˆ‘ä»¬è‡ªå·±çš„ç§æœ‰åŠ¨æ€åº“LJWXSDKï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥éªŒè¯æˆ‘ä»¬ä¹‹å‰çš„é—®é¢˜\né¦–å…ˆæŒ‡å®šä¸€ä¸ªLJWXSDK.podspecè¿™é‡Œæˆ‘ç›´æ¥ä¼ åˆ°äº†æˆ‘çš„Githubä¸Šé¢\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\nBe sure to run `pod lib lint LJPod.podspec\u0026rsquo; to ensure this is a valid spec before submitting. Any lines starting with a # are optional, but their use is encouraged To learn more about a Podspec seehttp://guides.cocoapods.org/syntax/podspec.html Pod:: Spec.newdo|s|\ns.name = \u0026lsquo;LJWXSDK\u0026rsquo;\ns.version = \u0026lsquo;0.1.0\u0026rsquo;\ns.summary = \u0026lsquo;A short description of LJWXSDK.\u0026rsquo;\ns.description = \u0026lt; \u0026lsquo;MIT\u0026rsquo;, : file =\u0026gt; \u0026lsquo;LICENSE\u0026rsquo;}\ns.author = { \u0026lsquo;ValiantCat\u0026rsquo;=\u0026gt; \u0026lsquo;519224747@qq.com\u0026rsquo;}\ns.source = { : http =\u0026gt; \u0026lsquo;http://onk2m6gtu.bkt.clouddn.com/LJWXSDK.framework.zip'}\ns.ios.deployment_target = \u0026lsquo;8.0\u0026rsquo;\ns.default_subspec = \u0026lsquo;zip\u0026rsquo;\ns.subspec \u0026lsquo;zip\u0026rsquo;do|zip|\nputs '-------------------------------------------------------------------' puts 'Notice: LJWXSDK is zip now' puts '-------------------------------------------------------------------' zip.ios.vendored_frameworks = '*.framework' end\nend\næ³¨æ„ä¸Šé¢æˆ‘æ˜¯æŠŠäºŒè¿›åˆ¶å‹ç¼©ä¸¢è¿›äº†ä¸ƒç‰›çš„ oss æ–‡ä»¶å­˜å‚¨ã€‚æ¯•ç«Ÿå…è´¹è¿˜å¿«ã€‚\nç„¶åé€šè¿‡ pod lib create åˆ›å»ºäº†ä¸€ä¸ª pod ç”¨æ¥éªŒè¯ä¹‹å‰æˆ‘ä»¬çš„ä¼ é€’æ€§ä¾èµ–é—®é¢˜ï¼Œ\næ–‡ä»¶å¤¹ç»“æ„å¦‚ä¸‹\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n80\n81\n82\n83\n84\n85\n86\n87\n88\n89\n90\n91\n92\n93\n94\n95\n96\n97\n98\n99\n100\n101\n102\n.\nâ”œâ”€â”€ Example\nâ”‚ â”œâ”€â”€ LJA\nâ”‚ â”‚ â”œâ”€â”€ Base.lproj\nâ”‚ â”‚ â”‚ â”œâ”€â”€ LaunchScreen.storyboard\nâ”‚ â”‚ â”‚ â””â”€â”€ Main.storyboard\nâ”‚ â”‚ â”œâ”€â”€ Images.xcassets\nâ”‚ â”‚ â”‚ â””â”€â”€ AppIcon.appiconset\nâ”‚ â”‚ â”‚ â””â”€â”€ Contents.json\nâ”‚ â”‚ â”œâ”€â”€ LJA-Info.plist\nâ”‚ â”‚ â”œâ”€â”€ LJA-Prefix.pch\nâ”‚ â”‚ â”œâ”€â”€ LJAppDelegate.h\nâ”‚ â”‚ â”œâ”€â”€ LJAppDelegate.m\nâ”‚ â”‚ â”œâ”€â”€ LJViewController.h\nâ”‚ â”‚ â”œâ”€â”€ LJViewController.m\nâ”‚ â”‚ â”œâ”€â”€ en.lproj\nâ”‚ â”‚ â”‚ â””â”€â”€ InfoPlist.strings\nâ”‚ â”‚ â””â”€â”€ main.m\nâ”‚ â”œâ”€â”€ LJA.xcodeproj\nâ”‚ â”œâ”€â”€ LJA.xcworkspace\nâ”‚ â”œâ”€â”€ Podfile\nâ”‚ â”œâ”€â”€ Podfile.lock\nâ”‚ â”œâ”€â”€ Pods\nâ”‚ â”‚ â”œâ”€â”€ Headers\nâ”‚ â”‚ â”œâ”€â”€ LJWXSDK\nâ”‚ â”‚ â”‚ â””â”€â”€ LJWXSDK.framework\nâ”‚ â”‚ â”‚ â”œâ”€â”€ Headers\nâ”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ LJWXSDK.h\nâ”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ WXApi.h\nâ”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ WXApiObject.h\nâ”‚ â”‚ â”‚ â”‚ â””â”€â”€ WechatAuthSDK.h\nâ”‚ â”‚ â”‚ â”œâ”€â”€ Info.plist\nâ”‚ â”‚ â”‚ â”œâ”€â”€ LJWXSDK\nâ”‚ â”‚ â”‚ â”œâ”€â”€ Modules\nâ”‚ â”‚ â”‚ â”‚ â””â”€â”€ module.modulemap\nâ”‚ â”‚ â”‚ â”œâ”€â”€ _CodeSignature\nâ”‚ â”‚ â”‚ â”‚ â””â”€â”€ CodeResources\nâ”‚ â”‚ â”‚ â””â”€â”€ read_me.txt\nâ”‚ â”‚ â”œâ”€â”€ Local\\ Podspecs\nâ”‚ â”‚ â”‚ â”œâ”€â”€ LJA.podspec.json\nâ”‚ â”‚ â”‚ â”œâ”€â”€ LJB.podspec.json\nâ”‚ â”‚ â”‚ â””â”€â”€ LJWXSDK.podspec.json\nâ”‚ â”‚ â”œâ”€â”€ Manifest.lock\nâ”‚ â”‚ â”œâ”€â”€ Pods.xcodeproj\nâ”‚ â”‚ â”‚ â”œâ”€â”€ project.pbxproj\nâ”‚ â”‚ â”‚ â”œâ”€â”€ project.xcworkspace\nâ”‚ â”‚ â”œâ”€â”€ Target\\ Support\\ Files\nâ”‚ â”‚ â”‚ â”œâ”€â”€ LJA\nâ”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ Info.plist\nâ”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ LJA-dummy.m\nâ”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ LJA-prefix.pch\nâ”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ LJA-umbrella.h\nâ”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ LJA.modulemap\nâ”‚ â”‚ â”‚ â”‚ â””â”€â”€ LJA.xcconfig\nâ”‚ â”‚ â”‚ â”œâ”€â”€ LJB\nâ”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ Info.plist\nâ”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ LJB-dummy.m\nâ”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ LJB-prefix.pch\nâ”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ LJB-umbrella.h\nâ”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ LJB.modulemap\nâ”‚ â”‚ â”‚ â”‚ â””â”€â”€ LJB.xcconfig\nâ”‚ â”‚ â”‚ â”œâ”€â”€ Pods-LJA_Example\nâ”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ Info.plist\nâ”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ Pods-LJA_Example-acknowledgements.markdown\nâ”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ Pods-LJA_Example-acknowledgements.plist\nâ”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ Pods-LJA_Example-dummy.m\nâ”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ Pods-LJA_Example-frameworks.sh\nâ”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ Pods-LJA_Example-resources.sh\nâ”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ Pods-LJA_Example-umbrella.h\nâ”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ Pods-LJA_Example.debug.xcconfig\nâ”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ Pods-LJA_Example.modulemap\nâ”‚ â”‚ â”‚ â”‚ â””â”€â”€ Pods-LJA_Example.release.xcconfig\nâ”‚ â”‚ â”‚ â””â”€â”€ Pods-LJA_Tests\nâ”‚ â”‚ â”‚ â”œâ”€â”€ Info.plist\nâ”‚ â”‚ â”‚ â”œâ”€â”€ Pods-LJA_Tests-acknowledgements.markdown\nâ”‚ â”‚ â”‚ â”œâ”€â”€ Pods-LJA_Tests-acknowledgements.plist\nâ”‚ â”‚ â”‚ â”œâ”€â”€ Pods-LJA_Tests-dummy.m\nâ”‚ â”‚ â”‚ â”œâ”€â”€ Pods-LJA_Tests-frameworks.sh\nâ”‚ â”‚ â”‚ â”œâ”€â”€ Pods-LJA_Tests-resources.sh\nâ”‚ â”‚ â”‚ â”œâ”€â”€ Pods-LJA_Tests-umbrella.h\nâ”‚ â”‚ â”‚ â”œâ”€â”€ Pods-LJA_Tests.debug.xcconfig\nâ”‚ â”‚ â”‚ â”œâ”€â”€ Pods-LJA_Tests.modulemap\nâ”‚ â”‚ â”‚ â””â”€â”€ Pods-LJA_Tests.release.xcconfig\nâ”‚ â”‚ â””â”€â”€ libWeChatSDK\nâ”‚ â”‚ â”œâ”€â”€ README.md\nâ”‚ â”‚ â”œâ”€â”€ WXApi.h\nâ”‚ â”‚ â”œâ”€â”€ WXApiObject.h\nâ”‚ â”‚ â”œâ”€â”€ WechatAuthSDK.h\nâ”‚ â”‚ â””â”€â”€ libWeChatSDK.a\nâ”œâ”€â”€ LICENSE\nâ”œâ”€â”€ LJA\nâ”‚ â”œâ”€â”€ Assets\nâ”‚ â””â”€â”€ Classes\nâ”‚ â””â”€â”€ LJA.m\nâ”œâ”€â”€ LJA.podspec\nâ”œâ”€â”€ LJB\nâ”‚ â”œâ”€â”€ Assets\nâ”‚ â””â”€â”€ Classes\nâ”‚ â””â”€â”€ LJB.m\nâ”œâ”€â”€ LJB.podspec\nâ”œâ”€â”€ README.md\nâ””â”€â”€ _Pods.xcodeproj -\u0026gt; Example/Pods/Pods.xcodeproj\næµ‹è¯•å·¥ç¨‹æˆ‘ä¹Ÿä¸¢åœ¨7ç‰›ä¸Šé¢ã€‚ä¸‹è½½æµ‹è¯•å³å¯\nç¼–è¯‘è¿è¡Œã€‚å®Œç¾ã€‚æˆ‘ä»¬åˆå¯ä»¥æ„‰å¿«çš„å’Œswiftç¬¬ä¸‰æ–¹åº“é…åˆä½¿ç”¨ã€‚\nå¾ˆå¤šäººå¯èƒ½ä¼šé—® è¯¸å¦‚ç™¾åº¦åœ°å›¾ å¾®ä¿¡è¿™ç§sdkä¸ºä»€ä¹ˆå®˜æ–¹ä¸æ”¯æŒåŠ¨æ€åº“ç‰ˆ(æ‰€è¯´çš„éƒ½æ˜¯embeded Framework)ï¼ŒçŒœæµ‹æ˜¯ä¸ºäº†å…¼å®¹æ›´ä½iOS7ç‰ˆæœ¬å§\nå¾ˆå¤šäººä¼šè§‰å¾—éº»çƒ¦çš„è¦æ­»ã€‚é¦–å…ˆæ¯ä¸ªå…¬å¸å¤šå¤šå°‘å°‘éƒ½æœ‰å†å²åŒ…è¢±ï¼Œéº»çƒ¦ä¹Ÿè¦åšï¼Œå†è€…è¿™æ˜¯ä¸€æ¬¡å¯¹åŸºæœ¬åŠŸçš„è¡¥å……ï¼Œå³ä¾¿ä½ ä»¬æ²¡æœ‰ç”¨åˆ°ï¼Œä½†æ˜¯ä¸ºäº†å­¦ä¹ ï¼Œè¿™ç¯‡æ•™ç¨‹æ‰€åšçš„ä¹Ÿå€¼å¾—ä½ å°è¯•ä¸€æ¬¡ã€‚\nå‰–æä¸‹åŠ¨æ€åº“ Framework å§\nä¸Šè¿°è§£å†³äº†æˆ‘ä»¬ä¸€å¼€å§‹é‡åˆ°çš„é—®é¢˜ã€‚butæ—¢ç„¶åŠ¨æ€åº“å’Œé™æ€åº“å‹æ ¹å°±ä¸ä¸€å›äº‹ï¼Œæ‰€ä»¥é‡Œé¢è¿˜æ˜¯æœ‰å¾ˆå¤šç»†èŠ‚å€¼å¾—æˆ‘ä»¬å»äº†è§£çš„ã€‚\nå›è¿‡å¤´æ¥çœ‹ Embened Framework\né¦–å…ˆæˆ‘ä»¬ä¹‹å‰è®°å¾—å¦‚æœä¸€ä¸ªåŠ¨æ€åº“åŠ åœ¨LinkedFrameworksand Libraiesç¨‹åºå¯åŠ¨å°±ä¼šæŠ¥ImageNotFoundï¼Œå¦‚æœæ”¾åœ¨EmbededBinariesé‡Œé¢å°±å¯ä»¥ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ã€‚æˆ‘ä»¬æ‹¿MacoViewæ¥çœ‹ä¸‹ä¸¤ç§æƒ…å†µä¸‹å¯æ‰§è¡Œæ–‡ä»¶çš„ç»†èŠ‚\nå…¶ä¸­@rpth è¿™ä¸ªè·¯å¾„è¡¨ç¤ºçš„ä½ç½®å¯ä»¥æŸ¥çœ‹Xcodeä¸­çš„é“¾æ¥è·¯å¾„é—®é¢˜\nè¿™æ ·æˆ‘ä»¬å°±çŸ¥é“äº†å…¶å®åŠ åœ¨EmbededBinariesé‡Œé¢çš„ä¸œè¥¿å…¶å®ä¼šè¢«å¤åˆ¶ä¸€ä»½åˆ°xx.appé‡Œé¢ï¼Œæ‰€ä»¥è¿™ä¸ªåå­—èµ·å¾—è¿˜æ˜¯ä¸é”™çš„ç›´è¯‘å°±æ˜¯åµŒå…¥çš„æ¡†æ¶\nWhy Swift does not Support Staic Libraies\né€ æˆè¿™ä¸ªçš„ä¸»è¦åŸå› æ˜¯Swiftçš„è¿è¡Œæ—¶åº“(ä¸ç­‰åŒäºOCçš„runtimeæ¦‚å¿µ)ï¼Œç”±äºSwiftçš„ABIä¸ç¨³å®šï¼Œé™æ€åº“ä¼šå¯¼è‡´æœ€ç»ˆçš„ç›®æ ‡ç¨‹åºä¸­åŒ…å«é‡å¤çš„è¿è¡Œåº“ï¼Œç›¸å…³å¯ä»¥çœ‹ä¸‹æœ€åçš„å‚è€ƒæ–‡ç« SwiftInFlux#static-librariesã€‚ç­‰åˆ°æˆ‘ä»¬çš„SwiftABIç¨³å®šä¹‹åï¼Œæˆ‘ä»¬çš„é™æ€åº“æ”¯æŒå¯èƒ½å°±åˆä¼šå‡ºç°äº†ã€‚å½“ç„¶ä¹Ÿå¯èƒ½ä¸å‡ºSwiftä¼´éšè¯ç”Ÿçš„SPM(Swiftï¼ŒPackage Manager)ï¼Œå¯èƒ½æœ‰æ›´å¥½çš„å®˜æ–¹çš„åŒ…ä¾èµ–ç®¡ç†å·¥å…·ã€‚è®©æˆ‘ä»¬æœŸå¾…å§ã€‚\nCocoaPodsä½¿ç”¨Use_framework!\næ—¢ç„¶åŠ äº†Swiftçš„ç¬¬ä¸‰æ–¹åº“ä¹‹åå°±éœ€è¦åœ¨Podfileé‡Œé¢åŠ ä¸Šuse_framework! é‚£ä¹ˆCocoaPodså°±ä¼šå¸®æˆ‘ä»¬ç”ŸæˆåŠ¨æ€åº“ï¼Œä½†æ˜¯å¥‡æ€ªçš„æ˜¯ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰åœ¨ä¸»å·¥ç¨‹çš„embeded binariesçœ‹åˆ°è¿™ä¸ªåŠ¨æ€åº“ï¼Œè¿™åˆæ˜¯ä»€ä¹ˆé¬¼ã€‚å…¶å®æ˜¯CocoaPodsä½¿ç”¨è„šæœ¬å¸®æˆ‘ä»¬åŠ è¿›å»äº†ã€‚è„šæœ¬ä½ç½®åœ¨ä¸»å·¥ç¨‹çš„build Phaseä¸‹çš„Emded Pods frameworks\n1\u0026quot;${SRCROOT}/Pods/Target Support Files/Pods-LJA_Example/Pods-LJA_Example-frameworks.sh\u0026quot;\nåŠ¨æ€åº“Frameworkçš„æ–‡ä»¶ç»“æ„\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n.\nâ”œâ”€â”€ Headers\nâ”‚ â”œâ”€â”€ LJWXSDK.h\nâ”‚ â”œâ”€â”€ WXApi.h\nâ”‚ â”œâ”€â”€ WXApiObject.h\nâ”‚ â””â”€â”€ WechatAuthSDK.h\nâ”œâ”€â”€ Info.plist\nâ”œâ”€â”€ LJWXSDK\nâ”œâ”€â”€ Modules\nâ”‚ â””â”€â”€ module.modulemap\nâ””â”€â”€ _CodeSignature\nâ””â”€â”€ CodeResources Headers ä¸€èˆ¬æ˜¯å¤´æ–‡ä»¶ã€‚éprivateé‡Œé¢çš„å¤´æ–‡ä»¶éƒ½ä¼šåœ¨é‡Œé¢\ninfo.plist é…ç½®ä¿¡æ¯ï¼Œä¸æ·±ç©¶\nModules è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œæœ‰ä¸ªmodule.modulemapæ–‡ä»¶ï¼Œåé¢åœ¨è®²è§£\näºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè¿™å°±æ˜¯ä¸Šé¢æåˆ°çš„ä¸å¸¦mainçš„äºŒè¿›åˆ¶æ–‡ä»¶äº†ï¼Œ.o çš„æ‰“åŒ…ä½“\n_codeSignatureç­¾åæ–‡ä»¶ (è‹¹æœçˆ¸çˆ¸çš„çº¦æŸ)\nmoreèµ„æºæ–‡ä»¶ã€‚è¿™é‡Œæš‚æ—¶æ²¡ç”¨åˆ°ï¼Œæ‰€ä»¥æ²¡æœ‰ ï¼Œä½†æ˜¯è¿™ä¸ªä¹Ÿæ˜¯ä¸ªå¤§å‘\næ›´æ„‰å¿«çš„å¯¼å…¥æ–‡ä»¶\n@classï¼Œ@protocolï¼šä¸è¯´äº†å°±æ˜¯å£°æ˜ä¸€ä¸ªç±»ï¼Œå¹¶ä¸å¯¼å…¥ã€‚\n#import \u0026lt;\u0026gt;, #import\u0026quot;\u0026quot;ï¼šæ˜¯åŠ å¼ºç‰ˆçš„#include\u0026lt;\u0026gt;ï¼Œ#include\u0026quot;\u0026quot; é˜²æ­¢é‡å¤å¯¼å…¥çš„ã€‚\n#import\u0026lt;\u0026gt; : é€šè¿‡build settingé‡Œé¢ä¸­çš„header Search Pathé‡Œé¢å»æ‰¾\n#import\u0026quot;\u0026quot; : ç¬¬ä¸€æ­¥å…ˆæœç´¢user Header search Pathå†æœç´¢ header search Path ã€‚æ‰€ä»¥å¯¹æˆ‘ä»¬çš„frameworkæ¥è¯´ï¼ŒCocoaPodå¸®æˆ‘ä»¬åŠ åˆ°äº†Header search Pathç›®å‰2ç§å¯¼å…¥æ–¹å¼éƒ½æ˜¯å¯ä»¥æ”¯æŒçš„ã€‚\nä¸Šé¢çš„å¯¼å…¥æ–¹å¼éƒ½å¸¦äº† æŸä¸ªframeworkçš„è·¯å¾„\u0026quot;xx/xx.h\u0026quot; ï¼Œæˆ‘ä»¬åœ¨å¼€å‘è‡ªå·±ä¸»å·¥ç¨‹çš„æ—¶å€™ä¼šå‘ç°æˆ‘ä»¬å¯¼å…¥ä¸»å·¥ç¨‹å…¶ä»–ç±»æ˜¯ä¸éœ€è¦å¯¼å…¥å‰ç¼€çš„ã€‚ è¿™åˆæ˜¯æ€ä¹ˆå›äº‹ã€‚\nçœ‹ä¸‹é¢çš„é…ç½®\nç›®å‰çš„é…ç½®æ˜¯non-recursiveã€‚å¦‚æœæŠŠnonå»æ‰æ„æ€å°±æ˜¯æˆ‘å¯ä»¥é€’å½’çš„å»æŸ¥æ‰¾æŸäº›frameworkä¸‹é¢çš„å¤´æ–‡ä»¶äº†ã€‚ ä½†æ˜¯Xcodeçš„æ•ˆç‡è‚¯å®šå°±ä¼šæœ‰å½±å“ã€‚\nè¿˜æ˜¯ä¸å»ºè®®ä¿®æ”¹çš„å¥½ã€‚\nå¤§å®¶éƒ½çŸ¥é“iOS7ä¹‹åå¤šäº†@importï¼Œè¿™åˆæ˜¯ä»€ä¹ˆé¬¼ã€‚\nç®€å•ç†è§£è¿™ä¸ªæ–¹å¼å«åšModuleå¯¼å…¥ï¼Œå¥½å¤„å°±æ˜¯ä½¿ç”¨äº†@import ä¹‹åä¸éœ€è¦åœ¨project settingæ‰‹åŠ¨æ·»åŠ frameworkï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åŠ è½½ï¼Œè€Œä¸”æ•ˆç‡æ›´é«˜ã€‚\næœ€ä¸»è¦çš„æ˜¯swiftä¹Ÿåªèƒ½è¿™æ ·ç”¨ã€‚\nå¯¼å…¥çš„æ—¶å€™ç³»ç»Ÿä¼šæŸ¥æ‰¾å¦‚æœæœ‰æ¨¡å—åŒåçš„æ–‡ä»¶å°±ä¼šå¯¼å…¥è¿™ä¸ªæ–‡ä»¶ã€‚å¦‚æœæ²¡æœ‰CocoaPodså¸®æˆ‘ä»¬ç”Ÿæˆä¸€ä¸ªmodule-umbrela.hlæ–‡ä»¶ï¼Œç„¶åå°±æ˜¯å¯¼å…¥çš„è¿™ä¸ªæ–‡ä»¶ã€‚\nå›è¿‡å¤´æ¥çœ‹æˆ‘ä»¬çš„frameworkçš„ç»“æ„ é‡Œé¢æœ‰ä¸ªModulesæ–‡ä»¶å¤¹ï¼Œé‡Œé¢æœ‰ä¸ªæ–‡ä»¶module.modulemap\n1\n2\n3\n4\n5\n6\nframework module LJWXSDK {\numbrella header \u0026ldquo;LJWXSDK.h\u0026rdquo;\nexport *\nmodule * { export * }\n}\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°å…¶å®è¢«æš´éœ²çš„headerå°±æ˜¯è¿™ä¸ªæ–‡ä»¶ï¼Œä¹‹å‰æˆ‘åœ¨æŒ‰ç…§#import \u0026ldquo;/\u0026ldquo;çš„æ—¶å€™æœ‰ä¸ªè­¦å‘Š\nè€Œä¸”æŒ‰ç…§@import å¯¼å…¥çš„ä¸œè¥¿å‘ç°æ²¡æœ‰å¯¼å…¥å¯ç”¨çš„å¤´æ–‡ä»¶å°±æ˜¯å› ä¸ºå¹¶æ²¡æœ‰åœ¨umbrella headerçš„å¤´æ–‡ä»¶ä¸­åŠ å…¥å…¶ä»–å¤´æ–‡ä»¶ã€‚\nåŠ å…¥ä¹‹åæˆ‘ä»¬å°±å¯ä»¥å®Œç¾çš„ä½¿ç”¨@import ï¼Œå¹¶ä¸”#import\u0026rdquo;/\u0026rdquo; ä¹Ÿä¸ä¼šæŠ¥warning\næ›´å¤šå…³äºumbrella Header å‚çœ‹æ–‡åå‚è€ƒ\nèµ„æºé—®é¢˜\né¦–å…ˆæˆ‘ä»¬æ¥çœ‹å¸¸è§çš„èµ„æºæ–‡ä»¶: ä¸»è¦åˆ†ä¸ºå›¾ç‰‡å’Œå…¶ä»–ç±»èµ„æºé‚£ä¹ˆåŠ è½½å›¾ç‰‡å’ŒåŠ è½½å…¶ä»–èµ„æºéƒ½æ˜¯æ€ä¹ˆåšçš„ï¼Ÿ\n1: [UIimage imageNamed:]\n2: [NSbundle bundleForclass[XXX class]]\nå…¶å®æ–¹å¼1å»æœ¬è´¨å°±æ˜¯å»mainBundleå»æ‹¿èµ„æºï¼Œæ–¹å¼2ä»XXXæ‰€åœ¨çš„æ¡†æ¶é‡Œé¢å»æ‹¿ã€‚\nå‰é¢ä¹Ÿè¯´é“frameworkåªæ˜¯èµ„æºçš„æ‰“åŒ…æ–¹å¼ï¼Œæœ¬è´¨ä¸Šæ˜¯æœ‰ä¸¤ç§çš„ã€‚\næˆ‘ä»¬è¿™ä¸ªframeworkå¦‚æœæœ¬è´¨æ˜¯é™æ€åº“ï¼Œé‚£ä¹ˆæ— éœ€æ”¹å˜ä½¿ç”¨æ–¹å¼ï¼Œèµ„æºæœ€ç»ˆéƒ½ä¼šæ‰“åŒ…åˆ°Main Bundleé‡Œé¢\nå¦‚æœæˆ‘ä»¬è¿™ä¸ªframeworkæœ¬è´¨æ˜¯åŠ¨æ€åº“ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„èµ„æºå°±å‘ç”Ÿäº†å˜åŒ–ï¼Œèµ„æºå°±ä¼šè¢«å­˜æ”¾åœ¨frameworké‡Œé¢ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿[NSbundle bundleForclass[XXX class]]ã€‚éœ€è¦æ³¨æ„çš„æ˜¯å¾ˆå¤šäººä¸ºäº†ç®€å•ï¼Œä¸‹æ„\nçš„ä½¿ç”¨self classä¼ é€’ï¼Œä½†æ˜¯æœ‰å¯èƒ½è¿™ä¸ªselfå®ä¾‹ä¸åœ¨èµ„æºæ‰€å±çš„frameworkã€‚æ‰€ä»¥ä¼šå‡ºç°èµ„æºåŠ è½½å¤±è´¥ã€‚ä¸€å®šè¦è°¨æ…ä½¿ç”¨ã€‚\næŠ„è‡ªï¼š http://www.cocoachina.com/ios/20170427/19136.html\nå‚è€ƒ\nç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»ï¼Œé“¾æ¥ï¼Œè£…è½½ å’Œåº“\niOS é‡Œçš„åŠ¨æ€åº“å’Œé™æ€åº“\nSystems Programming: What is the exact difference between Dynamic loading and dynamic linking?\nCocoaPods éƒ½åšäº†ä»€ä¹ˆï¼Ÿ\nDynamic Linking of Imported Functions in Mach-O\nOS é‡Œçš„å¯¼å…¥å¤´æ–‡ä»¶\niOS - Umbrella Header åœ¨ framework ä¸­çš„åº”ç”¨\nSwiftInFlux#static-libraries\niOS é‡Œçš„å¯¼å…¥å¤´æ–‡ä»¶\niOS - Umbrella Header åœ¨ framework ä¸­çš„åº”ç”¨\n@import vs #import - iOS 7\n"
},
{
	"uri": "https://leverkusen188.github.io/iosrelated/",
	"title": "IOSRelateds",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "https://leverkusen188.github.io/javascript/",
	"title": "Javascripts",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "https://leverkusen188.github.io/reactnative/js_native_ui/",
	"title": "JS ä½¿ç”¨åŸç”ŸUIç»„ä»¶",
	"tags": [],
	"description": "",
	"content": "ä½¿ç”¨åŸç”ŸUIView Nativeç«¯ï¼š é¦–å…ˆåˆ›å»ºä¸€ä¸ªRCTViewManagerçš„å­ç±»ã€‚ @interface NativeView : RCTViewManager @end\næ·»åŠ RCT_EXPORT_MODULE()å®æ ‡è®°å¯¼å‡ºçš„æ¨¡å—åç§° RCT_EXPORT_MODULE(MyNativeView)\nå®ç°-(UIView *)viewæ–¹æ³•ï¼Œè¿”å›å¯¹åº”çš„nativeè§†å›¾ç»™JS\n- (UITextField*)view { UITextField * field = [UITextField new]; field.text = @\u0026#34;BBBB\u0026#34;; field.textColor = [UIColor blueColor]; field.textAlignment = UITextAlignmentCenter; return field; } JSç«¯ï¼š ç”¨ä¸€ä¸ªjsæ–‡ä»¶æ¥å¯¼å…¥æ¨¡å—ã€‚ NativeView.js import { requireNativeComponent } from \u0026#39;react-native\u0026#39;; // requireNativeComponent è‡ªåŠ¨æŠŠ\u0026#39;RNTMap\u0026#39;è§£æä¸º\u0026#39;RNTMapManager\u0026#39; export default requireNativeComponent(\u0026#39;MyNativeView\u0026#39;); ç„¶ååœ¨å…¶ä»–jsé‡Œä½¿ç”¨å³å¯ã€‚ import NativeView from \u0026#39;./MyNativeView\u0026#39; \u0026lt;NativeView style={{width:150, height:50, backgroundColor:\u0026#34;green\u0026#34;}}\u0026gt; \u0026lt;/NativeView\u0026gt; å°è£…åŸç”Ÿå±æ€§ å¯ä»¥å°†view æ–¹æ³•é‡Œè¿”å›çš„è§†å›¾çš„å±æ€§å°è£…å¹¶ä¾›ç»™JSç«¯æ¥è®¾ç½®.\nä»¥ä¸Šé¢ä»£ç ä¸ºä¾‹ï¼ŒNative ç«¯ï¼š\nRCT_EXPORT_VIEW_PROPERTY(userInteractionEnabled, BOOL) JSç«¯ï¼š\n\u0026lt;NativeView style={{width:150, height:50, backgroundColor:\u0026#34;green\u0026#34;}} userInteractionEnabled={false}\u0026gt; \u0026lt;/NativeView\u0026gt; é‚£ä¹ˆviewè¿”å›çš„UITextField å°†æ— æ³•æ¥æ”¶ç‚¹å‡»ç­‰æ“ä½œã€‚\nJS ä¿®æ”¹åŸç”Ÿç»„ä»¶å±æ€§ ä¸ºåŸç”Ÿç»„ä»¶å£°æ˜ä¸€ä¸ªå±æ€§ï¼Œåœ¨è®¾ç½®æ—¶ï¼ŒNativeå±æ€§å‡½æ•°å¯ä»¥è·å–åˆ° JSç«¯è®¾ç½®çš„å€¼ã€‚ RCT_CUSTOM_VIEW_PROPERTY(frameTest, CGRect, UITextField) { CGRect rect = [RCTConvert CGRect:json]; //jsonæ˜¯jsç«¯ä¼ é€’çš„æ•°æ®ç»“æ„çš„å­—å…¸åŒ–æ•°æ® view.frame = rect; //viewå°±æ˜¯è®¾ç½®å±æ€§çš„é‚£ä¸ªè§†å›¾å¯¹è±¡ } åœ¨JSç«¯ï¼Œç›´æ¥è®¾ç½® frameTest å±æ€§å³å¯ï¼Œæ³¨æ„ä¿æŒä¼ é€’çš„ç»“æ„ä½“çš„key ä¸ CGRectçš„ä¸€è‡´ NativeView.propTypes = { frameTest: PropTypes.shape({ x: PropTypes.number, y: PropTypes.number, width: PropTypes.number, height: PropTypes.number, }), }; \u0026lt;NativeView style={{width:150, height:50, backgroundColor:\u0026#34;green\u0026#34;}} userInteractionEnabled={true} frameTest={{x:1.1, y:2.3, width:50, height:40}}\u0026gt; \u0026lt;/NativeView\u0026gt; åŸç”Ÿç»„ä»¶å‘é€ç»™JSçš„äº‹ä»¶ åœ¨jsä½¿ç”¨Nativeç»„ä»¶æ—¶ï¼Œå¦‚æœnativeç»„ä»¶å‘ç”Ÿäº†äº‹ä»¶ï¼ˆæ¯”å¦‚ç‚¹å‡»ï¼Œæ»šåŠ¨ï¼‰ï¼Œéœ€è¦å°†äº‹ä»¶å’Œæ•°æ®ä¼ é€’ç»™ JSç«¯ã€‚ å¯ä»¥è‡ªå®šä¹‰äº‹ä»¶ï¼Œæ•°æ®åˆ™æ˜¯ä¸€ä¸ª Dictionaryã€‚\nNativeç«¯ï¼š\nNativeç«¯çš„view è¿”å›çš„è§†å›¾ç±»å‹ï¼Œéœ€è¦ç»™å®ƒæ–°å¢ä¸€ä¸ª RCTBubblingEventBlock çš„propertyã€‚ ä»¥ä¸Šé¢çš„ UITextField ä¸ºä¾‹ @interface MyUITextField : UITextField @property (nonatomic, copy) RCTBubblingEventBlock onHello; @end @implementation MyUITextField @end ç„¶åç»™ NativeView æ–°å¢ä¸€ä¸ªå¯¼å‡ºå±æ€§ã€‚ï¼ˆå¿…é¡»ä¸ä¸Šé¢é‚£ä¸ªåŒåï¼‰ RCT_EXPORT_VIEW_PROPERTY(onHello, RCTBubblingEventBlock) åœ¨å‘ç”Ÿäº‹ä»¶æ—¶ï¼Œè°ƒç”¨è¿”å›è§†å›¾çš„ onHelloï¼Œå¹¶å°†ç›¸å…³æ•°æ®ä¸€å¹¶ç»™å› - (void)tapped:(UITapGestureRecognizer*)gesture { dispatch_async(dispatch_get_main_queue(), ^{ MyUITextField * field = gesture.view; if (field.onHello) { field.onHello(@{@\u0026#34;first\u0026#34;:@(12)}); } }); } JS ç«¯ï¼š\nç¼–å†™ onHelloçš„å“åº”å‡½æ•°å³å¯ \u0026lt;NativeView style={{width:250, height:50, backgroundColor:\u0026#34;black\u0026#34;}} userInteractionEnabled={true} onHello={ (event) =\u0026gt; { console.log(\u0026#39;event data=\u0026#39;+event.nativeEvent.first) //PSï¼šäº‹ä»¶ä¼ é€’è¿‡æ¥çš„eventå‚æ•°ä¸ä¼šç›´æ¥æ˜¯Nativeçš„Dictionaryï¼Œå®ƒçš„ nativeEvent å±æ€§æ‰æ˜¯ }} \u0026gt; \u0026lt;/NativeView\u0026gt; å¤§PSï¼šäº‹ä»¶åå¿…é¡»ä»¥ â€œonâ€ å¼€å¤´ï¼Œå¦åˆ™jsæ— æ³•å“åº”ï¼\nä»£ç å®ä¾‹ï¼š NativeView.h NativeView.m NativeView.js Modal.js\n"
},
{
	"uri": "https://leverkusen188.github.io/python/",
	"title": "Pythons",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "https://leverkusen188.github.io/python/python%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/",
	"title": "pythonåŸºç¡€ç¯å¢ƒæ­å»º",
	"tags": [],
	"description": "",
	"content": "è™šæ‹Ÿç¯å¢ƒï¼š ä¸»è¦æ˜¯åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿçš„ python ç¯å¢ƒï¼Œç›¸å…³çš„ç¬¬ä¸‰æ–¹packageä¼šç‹¬ç«‹æ”¾åœ¨æŒ‡å®šçš„ç›®å½•ä¸‹ã€‚ ä½†pythonç›¸å…³çš„binæ–‡ä»¶ï¼Œéƒ½æ˜¯ä»æ­£å¼ç¯å¢ƒ æ™¯è±¡è¿‡æ¥çš„ã€‚ å‚è€ƒï¼šhttps://packaging.python.org/guides/installing-using-pip-and-virtual-environments/\nå®‰è£…è™šæ‹Ÿç¯å¢ƒï¼š On macOS and Linux:\npython3 -m pip install --user virtualenv On Windows:\npy -m pip install --user virtualenv åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼š On macOS and Linux:\npython3 -m venv env_name On Windows:\npy -m venv env_name è¿›å…¥/é€€å‡º è™šæ‹Ÿç¯å¢ƒï¼š On macOS and Linux:\nsource env/bin/activate On Windows:\n.\\env\\Scripts\\activate é€€å‡º deactivate å…³äºpython packageå®‰è£…åŒ… å‚è€ƒï¼š https://python-packaging.readthedocs.io/en/latest/minimal.html\npackageæ–‡ä»¶ç»“æ„å’Œç»„æˆ ç”¨pip installå®‰è£…çš„åŒ…ï¼Œåœ¨æ ¹ç›®å½•ä¸‹éœ€è¦æœ‰ä¸ª setup.py æ–‡ä»¶ï¼Œé‡Œé¢é…ç½®äº† è¿™ä¸ªpackageçš„ç›¸å…³ä¿¡æ¯ï¼ˆç±»ä¼¼cocoapodsçš„ podspec æ–‡ä»¶ï¼‰ from setuptools import setup setup(name=\u0026#39;requests1\u0026#39;, version=\u0026#39;0.1\u0026#39;, description=\u0026#39;The funniest joke in the world\u0026#39;, url=\u0026#39;http://github.com/storborg/funniest\u0026#39;, author=\u0026#39;Flying Circus\u0026#39;, author_email=\u0026#39;flyingcircus@example.com\u0026#39;, license=\u0026#39;MIT\u0026#39;, packages=[\u0026#39;requests2\u0026#39;, \u0026#39;requests1\u0026#39;, \u0026#39;requests1/sub_request\u0026#39;], zip_safe=False) æ¯ä¸ªç›®å½•ä¸‹ï¼Œéœ€è¦æœ‰ä¸€ä¸ª init.py æ–‡ä»¶ï¼Œé‡Œé¢å®šä¹‰äº†è¿™ä¸ªç›®å½•æ¨¡å—çš„ç›¸å…³å£°æ˜ï¼Œä»¥åŠ å…¶ä»–æ¨¡å—çš„importå…³ç³»ã€‚ ä»¥ä¸Šé¢setup.py çš„requests1 æ¨¡å—ä¸ºä¾‹ã€‚ init.py: import os from .test_module import print_string from .sub_request.sub_test_module import sub_print_string test_module.py\nimport os def print_string(str): print(\u0026#39;test_module printstring={0}\u0026#39;.format(str)) packageå®‰è£…æ–¹æ³• cd åˆ° setup.py åŒçº§ç›®å½•ä¸‹ï¼Œæ‰§è¡Œ\npip3 install . "
},
{
	"uri": "https://leverkusen188.github.io/reactnative/rn_optimization/",
	"title": "React Native ä¼˜åŒ–ç›¸å…³",
	"tags": [],
	"description": "",
	"content": "JSåŠ è½½ åœ¨ react-native æ‰§è¡Œ JS ä»£ç ä¹‹å‰ï¼Œå¿…é¡»å°†ä»£ç åŠ è½½åˆ°å†…å­˜ä¸­å¹¶è¿›è¡Œè§£æã€‚å¦‚æœä½ åŠ è½½äº†ä¸€ä¸ª 50MB çš„ bundleï¼Œé‚£ä¹ˆæ‰€æœ‰çš„ 50mb éƒ½å¿…é¡»è¢«åŠ è½½å’Œè§£ææ‰èƒ½è¢«æ‰§è¡Œã€‚RAM æ ¼å¼çš„ bundle åˆ™å¯¹æ­¤è¿›è¡Œäº†ä¼˜åŒ–ï¼Œå³å¯åŠ¨æ—¶åªåŠ è½½ 50MB ä¸­å®é™…éœ€è¦çš„éƒ¨åˆ†ï¼Œä¹‹åå†é€æ¸æŒ‰éœ€åŠ è½½æ›´å¤šçš„åŒ…ã€‚\nä½¿ç”¨å†…è”å¼•ç”¨ï¼Œå¯ä»¥å®ç°æ‡’åŠ è½½ï¼Œé™ä½å¯åŠ¨æ—¶é—´ã€‚\nç›´æ¥åŠ è½½çš„æ ·ä¾‹ä»£ç ï¼š\nimport ModalApp from \u0026#39;./MyJS/Modal\u0026#39;; AppRegistry.registerComponent(\u0026#34;ModalApp\u0026#34;, () =\u0026gt; ModalApp); å†…è”å¼•ç”¨åŠ è½½:\nlet m = require(\u0026#39;./MyJS/Modal\u0026#39;).default AppRegistry.registerComponent(\u0026#34;ModalApp\u0026#34;, () =\u0026gt; m); "
},
{
	"uri": "https://leverkusen188.github.io/reactnative/js_native_communication/",
	"title": "React Native çš„JSä¸Oc é€šä¿¡",
	"tags": [],
	"description": "",
	"content": "JS è°ƒç”¨ OC åˆ›å»ºä¸€ä¸ªOCç±»ï¼Œå®ç° RCTBridgeModule åè®®ã€‚ H å¤´æ–‡ä»¶ #import \u0026lt;React/RCTBridgeModule.h\u0026gt; @interface TestObjectForJS : NSObject\u0026lt;RCTBridgeModule\u0026gt; @end M æ–‡ä»¶ #import \u0026lt;React/RCTLog.h\u0026gt; @implementation TestObjectForJS RCT_EXPORT_MODULE(TestObject); //å£°æ˜å¯¼å‡ºçš„æ¨¡å—å //å£°æ˜å¹¶å®ç°å¯¼å‡ºçš„æ–¹æ³•ï¼ˆå®é™…ä¸Šæ˜¯ç±»æ–¹æ³•ï¼‰ RCT_EXPORT_METHOD(testFunc:(NSString *)first location:(NSString *)second) { NSString *output = [first stringByAppendingString:second]; RCTLogInfo(@\u0026#34;Pretending to create an event: %@\u0026#34;, output); } @end åœ¨JSä¸­è°ƒç”¨å³å¯ã€‚ import { NativeModules } from \u0026#39;react-native\u0026#39;; NativeModules.TestObject.testFunc(\u0026#39;11\u0026#39;, \u0026#39;22\u0026#39;) OC ç»™JSè°ƒç”¨çš„æ–¹æ³•æ”¯æŒçš„å‚æ•°ç±»å‹ RCT_EXPORT_METHODÂ æ”¯æŒæ‰€æœ‰æ ‡å‡† JSON ç±»å‹ï¼ŒåŒ…æ‹¬ï¼š\nstring (NSString) number (NSInteger,Â float,Â double,Â CGFloat,Â NSNumber) boolean (BOOL,Â NSNumber) array (NSArray) å¯åŒ…å«æœ¬åˆ—è¡¨ä¸­ä»»æ„ç±»å‹ object (NSDictionary) å¯åŒ…å« string ç±»å‹çš„é”®å’Œæœ¬åˆ—è¡¨ä¸­ä»»æ„ç±»å‹çš„å€¼ function (RCTResponseSenderBlock) RCTConvert å£°æ˜çš„ä¹Ÿéƒ½å¯ä»¥æ”¯æŒ ä»¥NSDate ä¸ºä¾‹ï¼š JSç«¯, å¯ä»¥ä¼ é€’ Date çš„ getTime() (æ—¶é—´æˆ³) const date = new Date(\u0026#39;1995-12-17T03:24:00\u0026#39;); NativeModules.TestObject.testFunc(\u0026#39;11\u0026#39;, \u0026#39;22\u0026#39;, date.getTime()) ä¹Ÿå¯ä»¥ä¼ é€’ Dateçš„ toISOString().\nconst date = new Date(\u0026#39;1995-12-17T03:24:00\u0026#39;); NativeModules.TestObject.testFunc(\u0026#39;11\u0026#39;, \u0026#39;22\u0026#39;, date.toISOString()) è€Œåœ¨nativeç«¯ï¼Œå¦‚æœæ˜¯æ¥æ”¶æ—¶é—´æˆ³å‚æ•°ï¼Œå¯ä»¥ç”¨ NSNumber æˆ–æ˜¯ç›´æ¥ç”¨ NSDate\nRCT_EXPORT_METHOD(testFunc:(NSString *)first location:(NSString *)second time:(NSNumber*)time) { NSDate * date = [RCTConvert NSDate:time]; â€¦â€¦ } RCT_EXPORT_METHOD(testFunc:(NSString *)first location:(NSString *)second time:(NSDate*)time) { } å¦‚æœæ˜¯æ¥æ”¶æ—¶é—´å­—ç¬¦ä¸²ï¼Œå¯ä»¥ç”¨ NSString æˆ–æ˜¯ç›´æ¥ç”¨ NSDate\nRCT_EXPORT_METHOD(testFunc:(NSString *)first location:(NSString *)second time:(NSString*)time) { NSDate * date = [RCTConvert NSDate:time]; } å¤šå‚æ•°ï¼Œå¯ä»¥ç”¨ Dictionary æ¥åŒ…è£… JSç«¯ï¼š\nNativeModules.TestObject.testFunc(\u0026#39;11\u0026#39;, \u0026#39;22\u0026#39;, { location: \u0026#39;4 Privet Drive, Surrey\u0026#39;, time: date.getTime(), description: \u0026#39;...\u0026#39; }) Nativeç«¯ï¼š\nRCT_EXPORT_METHOD(testFunc:(NSString *)first location:(NSString *)second param:(NSDictionary*)param){ } Callbackå‚æ•°ï¼ˆç”±nativeå°†æ•°æ®å¼‚æ­¥è¿˜ç»™ JSï¼‰ Nativeç«¯ï¼Œå‡½æ•°å¯ä»¥å¸¦ä¸€ä¸ª RCTResponseSenderBlock ç±»å‹çš„callbackï¼Œå°†å¤šä¸ªæ•°æ®è¿”è¿˜ç»™ JSã€‚\nRCT_EXPORT_METHOD(testCallback:(NSString *)first callback:(RCTResponseSenderBlock)callback) { if (callback) { callback(@[@(1),@\u0026#34;b\u0026#34;, @\u0026#34;afgg\u0026#34;]); } } PS: nativeç«¯çš„callbackåªèƒ½è°ƒç”¨ä¸€æ¬¡ï¼Œå¦åˆ™JSç«¯ä¼šæŠ¥é”™ï¼ˆå¦‚æœ testCallback å£°æ˜äº†ä¸¤ä¸ªcallbackå‚æ•°ï¼Œé‚£ä¹ˆä¸€ä¸ªä»£ç åˆ†æ”¯åªèƒ½è°ƒç”¨å…¶ä¸­ä¸€ä¸ªcallbackï¼‰\nRCT_EXPORT_METHOD(testCallback:(NSString *)first callback:(RCTResponseSenderBlock)callback callback2:(RCTResponseErrorBlock)callback2) { BOOL b = YES; if (b) { if (callback) { callback(@[@(1),@\u0026#34;b\u0026#34;, @\u0026#34;afgg\u0026#34;]); } } else { if (callback2) { callback2([NSError errorWithDomain:@\u0026#34;hello\u0026#34; code:1001 userInfo:nil]); } } } è€Œåœ¨JSç«¯ï¼Œä¼ å…¥çš„callbackå‡½æ•°å¯ä»¥å¸¦ä»»æ„ä¸ªå‚æ•°ï¼Œä¸ªæ•°ä¸ Nativeç«¯ä¼ å…¥çš„ç›¸åŒï¼ˆå¦‚æœJSç«¯å¤šå‡ºçš„å£°æ˜å‚æ•°ï¼Œå€¼ä¼šæ˜¯ undefined\nNativeModules.TestObject.testCallback(\u0026#34;1\u0026#34;, (i, s, s2, i2) =\u0026gt; { console.log(\u0026#39;int=\u0026#39;+i) //int=1 console.log(\u0026#39;string=\u0026#39;+s) //string=b console.log(\u0026#39;string2=\u0026#39;+s2) //string2=afgg console.log(â€˜int2=\u0026#39;+s2)\t//int2=undefined }) RCTEventEmitter äº‹ä»¶å‘é€å™¨ å¯ä»¥åœ¨nativeç«¯å‘é€æŒ‡å®šçš„äº‹ä»¶ï¼ˆå¸¦æœ‰å‚æ•°ï¼‰ç»™JSç«¯ã€‚ æ ·ä¾‹ä»£ç ï¼š\nOCç±»è¦ç»§æ‰¿è‡ª RCTEventEmitter é‡å†™ æ–¹æ³•æ¥å£°æ˜æ”¯æŒçš„äº‹ä»¶id - (NSArray\u0026lt;NSString *\u0026gt; *)supportedEvents { return @[@\u0026#34;EventReminder\u0026#34;]; } nativeç«¯ç”¨ sendEventWithName:body: æ–¹æ³•æ¥å‘é€äº‹ä»¶å’Œæ•°æ® JSç«¯ç›‘å¬äº‹ä»¶å¹¶è·å–æ•°æ® const eventListener = new NativeEventEmitter(NativeModules.TestObject) const listener = eventListener.addListener(\u0026#34;hello\u0026#34;, (data) =\u0026gt; { console.log(\u0026#34;hello data=\u0026#34;+data) }) //ç”¨remove å–æ¶ˆç›‘å¬ listener.remove() çº¿ç¨‹ React Native åœ¨ä¸€ä¸ªç‹¬ç«‹çš„ä¸²è¡Œ GCD é˜Ÿåˆ—ä¸­è°ƒç”¨Nativeçš„æ–¹æ³•ï¼Œä½†è¿™å±äºå®ç°çš„ç»†èŠ‚ï¼Œå¹¶ä¸”å¯èƒ½ä¼šåœ¨å°†æ¥çš„ç‰ˆæœ¬ä¸­æ”¹å˜ã€‚ å¦‚æœè¦æŒ‡å®š nativeä»£ç çš„æ‰§è¡Œçº¿ç¨‹ï¼Œå¯ä»¥é‡å†™ methodQueue æ–¹æ³•ã€‚\n- (dispatch_queue_t)methodQueue { return dispatch_get_main_queue(); } PSï¼šmethodQueueæ–¹æ³•ä¼šåœ¨æ¨¡å—è¢«åˆå§‹åŒ–çš„æ—¶å€™è¢«æ‰§è¡Œä¸€æ¬¡ï¼Œç„¶åä¼šè¢« React Native çš„æ¡¥æ¥æœºåˆ¶ä¿å­˜ä¸‹æ¥ã€‚å¦‚æœè¦é‡ç”¨é˜Ÿåˆ—ï¼Œè¦ç”¨æˆå‘˜å˜é‡ä¿å­˜ä¸‹æ¥ã€‚\n"
},
{
	"uri": "https://leverkusen188.github.io/reactnative/",
	"title": "ReactNatives",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "https://leverkusen188.github.io/rxswift/rxfeedback/",
	"title": "RxFeedback å­¦ä¹ ",
	"tags": [],
	"description": "",
	"content": " æ ¸å¿ƒåŠŸèƒ½ï¼šè‡ªå®šä¹‰Eventçš„è§¦å‘äº‹ä»¶é›†åˆï¼Œä»¥åŠè®¢é˜…è¯¥äº‹ä»¶è§¦å‘åä¼šä¿®æ”¹çš„ä¸€ä¸ªçŠ¶æ€é›†å¯¹è±¡çš„Observableã€‚åŒæ—¶è‡ªå®šä¹‰ åœ¨äº‹ä»¶è§¦å‘åï¼Œå¯¹çŠ¶æ€é›†å¯¹è±¡è¿›è¡Œæ•°æ®å˜æ›´ã€‚\næ ·ä¾‹ä»£ç ï¼š\n//åœ¨ä¸‹é¢ä»£ç ä¸­ï¼ŒçŠ¶æ€é›†å¯¹è±¡å°±æ˜¯Int typealias State = Int //è‡ªå®šä¹‰äº‹ä»¶æ˜¯ å¢åŠ å’Œå‡å°‘ enum Event { case increment case decrement } Observable.system( initialState: 0,\t//å£°æ˜çŠ¶æ€é›†å¯¹è±¡çš„åˆå§‹åŒ–å€¼ //reduceé‡Œï¼Œæ˜¯æ¥æ”¶åˆ° eventäº‹ä»¶åï¼Œå¯¹çŠ¶æ€é›†å¯¹è±¡è¿›è¡Œè‡ªå®šä¹‰å¤„ç†çš„ä»£ç ã€‚ç„¶åå°†æ–°çš„çŠ¶æ€é›†å¯¹è±¡è¿”å›ã€‚ STEP 2 reduce: { (state, event) -\u0026gt; State in switch event { case .increment: return state + 1 case .decrement: return state - 1 } }, scheduler: MainScheduler.instance, feedback: //bind ä¼ å…¥ownerå¯¹è±¡ï¼Œä½œä¸º ç¬¬äºŒä¸ªclosureçš„é¦–ä¸ªå‚æ•°è¿”å›ã€‚ //ç¬¬äºŒä¸ªclosureå‚æ•°ä½œç”¨æ˜¯ è‡ªå®šä¹‰Eventçš„è§¦å‘æ—¶æœºï¼Œä»¥åŠ å¯¹çŠ¶æ€é›†å¯¹è±¡Observableçš„è®¢é˜…æ“ä½œ //stateå°±æ˜¯ä¸€ä¸ª çŠ¶æ€é›†å¯¹è±¡çš„Observableï¼Œå³ ObservableSchedulerContext\u0026lt;State\u0026gt; bind(self) { me, state -\u0026gt; Bindings\u0026lt;Event\u0026gt; in //å¯¹çŠ¶æ€é›†å¯¹è±¡Observableçš„è®¢é˜…é›†åˆ let subscriptions = [ state.map(String.init).bind(to: me.label.rx.text) //STEP3 ] //è‡ªå®šä¹‰Eventçš„è§¦å‘å™¨ï¼›è¿™é‡Œè™šæ„äº†ä¸¤ä¸ªbuttonçš„action let events = [ me.plus.rx.tap.map { Event.increment }, //STEP 1 me.minus.rx.tap.map { Event.decrement } //STEP 1 ] return Bindings( subscriptions: subscriptions, events: events ) } ) "
},
{
	"uri": "https://leverkusen188.github.io/rxswift/rxswift_subject/",
	"title": "RxSwift çš„Subject",
	"tags": [],
	"description": "",
	"content": "ReplaySubject ReplaySubject åœ¨åˆ›å»ºæ—¶å€™éœ€è¦è®¾ç½®ä¸€ä¸ª bufferSizeï¼Œè¡¨ç¤ºå®ƒå¯¹äºå®ƒå‘é€è¿‡çš„ event çš„ç¼“å­˜ä¸ªæ•°ã€‚ æ¯”å¦‚ä¸€ä¸ª ReplaySubject çš„ bufferSize è®¾ç½®ä¸º 2ï¼Œå®ƒå‘å‡ºäº† 3 ä¸ª .next çš„ eventï¼Œé‚£ä¹ˆå®ƒä¼šå°†åä¸¤ä¸ªï¼ˆæœ€è¿‘çš„ä¸¤ä¸ªï¼‰event ç»™ç¼“å­˜èµ·æ¥ã€‚æ­¤æ—¶å¦‚æœæœ‰ä¸€ä¸ª subscriber è®¢é˜…äº†è¿™ä¸ª ReplaySubjectï¼Œé‚£ä¹ˆè¿™ä¸ª subscriber å°±ä¼šç«‹å³æ”¶åˆ°å‰é¢ç¼“å­˜çš„ä¸¤ä¸ª.next çš„ eventã€‚ å¦‚æœä¸€ä¸ª subscriber è®¢é˜…å·²ç»ç»“æŸçš„ ReplaySubjectï¼Œé™¤äº†ä¼šæ”¶åˆ°ç¼“å­˜çš„ .next çš„ eventå¤–ï¼Œè¿˜ä¼šæ”¶åˆ°é‚£ä¸ªç»ˆç»“çš„ .error æˆ–è€… .complete çš„eventã€‚ æ ·ä¾‹ä»£ç ï¼š\nlet subject = ReplaySubject\u0026lt;String\u0026gt;.create(bufferSize: 2) subject.onNext(â€œ1â€) subject.onNext(â€œ2â€) subject.onNext(â€œ3â€) //ç¬¬ä¸€æ¬¡è®¢é˜…ï¼Œä¼šæ”¶åˆ° 2 å’Œ 3 äº‹ä»¶ subject.subscribe(onNext: { (event) in print(event) }, onError: { (error) in print(error) }, onCompleted: { print(\u0026#34;è¿™æ˜¯ä¸€ä¸ª å®Œæˆ\u0026#34;) }) { print(\u0026#34;é”€æ¯äº†\u0026#34;) }.disposed(by: bag) subject.onCompleted() //è®¾ç½®ReplaySubjectä¸ºå®ŒæˆçŠ¶æ€ //ç¬¬äºŒæ¬¡è®¢é˜…ï¼Œä¼šç«‹åˆ»æ”¶åˆ° 2 å’Œ3äº‹ä»¶ï¼Œä»¥åŠ completedäº‹ä»¶ subject.subscribe(onNext: { (event) in print(event) }, onError: { (error) in print(error) }, onCompleted: { print(\u0026#34;å®Œæˆä¹‹åçš„è®¢é˜…å®Œæˆ\u0026#34;) }) { print(\u0026#34;å®Œæˆä¹‹åé”€æ¯äº†\u0026#34;) }.disposed(by: bag) BehaviorSubject BehaviorSubject éœ€è¦é€šè¿‡ä¸€ä¸ªé»˜è®¤åˆå§‹å€¼æ¥åˆ›å»º å½“ä¸€ä¸ªè®¢é˜…è€…æ¥è®¢é˜…å®ƒçš„æ—¶å€™ï¼Œè¿™ä¸ªè®¢é˜…è€…ä¼šç«‹å³æ”¶åˆ° BehaviorSubjects ä¸Šä¸€ä¸ªå‘å‡ºçš„eventã€‚ä¹‹åå°±è·Ÿæ­£å¸¸çš„æƒ…å†µä¸€æ ·ï¼Œå®ƒä¹Ÿä¼šæ¥æ”¶åˆ° BehaviorSubject ä¹‹åå‘å‡ºçš„æ–°çš„ event è¿™ä¸ªåœ°æ–¹æ­£å¥½åŒºåˆ«äº†PublishSubject è®¢é˜…ä¹‹å‰å‘å‡ºä¿¡å·æ— æ³•ç›‘å¬ã€‚ æ³¨æ„ï¼Œå¦‚æœBehaviorSubject completeäº†ï¼Œé‚£ä¹ˆå†æ¬¡è®¢é˜…ï¼Œæ˜¯æ— æ³•è·å–åˆ°ä¸Šä¸€æ¬¡çš„next äº‹ä»¶çš„ï¼Œè€Œä¸”å†ç”¨æ­¤ Subjectå‘é€äº‹ä»¶ï¼Œä¹Ÿæ— æ•ˆäº†ï¼Œåªä¼šç«‹åˆ»è·å–åˆ°completeäº‹ä»¶ï¼ˆè¯´æ˜ BehaviorSubject æ˜¯æ— bufferçš„ï¼‰\nlet subject1 = BehaviorSubject(value: â€œ1â€) subject1.subscribe(onNext: { (event) in print(event) } , onCompleted: { print(\u0026#34;completed 1\u0026#34;) }) { print(\u0026#34;é”€æ¯äº†1\u0026#34;) }.disposed(by: bag) subject1.onNext(â€œ2â€) subject1.onCompleted()\t//æ ‡å®šè¯¥subjectç»“æŸäº† subject1.onNext(â€œ3â€) //å› ä¸ºå·²ç»ç»“æŸï¼Œå› æ­¤æ­¤äº‹ä»¶å‘é€æ— æ•ˆ //å†æ¬¡è®¢é˜…ï¼Œä¹Ÿåªèƒ½è·å–åˆ° completeäº‹ä»¶äº† subject1.subscribe(onNext: { (event) in print(event) } , onCompleted: { print(\u0026#34;completed 2\u0026#34;) }) { print(\u0026#34;é”€æ¯äº†2\u0026#34;) }.disposed(by: bag) æ‰“å°ç»“æœä¸º 1, 2, â€œcompleted 1â€, \u0026ldquo;completed 2\u0026rdquo;\nPublishSubject åŸºæœ¬åŒ BehaviorSubjectï¼Œåªæ˜¯è®¢é˜…å‰çš„æ¶ˆæ¯æ˜¯æ— æ³•è·å–åˆ°çš„ã€‚\nè¡¥å……çŸ¥è¯†ç‚¹ï¼š Relay å’Œ Subject Relay å¯¹åº”Subjectä¹Ÿæœ‰ä¸‰ç§ï¼ŒPublish, Behavior, Replay Relay åªæ˜¯å¯¹subjectçš„åŒ…è£…ï¼Œå®ƒå¹¶ä¸éµå¾ª ObserverType åè®®ï¼Œå› æ­¤æ— æ³•è¢« complete. å¯ä»¥é€šè¿‡ accept æ–¹æ³•æ¥æŠ›å‡º onNextäº‹ä»¶ã€‚\n"
},
{
	"uri": "https://leverkusen188.github.io/rxswift/rxswift_note/",
	"title": "RxSwift ç¬”è®°",
	"tags": [],
	"description": "",
	"content": "å“åº”æœºåˆ¶ å“åº”æœºåˆ¶æ ¸å¿ƒæ˜¯ Observable å’Œ ObserverType. å‰è€…ç”¨æ¥å‘é€äº‹ä»¶ï¼Œä½¿ç”¨è€…å¯ä»¥è®¢é˜…ï¼ˆsubscribeï¼‰åï¼Œç›‘å¬ onNext ï¼ŒonErrorç­‰äº‹ä»¶ã€‚ æ ·ä¾‹ä»£ç ï¼š\nlet switch = UISwitch! = UISwitch.init(frame: CGRect(x: 0, y: 50, width: 100, height: 40)) Let swiOnEvent = switch.rx.isOn swiOnEvent.subscribe(onNext: { booValue in print(â€œisOn=\\(booValue)\u0026#34;) }, onError: { i in }) Observable è½¬æ¢ Observable çš„ map å¯ä»¥åœ¨ç›‘å¬åˆ°onNext äº‹ä»¶åï¼Œå°†å½“å‰Observableçš„ element æ¢æˆè‡ªå®šä¹‰çš„å…¶ä»–ç±»å‹ï¼Œå¹¶è¿”å›ä¸€ä¸ªå¯¹åº”æ³›å‹çš„Observableã€‚ æ ·ä¾‹ä»£ç ï¼š\nlet switch = UISwitch! = UISwitch.init(frame: CGRect(x: 0, y: 50, width: 100, height: 40)) Let swiOnEvent = switch.rx.isOn swiOnEvent.map{ isOn in //isOn æ˜¯swiOnEventçš„æ³›å‹ç±»å‹ï¼Œä¹Ÿå°±æ˜¯ Bool return 12 //æ¢æˆIntäº† }.subscribe(onNext: { intValue in //ä½œä¸ºintæ¥ç”¨äº† print(\u0026#34;st=\\(intValue)\u0026#34;) } Observable äº‹ä»¶è¿‡æ»¤ Observable çš„filter å¯ä»¥é€šè¿‡è‡ªå®šä¹‰æ¡ä»¶æ¥è¿‡æ»¤å‘é€ onNextäº‹ä»¶ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒæ ·æ³›å‹çš„Observableã€‚\næ ·ä¾‹ä»£ç ï¼š\nlet switch = UISwitch! = UISwitch.init(frame: CGRect(x: 0, y: 50, width: 100, height: 40)) Let swiOnEvent = switch.rx.isOn swiOnEvent.filter{ isOn in //è¿™é‡Œè½¬å˜ä¸€ä¸‹æ¡ä»¶ï¼Œåªæœ‰ isOnâ€™ æ˜¯falseæ—¶ï¼Œè¯¥observable æ‰å‘é€onNextäº‹ä»¶ If isOn { Return false } Return true }.subscribe(onNext: { boolValue in //ç”±äºfilteré‡Œï¼Œåªæœ‰ isOn ä¸ºfalseæ—¶ï¼Œæ‰å‘é€nextäº‹ä»¶ï¼Œå› æ­¤è¿™é‡Œçš„boolValue ä¸€å®šæ˜¯false print(\u0026#34;st=\\(boolValue)\u0026#34;) } Filter å’Œ map èƒ½åµŒå¥—ç»„åˆä½¿ç”¨ï¼Œæœ€åæ„é€ å‡ºè‡ªå·±éœ€è¦çš„ Observable ç”¨ filteræ¥è¿‡æ»¤ç›‘å¬åˆ°çš„å€¼ã€‚ å†æ¥map æ¥è½¬æ¢Observableçš„æ³›å‹æ•°æ®ç±»å‹ã€‚\nè‡ªå®šä¹‰Observable. å®šä¹‰å¹¶åˆ›å»ºä¸€ä¸ª Observable å¯¹è±¡ï¼Œç»™å¤–é¢ç”¨æ¥è®¢é˜…ç›‘å¬ã€‚ å£°æ˜ä¸€ä¸ª AnyObserverå¯¹è±¡ï¼Œåœ¨ åˆ›å»ºä¸Šé¢çš„ Observable æ—¶ï¼Œèµ‹å€¼åï¼Œç”¨æ¥æŠ›å‡ºonNextï¼ŒonErrorç­‰äº‹ä»¶å’Œæ•°æ® æ ·ä¾‹ä»£ç ï¼š //å£°æ˜å’Œåˆ›å»º Observable typealias CustomFrame = (CGPoint, CGSize) private var myPointObsevablePtr : (AnyObserver\u0026lt;CustomFrame\u0026gt;)? public lazy var myPointObsevable : Observable\u0026lt;CustomFrame\u0026gt; = { Observable\u0026lt;CustomFrame\u0026gt;.create { [weak self] (ob) -\u0026gt; Disposable in self?.myPointObsevablePtr = ob return Disposables.create() } }() //åœ¨éœ€è¦çš„æ—¶æœºï¼ŒæŠ›å‡ºonNextäº‹ä»¶ self?.myPointObsevablePtr?.onNext((position, CGSize(width: 500, height: 1000))) ç„¶å myPointObsevable ç»™å¤–é¢è®¢é˜…ç›‘å¬å³å¯ã€‚\n"
},
{
	"uri": "https://leverkusen188.github.io/rxswift/rxswift_advanced_function/",
	"title": "RxSwift é«˜é˜¶å‡½æ•°ç”¨æ³•",
	"tags": [],
	"description": "",
	"content": "distinctUntilChanged(). æ˜¯ObservableTypeçš„æ‰©å±•æ–¹æ³•ï¼Œå½“ ObservableType çš„Element å¿…é¡»æ˜¯éµå¾ªEquatable åè®®çš„ç±»å‹ã€‚ è¯¥å‡½æ•°è¿”å›ä¸€ä¸ªObservableTypeï¼Œåªæœ‰Elementçš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰ä¼šæŠ›å‡ºonNextäº‹ä»¶ã€‚ ä¾‹å¦‚ Observable.of(1,2,1,3,5,4).distinctUntilChanged() , ä¼šæŠ›å‡º 1,2,1,3,5,4 è€Œ Observable.of(1,1,3,5,4).distinctUntilChanged() , ä¼šæŠ›å‡º 1,3,5,4\nelement(at:) åªé€šçŸ¥ æŒ‡å®šindexçš„Element çš„onNextäº‹ä»¶\nignoreElements() å¿½ç•¥onNextäº‹ä»¶ï¼ŒåªæŠ›å‡º onError å’Œ completedäº‹ä»¶\ntake(count) åªæŠ›å‡ºåºåˆ—ä¸­æŒ‡å®šcountæ•°çš„äº‹ä»¶ï¼Œæ»¡è¶³count æ•°åï¼Œç›´æ¥æŠ›å‡º completed\ntakeLast(count) åªæŠ›å‡ºåºåˆ—ä¸­æœ€åçš„æŒ‡å®šcountæ•°çš„äº‹ä»¶ã€‚æ»¡è¶³count æ•°åï¼Œç›´æ¥æŠ›å‡º completed\nPS: æ³¨æ„takeç³»åˆ—ï¼Œå¦‚æœæ˜¯æœªæŒ‡å®šä¸ªæ•°çš„äº‹ä»¶åºåˆ—ï¼Œåˆ™takeLastæ˜¯ä¸ç”Ÿæ•ˆçš„ã€‚\nskip(count)ï¼š è·³è¿‡æŒ‡å®šä¸ªæ•°çš„äº‹ä»¶ã€‚\ndelaySubscription() åœ¨æŒ‡å®šçš„æ—¶é—´å†…ï¼Œæ— æ³•è·å–åˆ°åºåˆ—äº‹ä»¶ï¼Œåˆ°æ—¶é—´åï¼Œå°±èƒ½è·å–åˆ°äº‹ä»¶äº†ã€‚\ndelay() å°†æ‰€æœ‰ä¿¡å·äº‹ä»¶ delay æŒ‡å®šæ—¶é—´åå†å‘é€ã€‚è®¢é˜…è€…è·å–åˆ°çš„äº‹ä»¶éƒ½æ˜¯å»¶è¿Ÿåçš„ã€‚\nPSï¼šä½†å¯¹äºæŒ‡å®šä¸ªæ•°åºåˆ—äº‹ä»¶çš„ObservableTypeï¼Œä¸¤è€…è¡Œä¸ºæ˜¯ä¸€è‡´çš„ï¼Œéƒ½ä¼šå»¶è¿Ÿ æŒ‡å®šæ—¶é—´åï¼Œè®¢é˜…è€…æ‰æ”¶åˆ°æ¶ˆæ¯\ndebounce() æŒ‡å®šä¿¡å·ä¹‹é—´é—´éš”æœªè¾¾åˆ°æŒ‡å®šæ—¶å·®æ—¶ï¼Œå°±ä¼šå¿½ç•¥å‰é¢çš„äº‹ä»¶ï¼ŒåªæŠ›å‡ºæœ€åä¸€ä¸ªäº‹ä»¶ã€‚\ngroupBy() å¯ä»¥å°†æŒ‡å®šçš„Observable åˆ†å‰²æˆå¤šä¸ª å­—å®šä¹‰keyçš„Observableã€‚ æ ·ä¾‹ä»£ç ï¼ˆæ ¹æ®è‡ªå®šä¹‰çš„ keySelectorï¼Œå°† 1-6çš„åºåˆ—åŒ–çš„Observable åˆ†ç»„æˆ ä¸¤ä¸ªGroupedObservableï¼Œå®ƒä»¬çš„key å°±æ˜¯è‡ªå®šä¹‰çš„ â€œå¥‡æ•°â€å’Œâ€œå¶æ•°â€ï¼‰ï¼š\nObservable.of(1,2,3,4,5,6).groupBy(keySelector: { (ele) -\u0026gt; String in return ele % 2 == 1 ? â€œå¥‡æ•°â€ : â€œå¶æ•°â€ }).subscribe(onNext: { group in os_log(\u0026#34;groupBy key=\\(group.key)\u0026#34;) group.asObservable() .subscribe({ event in switch event { case .next(let v): os_log(\u0026#34;groupBy onNext=\\(v)\u0026#34;) default: break } }) }) flatMap() å°†æ“ä½œæºObservableçš„æ¯ä¸€ä¸ªå…ƒç´ è½¬æ¢æˆ å¯¹åº”çš„ä¸€ä¸ªObservableï¼Œç„¶åæŠŠè¿™äº›æ–°ç”Ÿæˆçš„Observables æ•°ç»„æ‹æ‰ï¼Œå˜æˆä¸€ä¸ª Observable åºåˆ—ã€‚ å½“Observableçš„å…ƒç´ ä¹Ÿæ˜¯ä¸€ä¸ªObservableæ—¶ï¼ŒflatMap å¾ˆæœ‰ç”¨ã€‚ æ ·ä¾‹ä»£ç ï¼š\n//å£°æ˜ä¸¤ä¸ª Observable let subject1 = BehaviorSubject(value: \u0026#34;A\u0026#34;) let subject2 = BehaviorSubject(value: \u0026#34;a\u0026#34;) //ç”¨ä¸¤ä¸ªObservable æ–°å»ºä¸€ä¸ªObservableåºåˆ— let variable = Observable.of(subject1, subject2) variable.asObservable() .flatMap { $0 //å°†åºåˆ—é‡Œçš„Observableç›´æ¥è¿”å›ï¼Œä¹Ÿå°±æ˜¯ subject1 å’Œ subject2 } .subscribe(onNext: { print(\u0026#34;hhhhhhh \\($0)\u0026#34;) }) //å†å‘é€ä¸¤ä¸ªObservableçš„æ–°å€¼äº‹ä»¶ subject1.onNext(\u0026#34;B\u0026#34;) subject2.onNext(\u0026#34;b\u0026#34;) PSï¼šæ‰“å°å‡ºæ¥çš„åº”è¯¥æ˜¯ AaBb\nflatMapLatest ä¸åŒäº flatMapçš„æ˜¯ï¼Œå®ƒåªå“åº”æœ€åè½¬æ¢çš„é‚£ä¸ªObservableçš„äº‹ä»¶äº†ã€‚ åŒä¸Šçš„ä»£ç ï¼Œä½¿ç”¨ flatMapLatestçš„è¯ï¼Œæ‰“å°å‡ºæ¥çš„åº”è¯¥æ˜¯ Aab\nconcatMap() åŠŸèƒ½åŒflatMapï¼Œä½†å®ƒåœ¨è½¬æ¢ å…ƒç´ ä¸ºå¤šä¸ªObservableçš„Observableæ—¶ï¼Œå¿…é¡»ç­‰å¾…å‰ä¸€ä¸ªObservable å®Œæˆï¼ˆonCompletedï¼‰ï¼Œåä¸€ä¸ªObservableæ‰èƒ½å‘å‡ºæ•°æ®ã€‚ æ ·ä¾‹ä»£ç \nlet subject1 = BehaviorSubject(value: \u0026#34;A\u0026#34;) let subject2 = BehaviorSubject(value: \u0026#34;a\u0026#34;) let variable = Observable.of(subject1, subject2) variable.asObservable() .concatMap { $0 } .subscribe(onNext: { print(\u0026#34;hhhhhhh \\($0)\u0026#34;) }) subject1.onNext(\u0026#34;B\u0026#34;) subject1.onCompleted() //åœ¨subject1 å®Œæˆåï¼Œæ‰å¼€å§‹æ¥æ”¶åˆ°subject2çš„äº‹ä»¶ print(â€œSubject1 Completedâ€) subject2.onNext(\u0026#34;b\u0026#34;) PSï¼šæ‰“å°ç»“æœåº”è¯¥æ˜¯ A B â€œSubject1 Completedâ€ a b\nbuffer() è¿”å›ä¸€ä¸ª Observable\u0026lt;[Element]\u0026gt;, åœ¨åŸObservableçš„å…ƒç´ è¾¾åˆ°æŒ‡å®šcount æˆ–æ˜¯ è®¾å®šçš„timeSpan åˆ°æ—¶äº†ï¼Œéƒ½ä¼šè§¦å‘ä¸€æ¬¡äº‹ä»¶ã€‚è¯¥äº‹ä»¶ä¼šå°†ä¸€ä¸ª arrayï¼ˆcountæ˜¯è¿™æ®µæ—¶é—´å†…æ¥æ”¶åˆ°çš„åŸObservableçš„å…ƒç´ ä¸ªæ•°ï¼‰ã€‚ å¦‚æœæ˜¯æ»¡è¶³countä¸ªæ•°çš„äº‹ä»¶ï¼Œé‚£ä¹ˆarrayçš„å…ƒç´ ä¸ªæ•°å°±æ˜¯æŒ‡å®šçš„countï¼›å¦‚æœæ˜¯åˆ°æœŸäº†ï¼Œåˆ™arrayçš„å…ƒç´ ä¸ªæ•°æ˜¯è¯¥æ—¶é—´å†…æ¥æ”¶åˆ°çš„åŸObservableçš„å…ƒç´ ä¸ªæ•°ã€‚ æ ·ä¾‹ä»£ç \nvar subject = PublishSubject\u0026lt;String\u0026gt;() subject.buffer(timeSpan: RxTimeInterval.seconds(1), count: 2, scheduler: MainScheduler.instance) .subscribe(onNext: { (event) in os_log(\u0026#34;\\(flag) buffer=\\(event)\u0026#34;) }) .disposed(by: bag) subject.onNext(\u0026#34;111\u0026#34;) subject.onNext(\u0026#34;222\u0026#34;) DispatchQueue.main.asyncAfter(deadline: DispatchTime.now() + 1.5) { subject.onNext(\u0026#34;444\u0026#34;) } PSï¼šæ‰“å°ç»“æœåº”è¯¥æ˜¯ [111,222] (ç¬¬ä¸€æ¬¡ï¼Œæ»¡è¶³äº†æŒ‡å®šcountæ¡ä»¶) ç„¶åä¸€ç§’å [], ï¼ˆè¿™ä¸€æ¬¡ï¼ŒtimeSpanåˆ°æœŸäº†ï¼Œä½†åŸObservable æ²¡æœ‰å‘é€äº‹ä»¶ï¼‰ å†è¿‡1ç§’å [444] ï¼ˆè¿™ä¸€æ¬¡ï¼Œä¹Ÿæ˜¯timeSpanåˆ°æœŸï¼ŒåŸObservable å‘é€äº†ä¸€ä¸ª 444ï¼‰\nwindow() è¿”å›ä¸€ä¸ª Observable\u0026lt;Observable\u0026gt;\ntimeSpan æŒ‡å®šè¯¥Observableå‘é€çš„äº‹ä»¶æœ€å¤§é—´éš”ã€‚countæŒ‡å®š æ”¶åˆ°çš„ä½œä¸ºElementçš„ Observableæ‰€èƒ½å‘é€çš„æœ€å¤§äº‹ä»¶ä¸ªæ•°ã€‚ ä¸€æ—¦timespanåˆ°æœŸï¼Œæˆ–æ˜¯ ä½œä¸ºElementçš„Observable å·²å‘é€äº†countä¸ªäº‹ä»¶ï¼ŒåŸObservableéƒ½ä¼šé‡æ–°å‘é€ä¸€ä¸ªObservableè¿‡æ¥ï¼Œè€Œä¸Šä¸€ä¸ªåˆ™ä¼š Completedã€‚ æ ·ä¾‹ä»£ç ï¼š\nsubject = PublishSubject\u0026lt;String\u0026gt;() subject.window(timeSpan: RxTimeInterval.seconds(1), count: 2, scheduler: MainScheduler.instance) .subscribe(onNext: { (event) in os_log(\u0026#34;get window event\u0026#34;) event.subscribe(onNext: { os_log(\u0026#34;\\(flag) window=\\($0)\u0026#34;) },onCompleted: { os_log(\u0026#34;\\(flag) subwindow completed\u0026#34;) }).disposed(by: bag) },onCompleted: { os_log(\u0026#34;\\(flag) window completed\u0026#34;) }) .disposed(by: bag) //subject ä¼šå…ˆå‘é€ç¬¬ä¸€ä¸ªObservableï¼Œè¯¥Observable ä¼šå‘é€ 111ï¼Œ 222 ä¸¤ä¸ªäº‹ä»¶ï¼Œç„¶åcompleted subject.onNext(\u0026#34;111\u0026#34;) subject.onNext(\u0026#34;222\u0026#34;) //æ¥ç€å‘é€ç¬¬äºŒä¸ªObservableï¼Œè¯¥Observableä¼šå‘é€ 333 è¿™ä¸ªäº‹ä»¶ï¼Œç”±äºæŒ‡å®šçš„timeSpan 1ç§’å†…ï¼ŒåŸObservableï¼ˆsubjectï¼‰æ²¡æœ‰å…¶ä»–äº‹ä»¶ï¼Œåˆ™è¯¥Observableä¼šå†1ç§’åcomplete subject.onNext(â€œ333â€) DispatchQueue.main.asyncAfter(deadline: DispatchTime.now() + 1.5) { //ç¬¬ä¸‰ä¸ªObservableä¼šåœ¨ 1ç§’æ—¶å‘é€ï¼Œæ¥ç€ 0.5ç§’åæ”¶åˆ°subjectçš„ 444æ¶ˆæ¯ã€‚ subject.onNext(â€œ444â€) } Logè¾“å‡ºå¦‚ä¸‹ï¼š 2022-04-25 15:26:21.78 get window event 2022-04-25 15:26:21.78 RxSwiftGaojie window=111 2022-04-25 15:26:21.78 RxSwiftGaojie window=222 2022-04-25 15:26:21.78 RxSwiftGaojie subwindow completed //æ»¡è¶³countä¸ªæ•°ï¼Œè¯¥Observable ä¼šcomplete 2022-04-25 15:26:21.78 get window event 2022-04-25 15:26:21.78 RxSwiftGaojie window=333 2022-04-25 15:26:22.78 RxSwiftGaojie subwindow completed //ç¬¬äºŒä¸ªObservable 1ç§’å†…åªæ”¶åˆ°1ä¸ªäº‹ä»¶ï¼Œåˆ°æœŸäº†ä¼šcomplete 2022-04-25 15:26:22.78 get window event 2022-04-25 15:26:23.42 RxSwiftGaojie window=444 //ç¬¬ä¸‰ä¸ªObservableåœ¨ 0.5ç§’åæ”¶åˆ°äº†444æ¶ˆæ¯ 2022-04-25 15:26:23.78 RxSwiftGaojie subwindow completed //ç¬¬ä¸‰ä¸ªObservable åŒç¬¬äºŒä¸ªï¼Œåˆ°æœŸäº†è‡ªåŠ¨complete\ncombineLatest() å¯ä»¥å°†å¤šä¸ªObservableçš„äº‹ä»¶æ•´åˆä¸ºä¸€ä¸ªObservable å¿…é¡»æ¯ä¸ªObservableéƒ½æœ‰onNextäº‹ä»¶ï¼Œæ‰ä¼šè§¦å‘æ•´åˆObservableçš„ onNextã€‚ completedäº‹ä»¶åŒä¸Šï¼Œæ‰€æœ‰Observableéƒ½è§¦å‘äº†completeæ‰è¡Œã€‚ Error åªè¦å…¶ä¸­ä¸€ä¸ª Observableè§¦å‘äº†ï¼Œå°±èƒ½è§¦å‘æ•´åˆObservableçš„error æ ·ä¾‹ä»£ç ï¼š\nlet comSub = BehaviorSubject(value: 1) let comSub2 = PublishSubject\u0026lt;String\u0026gt;() Observable.combineLatest(comSub, comSub2) .subscribe({ event in switch event { case .next(let i, let s): print(\u0026#34;\\(s)\u0026#34;) break case .completed: break case .error(let e): break default: break } }) comSub2.onNext(â€œAâ€) //ä¼šè§¦å‘æ•´åˆObservableçš„nextäº‹ä»¶ï¼Œå…ƒç´ å€¼åˆ†åˆ«ä¸ºä¸¤ä¸ªsubjectçš„æœ€åä¸€æ¬¡å…ƒç´ å€¼ comSub.onCompleted() comSub2.onCompleted() //è§¦å‘æ•´åˆObservableçš„completeäº‹ä»¶ zip() å°†å¤šä¸ªObservable æ•´åˆä¸ºä¸€ä¸ªå¤šå‚æ•°çš„Observableã€‚ æ‰“åŒ…çš„Observable å¿…é¡»äº‹ä»¶ä¸ªæ•°å®Œå…¨ä¸€æ ·ï¼Œæ‰ä¼šè§¦å‘æ–°Observableçš„äº‹ä»¶ï¼Œä¼šå°†æ‰€æœ‰Observableç›¸åŒindexçš„äº‹ä»¶æ‰“åŒ…è§¦å‘ã€‚ æ ·ä¾‹ä»£ç ï¼š\nlet zip1 = BehaviorSubject(value: 1) let zip2 = BehaviorSubject(value: \u0026#34;a\u0026#34;) Observable.zip(zip1, zip2) .subscribe(onNext: { (i, s) in print(\u0026#34;zip 1=\\(i) 2=\\(s)\u0026#34;) }, onCompleted: { print(\u0026#34;\u0026#34;) }).dispose() zip1.onNext(2) zip1.onNext(3) //zip1 æœ‰ä¸‰ä¸ªäº‹ä»¶äº†ï¼Œä½†zip2 åªæœ‰ä¸€ä¸ªï¼Œä¸ä¼šè§¦å‘onNext zip2.onNext(\u0026#34;b\u0026#34;) //zip2 çš„ç¬¬äºŒä¸ªäº‹ä»¶ï¼Œä¸ zip1çš„ç¬¬äºŒä¸ªä¸€èµ·æ‰“åŒ…è§¦å‘ zip1.onCompleted() zip2.onCompleted() é‚£ä¹ˆæ‰“å°å‡ºæ¥çš„åº”è¯¥æ˜¯ zip 1=1 2=a zip 1=2 2=b\n"
},
{
	"uri": "https://leverkusen188.github.io/iosrelated/sdk%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/",
	"title": "SDK å¼€å‘è§„èŒƒ &amp; ç»éªŒæ€»ç»“",
	"tags": [],
	"description": "",
	"content": "å¼€å‘è§„èŒƒ 1. å¼€å‘è§„èŒƒ APIåŠŸèƒ½å•ä¸€ï¼Œå‡å°‘ç±»ä¼¼enumçš„å…¥å‚è®¾è®¡ çº¿ç¨‹å¤„ç†ï¼Œ å¦‚éå¿…è¦ä¸è¦ä½¿ç”¨åº”ç”¨ä¸»çº¿ç¨‹ï¼Œä¸èƒ½é•¿æ—¶é—´å ç”¨ï¼ŒSDKå†…åº”æœ‰ä¸€ä¸ªä¸“é—¨çº¿ç¨‹å¤„ç†SDK ç›¸å…³æ“ä½œ å°½é‡å‡å°‘å…¨å±€å›è°ƒ æä¾›å¼‚å¸¸æƒ…å†µå›è°ƒå’Œè¾“å‡ºæ–¹ä¾¿æ¥å…¥æ–¹å®šä½ï¼Œé”™è¯¯å›è°ƒé‡‡ç”¨code+msgç»„åˆ èƒ½ä¸ç”¨å•ä¾‹çš„å°±å°½é‡å°‘çš„ä½¿ç”¨ å¯¹iOS æ¥è¯´èƒ½ä¸ç”¨xib å°±ä¸ç”¨ï¼Œèƒ½ä¸ç”¨é€šçŸ¥å°±ä¸ç”¨é€šçŸ¥ 2. å‘½åè§„èŒƒ æ¥å£åç§°ï¼Œå‚æ•°å‘½åæ¸…æ™°è§„èŒƒï¼Œå‚æ•°å°½å¯èƒ½å°‘ï¼Œæ‰€æœ‰ä¼ å…¥å‚æ•°è¦åšå¥½æ ¡éªŒï¼Œç¦æ­¢ä½¿ç”¨æ‹¼éŸ³å’Œä¸­æ–‡ ç±»åï¼Œå…¨å±€é™æ€å˜é‡ï¼Œå®ç­‰å‘½åå°½é‡ä½¿ç”¨è‡ªå®šä¹‰å‰ç¼€æ¥ä¿è¯å”¯ä¸€æ€§ï¼Œé¿å…ä¸å…¶ä»–æ¨¡å—å‘ç”Ÿå‘½åå†²çªã€‚c++ å¯ä»¥ä½¿ç”¨namespaceæ¥å£°æ˜ç±»å’Œç»“æ„çš„æ¨¡å—å±‚çº§ï¼Œè¿˜èƒ½é¿å…å‘½åå†²çªã€‚ å‡½æ•°å‘½åéµå¾ªå…±æ€§ï¼Œä¸è¦å‡ºç°æ­§ä¹‰æˆ–è€…è¿èƒŒå¤§å®¶çš„å…±è¯† æ‰€æœ‰èµ„æºå‘½åå‰ç¼€ï¼šimageName_å·¥ç¨‹å‘½å_å¹³å°åï¼štoast_xxxSDK_iOS 3. æ—¥å¿—è®¾è®¡ logæ¨¡å—ç›¸å…³åŠŸèƒ½å¯é…ç½®ï¼ˆæ¯”å¦‚æ—¥å¿—å¼€å…³ï¼Œæ—¥å¿—æ–‡ä»¶è¾“å‡ºç›®å½•ï¼Œæ—¥å¿—æ‰“å°æ¥ç®¡æ¥å£ï¼‰ logä¼˜å…ˆçº§åˆ†ä¸åŒçº§åˆ«ï¼Œå¯æ§åˆ¶æ‰“å°logçº§åˆ« 4. ç¬¬ä¸‰æ–¹åº“ä¾èµ–å¤„ç†åŸåˆ™ æœ€å°å¯ç”¨æ€§åŸåˆ™ï¼Œå³ç”¨æœ€å°‘çš„ä»£ç ï¼Œå¦‚æ— å¿…è¦å‹¿å¢å®ä½“ï¼› æœ€å°‘ä¾èµ–æ€§åŸåˆ™ï¼Œå³ç”¨æœ€ä½é™åº¦çš„å¤–éƒ¨ä¾èµ–ï¼Œå¦‚æ— å¿…è¦å‹¿å¢ä¾èµ– SDKå¼€å‘ä¸­ï¼Œéœ€è¦å°½é‡é¿å…ä¾èµ–ç¬¬ä¸‰æ–¹åº“ä»¥å…å¼•èµ·ä¸å¿…è¦çš„å†²çªï¼›å¦‚å®åœ¨éœ€è¦ï¼Œå¯ä»¥ä»¥æºç å½¢å¼å¼•å…¥ç¨³å®šç‰ˆæœ¬ï¼Œå¹¶å¯¹ç±»ï¼Œç»“æ„ï¼Œå…¨å±€å˜é‡ç­‰æ·»åŠ å‰ç¼€ä»¥é¿å…å¤–éƒ¨ä½¿ç”¨åˆ°è¯¥ç¬¬ä¸‰æ–¹åº“æ—¶äº§ç”Ÿå†²çªã€‚ 5. ç‰ˆæœ¬ç®¡ç†è§„èŒƒ ä½¿ç”¨ä¸‰ä½ç‰ˆæœ¬å·ï¼Œæ¯ä½ç‰ˆæœ¬å·æœ€é«˜ä¸‰ä½æ•°å­—å¦‚ï¼š1.0.12\nç‰ˆæœ¬å·é€’å¢åŸåˆ™ï¼š ç¬¬ä¸‰ä½ï¼šbugä¿®å¤ï¼Œæå°çš„å˜æ›´ ç¬¬äºŒä½ï¼šä¸€èˆ¬çš„åŠŸèƒ½è¿­ä»£ ç¬¬ä¸€ä½ï¼šé¡¹ç›®é‡æ„ï¼ŒåŠŸèƒ½å˜æ›´è¾ƒå¤§ï¼Œéœ€å›¢é˜Ÿå…±åŒç¡®å®š 6. æ‰“åŒ…åŸåˆ™ ä½¿ç”¨è„šæœ¬ä¸€é”®æ‰“åŒ…ï¼Œæå‡æ‰“åŒ…æ•ˆç‡ï¼Œé™ä½æ‰‹åŠ¨æ‰“åŒ…å¸¦æ¥çš„å‡ºé”™ç‡ è¦æä¾›ç¤ºä¾‹å·¥ç¨‹ï¼Œ ç¤ºä¾‹å·¥ç¨‹å¿…é¡»è®©å¼€å‘è€…ä»¥æœ€ä½çš„æˆæœ¬è¿è¡Œèµ·æ¥ï¼Œå¯ä»¥ç”¨æ¥éªŒè¯ä¸»è¦åŠŸèƒ½æ¥å£ ä»¥åŠ SDKçš„æ¥å…¥æ–¹å¼ã€‚ ç»éªŒ \u0026amp; é—®é¢˜æ€»ç»“ ä¸šåŠ¡å‹SDKé‡Œï¼Œå½“ä¸šåŠ¡å½¢æ€å‘ç”Ÿå˜åŒ–åï¼Œä¹‹å‰çš„æ¥å£å‚æ•°æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œè¯¥å¦‚ä½•å¤„ç†ï¼Ÿ\næ·»åŠ æ–°çš„æ¥å£ï¼Œè€æ¥å£æ ‡è¯†ä¸º è¯¥ç‰ˆæœ¬å¼ƒç”¨ï¼Œåœ¨SDKè¿­ä»£æ•°ä¸ªç‰ˆæœ¬ååˆ é™¤ã€‚ å¦‚ä½•è®¾è®¡logçš„tagï¼Œæ‰ä¾¿äºè·Ÿè¸ªæŸä¸ªä¸šåŠ¡åœºæ™¯ä¸‹äº§ç”Ÿçš„é—®é¢˜ï¼Ÿ\n"
},
{
	"uri": "https://leverkusen188.github.io/swift/string_custom_format/",
	"title": "String è‡ªå®šä¹‰æ ¼å¼åŒ–",
	"tags": [],
	"description": "",
	"content": "æ¯”å¦‚ä¸€ä¸ªè‡ªå®šä¹‰ç»“æ„ï¼Œåœ¨æ‰“å°æ—¶ï¼ŒprintÂ ä¼šæŒ‰ç…§ Swift struct çš„é»˜è®¤æ ¼å¼æ‰“å°Â PersonÂ å€¼\nstruct Person { let name: String let place: String } print(\u0026#34;Hi, \\(Person(name: \u0026#34;Geralt\u0026#34;, place: \u0026#34;Rivia\u0026#34;))\u0026#34;) å¦‚æœè¦è‡ªå®šä¹‰Personçš„æ‰“å°ç»“æœï¼Œå¯ä»¥ æ‰©å±•String.StringInterpolationï¼Œæ ·ä¾‹ä»£ç ï¼š\nextension String.StringInterpolation { mutating func appendInterpolation(_ person: Person) { // è°ƒç”¨çš„ `appendLiteral(_ literal: String)` æ¥å— `String` å‚æ•° appendLiteral(\u0026#34;\\(person.name) of \\(person.place)\u0026#34;) } } è¿™æ ·ï¼Œæ‰“å°å‡ºæ¥çš„Personä¼šå˜æˆ\nprint(\u0026#34;Hi, \\(Person(name: \u0026#34;Geralt\u0026#34;, place: \u0026#34;Rivia\u0026#34;))\u0026#34;) Hi, Geralt of Rivia\n"
},
{
	"uri": "https://leverkusen188.github.io/xctest/stub_mock/",
	"title": "Stub å’Œ Mock",
	"tags": [],
	"description": "",
	"content": "Stub ç”¨åœ¨ä¿®æ”¹ æµ‹è¯•ä»£ç é‡Œå‡ºç°æ— æ³•é¢„æœŸå…¶è¡Œä¸ºï¼ˆæ¯”å¦‚è¿”å›æ•°æ®ï¼‰çš„ç›¸å…³å‡½æ•°æ—¶ï¼Œå°†è¯¥å‡½æ•°çš„è¿”å›å€¼ç”¨æ’æ¡©æ–¹å¼ä¿®æ”¹ä¸ºè‡ªå®šä¹‰çš„æ•°æ®ï¼ˆä¿®æ”¹æ–¹å¼å¯è‡ªå®šä¹‰ï¼Œæ¯”å¦‚ åœ¨è¾“å…¥å‚æ•°ä¸ºå¤šå°‘æ—¶ï¼Œæ‰è¿”å›å¯¹åº”çš„å­—å®šä¹‰æ•°æ®ï¼‰ï¼Œä»¥æ»¡è¶³æ•´å—ä»£ç çš„å•æµ‹éœ€è¦ã€‚\nä¸‹é¢æ˜¯ä¾‹å­è¯´æ˜ (stub å®ç°åŸºäº Kiwi æ¡†æ¶ https://github.com/kiwi-bdd/Kiwi)ï¼š\nåŠŸèƒ½æ˜¯æ¥æ”¶æ¸©åº¦å’Œæ¹¿åº¦å‚æ•°ï¼Œé€šè¿‡weatherForecaster çš„æ–¹æ³•è®¡ç®—å‡ºå¯¹åº”çš„ç»“æœï¼Œå¹¶å­˜å…¥æ•°æ®åº“ã€‚\nå‡è®¾ resultWithTemprature æ–¹æ³•æ˜¯æ— æ³•è¢«æµ‹è¯•çš„ï¼Œé‚£ä¹ˆæ•´å—ä»£ç é‡Œï¼Œå¯ä»¥æµ‹è¯•çš„æ˜¯ å†™å…¥æ•°æ®åº“çš„ä»£ç ï¼ˆwriteå‡½æ•°ï¼‰\n@class WeatherRecorder -(void) writeResultToDatabaseWithTemprature:(NSInteger)tempratureÂ humidity:(NSInteger)humidity { id result = [self.weatherForecaster resultWithTemprature:temprature humidity:humidity]; [self write:result]; } ä¸ºäº†ä¸å½±å“å•æµ‹ç”¨ä¾‹ï¼Œå¯ä»¥æ”¹å†™ resultWithTemprature çš„è¡Œä¸ºï¼Œè¿”å›è‡ªå®šä¹‰çš„ resultï¼Œæ¥æµ‹è¯•æ•°æ®åº“å†™å…¥ä»£ç ã€‚\n[weatherForecaster stub:@selector(resultWithTemprature:humidity:)Â andReturn:someResultÂ withArguments:theValue(23),theValue(50)]; mock å…¶å®å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒæ˜¯å¯¹ç°æœ‰ç±»çš„è¡Œä¸ºä¸€ç§æ¨¡æ‹Ÿï¼ˆæˆ–æ˜¯å¯¹ç°æœ‰æ¥å£å®ç°çš„æ¨¡æ‹Ÿï¼‰ï¼Œå®ƒæ˜¯ä¸€ç§æ›´å…¨é¢æ›´æ™ºèƒ½çš„ Stubã€‚\nä»¥ä¸Šé¢ä»£ç ä¸ºä¾‹ï¼Œåœ¨OCé‡Œï¼Œå®é™…ä¸Šå°±æ˜¯å°† weatherForecaster æ¢ä¸ºè‡ªå®šä¹‰çš„mockç±»ï¼Œä»è€Œä½¿ resultWithTemprature å‡½æ•°çš„è¡Œä¸ºæ˜¯æˆ‘ä»¬æµ‹è¯•éœ€è¦çš„ã€‚\næ ·ä¾‹ä»£ç ï¼š\nåˆ›å»º weatherForecaster çš„ mockå®ä¾‹ id weatherForecasterMock **=** [WeatherForecaster **mock**]; [[weatherForecasterMock **should**] **receive**:**@selector**(**resultWithTemprature**:humidity**:**)Â andReturn**:**someResultÂ withArguments**:**theValue(23),theValue(50)]; ç„¶åå°†WeatherRecorderçš„ weatherForecaster å±æ€§æ›¿æ¢ä¸ºè¯¥mockå®ä¾‹ [weatherRecorder stub:@selector(weatherForecaster) andReturn:weatherForecasterMock]; "
},
{
	"uri": "https://leverkusen188.github.io/swift/swift5.7_note/",
	"title": "Swift 5.7 note",
	"tags": [],
	"description": "",
	"content": "è¯‘è‡ª Swift 5.7: Optional Binding, Closure Type Inference, Clock, Noasync\nä»€ä¹ˆæ˜¯Swift Apple çš„swiftæ˜¯ä¸€ç§è¿è¡Œåœ¨ iOSï¼ŒMacOSï¼ŒWatchOSï¼ŒTvOSä»¥åŠ linuxä¸Šçš„ç¼–ç¨‹è¯­è¨€ã€‚\nSwiftæ˜¯ä¸€ç§å¯ç¼–è¯‘çš„è·‘åœ¨appleç›¸å…³äº§å“è®¾å¤‡ä»¥åŠç”µè„‘çš„ç±»linuxç³»ç»Ÿä¸Šçš„è¯­è¨€ã€‚è¿™äº›ç³»ç»Ÿä¸Šçš„åº”ç”¨å¯ä»¥ä½¿ç”¨cï¼Œc++ï¼ŒObjectiveCç­‰è¯­è¨€å’Œswift æ··åˆå¼€å‘ç¼–è¯‘è¿è¡Œã€‚\næˆ‘ä»¬å•¥æ—¶å¯ä»¥å¼€å§‹ä½¿ç”¨swift 5.7ï¼Ÿ æ ¹æ®æœ€æ–°æ¶ˆæ¯ï¼Œ5.7 å°†äºxcode14 ä»¥åŠ iOS SDK16 å¼€å§‹ä½¿ç”¨ã€‚\næ ¹æ®æœ€æ–°æ¶ˆæ¯ï¼Œswiftå°†æœ‰å“ªäº›æ–°çš„å˜åŒ–ï¼Ÿ æ ¹æ®ä»‹ç»ï¼Œæœ€ä¸»è¦çš„è®©å¼€å‘è€…ä»¬çš„å·¥ä½œå˜å¾—æ›´è½»æ¾çš„ç‚¹æœ‰ï¼Œå¢å¼ºå’Œç®€åŒ–äº†æœ€å¸¸ç”¨çš„å¼€å‘å·¥å…·æ¯”å¦‚ binding optionalè¯­æ³•ï¼›è¿˜æœ‰ä¸€äº›å¸¸ç”¨çš„è¡¨è¾¾å¼è¯­æ³•ä»¥åŠå¸¸ç”¨è¯­æ³•ã€‚\né€Ÿè®°ï¼šéšè—ä¸€ä¸ªç°æœ‰çš„optionalå˜é‡ ä»€ä¹ˆæ˜¯optionalå˜é‡ï¼Ÿ\noptionalå˜é‡åœ¨swifté‡Œå¯ä»¥èµ‹äºˆä¸€ä¸ªæœ‰æ•ˆçš„å€¼æˆ–å¯¹è±¡æˆ–æ˜¯ä¸€ä¸ªç©ºæŒ‡é’ˆã€‚\nä½œä¸ºä¸€ä¸ªiOSçš„swiftå¼€å‘è€…ï¼Œåœ¨ç¼–ç æ—¶è¦ç»å¸¸ä½¿ç”¨åˆ°optionalå˜é‡ï¼Œå®ƒå¯ä»¥å†³å®šå˜é‡/å®¹å™¨æ˜¯å¦å¯ä»¥èµ‹å€¼/åŒ…å« nilã€‚\nåœ¨ç¼–ç æ—¶æ£€æŸ¥ä¸€ä¸ªå˜é‡æ˜¯å¦æœ‰å€¼æ˜¯è·Ÿå‘¼å¸ä¸€æ ·é¢‘ç¹çš„äº‹ã€‚\nå°½ç®¡ä½¿ç”¨èµ·æ¥å·²ç»å¤Ÿç®€å•äº†ï¼Œä½†æ¯æ¬¡éƒ½è¦æŠŠå¾ˆé•¿çš„å˜é‡åé‡å†™ä¸€éè¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦ã€‚swift5.7 å°±åœ¨è¿™æ–¹é¢å¾ˆå¥½åœ°æ”¹è¿›äº†ç›¸å…³è¯­æ³•ã€‚\nä¹‹å‰çš„swift let colleageName : String? = \u0026#34;John\u0026#34; if let colleageName = colleageName { print(colleageName) } æœ‰æ—¶å˜é‡åè¿‡é•¿æ—¶ï¼Œæ¯æ¬¡é‡å†™å°±æœ‰ç‚¹ç¹çï¼Œæˆ–è€…æœ‰æ—¶å€™è¶…è¿‡äº†ä¸€è¡Œçš„å­—æ•°é™åˆ¶ã€‚\nä¸‹é¢çš„ä»£ç å°±æ˜¾å¾—ç‰¹åˆ«å†—é•¿è€Œä¸”å¯è¯»æ€§è¾ƒå·®\nlet colleageNameiohfahiefhaohgho : String? = \u0026#34;John\u0026#34; let colleageNameiohfahiefhaohgho2 : String? = \u0026#34;Bill\u0026#34; if let colleageNameiohfahiefhaohgho = colleageNameiohfahiefhaohgho, let colleageNameiohfahiefhaohgho2 = colleageNameiohfahiefhaohgho2 { print(\u0026#34;\\(colleageNameiohfahiefhaohgho) \\(colleageNameiohfahiefhaohgho2)\u0026#34;) } è€Œä¸”è¿™ä¼šå¯¼è‡´å˜é‡å‘½åè¶‹å‘äºç®€çŸ­ä¸”æè¿°æ€§å·®ã€‚\nè¿™ä¼šè®©å…¶ä»–å¼€å‘è€…æˆ–æ˜¯è‡ªå·±åœ¨æ¥ä¸‹æ¥çš„ç¼–ç ä¸­éš¾ä»¥ç†è§£è¿™äº›å˜é‡çš„çœŸæ­£æ„ä¹‰ã€‚\nlet colleageNameiohfahiefhaohgho : String? = \u0026#34;John\u0026#34; let colleageNameiohfahiefhaohgho2 : String? = \u0026#34;Bill\u0026#34; if let name1 = colleageNameiohfahiefhaohgho, let name2 = colleageNameiohfahiefhaohgho2 { print(\u0026#34;\\(name1) \\(name2)\u0026#34;) } åœ¨swift5.7é‡Œ ä¸Šè¿°åœºæ™¯çš„è¯­æ³•è¢«ç®€åŒ–å’Œæ”¹è¿›äº† let colleageName : String? = \u0026#34;John\u0026#34; if let colleageName { print(colleageName) } è€Œä¸”åœ¨å…¶ä»–çš„æ¡ä»¶æ§åˆ¶è¯­å¥é‡Œä¹Ÿå¯ä»¥ä½¿ç”¨\nif let foo { ... } if var foo { ... } else if let foo { ... } else if var foo { ... } guard let foo else { ... } guard var foo else { ... } while let foo { ... } while var foo { ... } ä½¿ç”¨é™åˆ¶ ä¸»è¦é™åˆ¶åœ¨äº ä¸èƒ½å¦‚æ­¤ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡çš„ optional å±æ€§ã€‚ class Animal { var name : String? = \u0026#34;dog\u0026#34; } let ani = Animal() if let name = ani.name { //ç¼–è¯‘æ­£ç¡® } if let ani.name { //ç¼–è¯‘âŒ } é—­åŒ…ç±»å‹çš„å¼•ç”¨ swiftç†è§£é—­åŒ…çš„èƒ½åŠ›å¤§å¤§å¢å¼ºäº†ï¼Œå½“é—­åŒ…è¿”å›ä¸€ä¸ªä¸å¯å˜çš„ç®€å•æ•°æ®ç±»å‹æ—¶ï¼Œswfitèƒ½å¾ˆè½»æ¾åœ°æ¨æ–­å‡ºè¿”å›çš„å…·ä½“ç±»å‹ã€‚ ä½†å¦‚æœé—­åŒ…è¯­æ³•å¤æ‚ä¸€äº›æ—¶ï¼Œæ¨æ–­èµ·æ¥å°±æ²¡é‚£ä¹ˆè½»æ¾äº†ã€‚\nåœ¨ä¸‹é¢çš„ä¾‹å­é‡Œï¼Œç”¨åˆ°äº†Stringçš„list let numbers = [1,2,3] let numberStrings = numbers.map {\u0026#34;\\($0)\u0026#34;} å¦‚æœæˆ‘ä»¬æŠŠé—­åŒ…æ”¹å¾—ç¨å¾®å¤æ‚ä¸€ç‚¹ï¼Œswiftä¼šæŠ›å‡ºä¸€ä¸ªç¼–è¯‘é”™è¯¯ï¼Œè¦æ±‚ä½ æ˜ç¡®æŒ‡å®šè¿”å›çš„ç±»å‹ã€‚\nlet numberString = [1,2,3].map { num in //ç¼–è¯‘âŒ let s = \u0026#34;1\u0026#34; return s } åœ¨swift5.7å‰ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé”™è¯¯ é™å®šé—­åŒ…çš„è¿”å›ç±»å‹ let numberString = [1,2,3].map { num -\u0026gt; String in let s = \u0026#34;1\u0026#34; return s } è®¾å®šæˆ‘ä»¬éœ€è¦mapå‡½æ•°è¿”å›çš„æ•°æ®ç±»å‹ let numberString : [String] = [1,2,3].map { num in let s = \u0026#34;1\u0026#34; return s } ä½†åœ¨swift5.7é‡Œï¼Œswiftçš„æ¨å¯¼ä¼šæ›´åŠ æ™ºèƒ½ï¼Œèƒ½æ­£ç¡®æ¨å¯¼å‡ºé—­åŒ…è¿”å›ç±»å‹ï¼Œå°±ä¸ä¼šæŠ¥é”™äº†ã€‚ let numberString = [1,2,3].map { num in //ç¼–è¯‘ok let s = \u0026#34;1\u0026#34; return s } Clock åè®® (SE-0329) åœ¨iOS16é‡Œï¼Œæ–°å¢äº†ä¸€ä¸ªClockåè®®ï¼Œå®ƒå£°æ˜äº†ä¸€å¥— æ—¶é—´å’Œæ—¶é—´æ®µçš„æ ‡å‡†åŒ–æ¥å£ï¼Œå¯ä»¥ç”¨æ¥è¡¨è¾¾æ—¶é•¿ï¼Œä¹Ÿèƒ½ç”¨æ¥åšå®šæ—¶çš„å»¶æ—¶å·¥ä½œã€‚\nå®ƒåŒ…å«ä¸‰ä¸ªä¸»è¦éƒ¨åˆ†\nClocks: ä½œä¸ºæ—¶é•¿çš„ä¸ˆé‡æ–¹æ³•ï¼Œå¯ç”¨æ¥è®¾å®šå»¶è¿Ÿæˆ–æ˜¯å½“å‰æ—¶é—´æˆ³ï¼Œå®ƒç”±ä¸¤ä¸ªå†…ç½®æ¨¡å—ç»„æˆ\nContinuousClock: ä¸€ç§ç”¨æ¥ä¸ˆé‡æ—¶é•¿çš„Clockï¼Œå®ƒä¼šä¸€ç›´ä¸åœé€’å¢ï¼Œç”šè‡³åœ¨ç³»ç»Ÿç¡çœ æ—¶ä¹Ÿä¸ä¼šåœã€‚ SuspendingClock: è·Ÿä¸Šé¢çš„ä¸åŒä¹‹å¤„åœ¨äº ç³»ç»Ÿç¡çœ æ—¶å®ƒä¼šæš‚åœã€‚ Instantsï¼š ä»£è¡¨ä¸€ä¸ªç¡®å®šçš„æ—¶é—´ç‚¹\nDurationsï¼šä»£è¡¨ä¸¤ä¸ªclockå®ä¾‹é—´ç›¸å·®å¤šå°‘æ—¶é•¿\ntry await Task.sleep(until: .now + .seconds(1), clock: .continuous) tolerance å‚æ•°ç”¨æ¥å¤„ç†æ€§èƒ½ç›¸å…³äº‹é¡¹ï¼ŒClockå¯ä»¥ç”¨ä¸€ä¸ªè®¾å®šçš„é‡æ–°è®¾å®šä¸€ä¸ªæœªæ¥ä»»åŠ¡çš„å‘ç”Ÿæ—¶é—´ã€‚ å¦‚æœæ²¡è®¾ç½® tolerance å‚æ•°ï¼Œé‚£ä¹ˆä¼šæœ‰ä¸ªé»˜è®¤å€¼è¢«è®¾ç½®ä¸Šå»ã€‚\ntry await Task.sleep(until: .now + .seconds(1), tolerance: .seconds(0.5), clock: .continuous) ä¹Ÿå¯ä»¥ç”¨clockå»è®¡ç®—ä¸€ä¸ªAPIçš„æ‰§è¡Œæ—¶é—´ã€‚\n@available(iOS 16.0, *) let clock = ContinuousClock() let time = clock.measure { // complex work here } print(\u0026#34;Took \\(time.components.seconds) seconds\u0026#34;) ç¦ç”¨Asyncï¼ˆå¼‚æ­¥ï¼‰åŠŸèƒ½ (SE-0340) æ–°å¢äº†ä¸€ç§åœ¨swifté‡Œçš„å¤šä»»åŠ¡å¹¶è¡Œæ‰§è¡Œåœºæ™¯çš„ä¿æŠ¤æ‰‹æ®µã€‚ç°åœ¨å¯ä»¥å°†ç±»å‹æˆ–æ˜¯å‡½æ•°æ ‡è¯†ä¸ºä¸æ”¯æŒå¼‚æ­¥è°ƒç”¨æ“ä½œã€‚\n@available å¯ä»¥ç”¨æ¥æ ‡è¯†ç±»å‹æˆ–å‡½æ•°çš„æ”¯æŒåŠŸèƒ½æˆ–ç‰ˆæœ¬ï¼Œä½†ç”¨æ–°å¢çš„ noasync æ¥æ ‡è¯†çš„è¯ã€‚\n@available(*, noasync) func doRiskyWork() { } è™½ç„¶æˆ‘ä»¬è¿˜æ˜¯å¯ä»¥åƒå¾€å¸¸ä¸€æ ·ç›´æ¥è°ƒç”¨è¯¥å‡½æ•°ï¼Œä½†å¦‚æœåœ¨æ ‡æ˜ä¸º async çš„å¼‚æ­¥æ–¹æ³•é‡Œä½¿ç”¨å®ƒçš„è¯ï¼Œxcodeä¼šæŠ›ä¸€ä¸ªwarningï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸æ­£ç¡®çš„è°ƒç”¨æ–¹å¼ã€‚\nfunc sssync() async { doRiskyWork() //Instance method \u0026#39;doRiskyWork\u0026#39; is unavailable from asynchronous contexts; this is an error in Swift 6 } ä½†åªèƒ½ç”¨äºç›´æ¥è°ƒç”¨æ ‡è¯†ä¸º noasync å‡½æ•°çš„åœºæ™¯ï¼Œå¦‚æœåµŒå¥—å¤šä¸€å±‚ï¼Œxcodeå°±ä¸ä¼šæŠ›warningäº†ï¼Œä½†å®é™…ä½¿ç”¨ä¸­è¿˜æ˜¯å¯èƒ½å‡ºé—®é¢˜ï¼Œéœ€è¦æ³¨æ„è¿™ç‚¹ã€‚\n@available(*, noasync) func doRiskyWork() { } func sssync() async { doRiskyWork() //æœ‰warning } func sssync1() async { await sssync() //æ— warning } ç»“è®º swfit5.7 è¿˜æœ‰å¾ˆå¤šæ›´æ–°åœ¨è¿™ç¯‡æ–‡ç« é‡Œæ²¡æœ‰åˆ—å‡ºæ¥ã€‚æ¯”å¦‚ä¸€äº›åŠŸèƒ½å¼ºå¤§çš„API pointer API , Swift regex, opaques result type, distributed actors, many others.\nåœ¨è¿™äº›æ›´æ–°ç‚¹çš„æ”¯æŒä¸‹ï¼Œæä¾›äº†å¤§é‡çš„æ–°åŠŸèƒ½ï¼Œä½†åŒæ—¶ä¹Ÿæ·˜æ±°äº†æ­£åœ¨ä½¿ç”¨çš„ä¸€äº›æ–¹æ³•ã€‚ä¸è¿‡æˆ‘åšä¿¡å®ƒä»¬èƒ½è®©å¼€å‘çš„ä»£ç è´¨é‡æ›´å¥½ï¼ŒåŒæ—¶ä¹Ÿè®©swift å˜å¾—æ›´åŠ å¯é ã€‚\n"
},
{
	"uri": "https://leverkusen188.github.io/swift/swift5.7_note_unsafepointer/",
	"title": "Swift 5.7 note (Pointer åŠŸèƒ½åŠ å¼º)",
	"tags": [],
	"description": "",
	"content": "è¯‘è‡ª Swift 5.7: Pointer API Usability Improvements\nç®€ä»‹ è¿™ç¯‡æ–‡ç« ä»‹ç»äº†UnsafePointer ä»¥åŠå®ƒçš„ Mutable å’Œ Raw å˜ç§çš„å¼ºå¤§ä¸”å®ç”¨çš„æ”¹è¿›ç»†èŠ‚ã€‚\næ–°å¢äº†ä¸€ä¸ªå¯ä»¥è·å– æŒ‡å®šalignmentï¼ˆä½ç§»ï¼‰çš„UnsafePointer æŒ‡é’ˆçš„æ¥å£ã€‚ æ–°å¢äº†ä¸€ä¸ªå¯ä»¥è·å–ç»™å®š UnsafePointer\u0026lt;T\u0026gt; é‡Œï¼ŒTçš„æŒ‡å®šå±æ€§æŒ‡é’ˆçš„æ¥å£ã€‚ å¯ä»¥compare ä¸¤ä¸ªä¸åŒç±»å‹çš„æŒ‡é’ˆäº†ã€‚ èµ·å› (To Be Continued) æ¯æ¬¡æˆ‘ä»¬å®ç”¨ UnsafePointer ä»¥åŠå®ƒçš„æ‰©å±•å˜ç§æ—¶ï¼Œéƒ½ä¼šç¢°åˆ°å¾ˆå¤šè·Ÿè¿™äº›ç±»å‹çš„ä¸å®‰å…¨æ€§æ— å…³çš„å›°éš¾å’Œéº»çƒ¦ã€‚åœ¨ä¸ç”¨éšè—è¿™äº›ä¸å®‰å…¨æ€§çš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ”¹è¿›è¿™äº›ç±»å‹çš„å·¥ä½œæ•ˆç‡ã€‚\nä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä½ æƒ³è¦\n"
},
{
	"uri": "https://leverkusen188.github.io/swift/swift_dynamicmemberlookup/",
	"title": "Swift dynamicMemberLookup",
	"tags": [],
	"description": "",
	"content": " ç±»æˆ–æ˜¯structå£°æ˜ä¸º @dynamicMemberLookup åï¼Œå¹¶å®ç° subscript(dynamicMember:), å°±å¯ä»¥ç”¨å¸¦ ç‚¹çš„è¯­æ³•æ¥è®¿é—®å¯¹åº”çš„æ•°æ®äº†ã€‚\nå®ç°dynamicMemberLookup çš„ç±»ï¼š @dynamicMemberLookup class TestData\u0026lt;Value\u0026gt; { var value : Value var name : String init(_ v : Value, name : String) { self.value = v self.name = name } //subscript(dynamicMember:) åªèƒ½ç”¨ String æˆ– KeyPath ä½œä¸ºå‚æ•° subscript(dynamicMember pro : String) -\u0026gt; Bool { return true } subscript\u0026lt;T\u0026gt;(dynamicMember key : KeyPath\u0026lt;Value, T\u0026gt;) -\u0026gt; T { value[keyPath: key] } } ä½¿ç”¨æ–¹æ³• //ä½¿ç”¨å¸¦ç‚¹è¯­æ³•è®¿é—®æ•°æ®æ—¶æœ‰ä¼˜å…ˆçº§ let data = TestData(\u0026#34;b\u0026#34;, name: \u0026#34;hahaâ€) //Value æ³›å‹æ¨å¯¼ä¸º â€œbâ€çš„ç±»å‹ï¼Œä¹Ÿå°±æ˜¯String //ä¼˜å…ˆçº§1: è®¿é—®å·²æœ‰çš„å±æ€§ï¼Œæ¯”å¦‚ TestData çš„nameå±æ€§ã€‚ let name = data.name //ä¼˜å…ˆçº§2: è®¿é—® keypathå¯¹åº”çš„ Valueç±»å‹æ‰€æ‹¥æœ‰çš„å±æ€§ã€‚ è¿™é‡ŒValueæ˜¯Stringï¼Œé‚£ä¹ˆcount è®¿é—®çš„å°±æ˜¯ value.count let count = data.count //å€¼ä¸º1 //ä¼˜å…ˆçº§3: è®¿é—® Stringç±»å‹å‚æ•°çš„subscript let value = data.haha //è¿”å› true æ€»ç»“ï¼š dynamicMemberLookup æ˜¯å¦å®‰å…¨ï¼Ÿ æ˜¯å®‰å…¨çš„ã€‚ å¦‚æœç”¨String æ¥è®¿é—®ï¼Œé‚£ä¹ˆåœ¨å®ç°çš„ subscript é‡Œç¡®ä¿äº†è¿”å›æ•°æ®æ˜¯å®‰å…¨çš„ã€‚ å¦‚æœç”¨keyPath è®¿é—®ï¼Œä¸å­˜åœ¨çš„keyPath æ— æ³•é€šè¿‡ç¼–è¯‘ã€‚\nå¯ä»¥å£°æ˜å¤šä¸ª ç›¸åŒå‚æ•°ç±»å‹ï¼Œä½†ä¸åŒè¿”å›å€¼çš„subscriptã€‚ç¼–è¯‘æ—¶é€šè¿‡è¿”å›å€¼æ¥åŒºåˆ†è°ƒç”¨å“ªä¸ªsubscript let b : Bool = data.haha let c : String = data.haha\nä¸èƒ½ç»™å·²æœ‰ç±»å’Œç»“æ„æ·»åŠ  dynamicMemberLookup åŠŸèƒ½\n"
},
{
	"uri": "https://leverkusen188.github.io/swift/swift-keypath/",
	"title": "Swift Keypath",
	"tags": [],
	"description": "",
	"content": "è¯‘è‡ª The power of key path in Swift\nSwift æœ€åˆçš„è®¾è®¡å°±ä¸“æ³¨äºç¼–è¯‘æœŸå°½é‡ä¿è¯ç¨‹åºè¿è¡Œå®‰å…¨ ä»¥åŠ é™æ€ç±»å‹åŒ¹é…ï¼Œå› æ­¤å®ƒæ¯”è¾ƒç¼ºä¹ç±»ä¼¼ OCï¼ŒJavascript å’Œrubyç­‰è¿è¡Œæ—¶è¯­è¨€çš„åŠ¨æ€ç‰¹æ€§ã€‚æ¯”å¦‚ï¼Œåœ¨OCé‡Œï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€è®¿é—®ç±»å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ï¼Œç”šè‡³æ”¹å˜æ–¹æ³•çš„å®ç°ã€‚\nä½†è¿™äº›åŠ¨æ€ç‰¹æ€§çš„ç¼ºä¹æ­£è¡¨ç°å‡ºSwiftçš„ä¼Ÿå¤§ï¼Œå®ƒèƒ½ä¿è¯æˆ‘ä»¬å†™å‡ºçš„ç¨‹åºè¿è¡Œç»“æœæ›´åŠ å¯é¢„æ–™ï¼Œä¸”æ›´å¯èƒ½è¿è¡Œä¸å‡ºé”™ã€‚ä¸è¿‡æœ‰æ—¶å€™æˆ‘ä»¬çš„ä»£ç èƒ½æ‹¥æœ‰ä¸€äº›åŠ¨æ€ç‰¹æ€§ä¹Ÿæ˜¯å¾ˆæœ‰å¸®åŠ©çš„ã€‚\nè°¢å¤©è°¢åœ°ï¼Œéšç€ç‰ˆæœ¬æ›´æ–°ï¼ŒSwift å¼€å§‹æ‹¥æœ‰æ›´å¤šçš„åŠ¨æ€ç‰¹æ€§ï¼Œä½†å´ä¾ç„¶ä¿æŒç€é™æ€å®‰å…¨ç±»å‹ç‰¹æ€§ã€‚å…¶ä¸­ä¸€ç§æ–°ç‰¹æ€§å°±æ˜¯KeyPathã€‚æœ¬å‘¨ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹KeyPathåœ¨Swiftä¸­æ˜¯å¦‚ä½•è¿ä½œçš„ï¼Œä»¥åŠæˆ‘ä»¬èƒ½ç”¨å®ƒæ¥å®ç°å“ªäº›å¼ºå¤§çš„åŠŸèƒ½ã€‚\nåŸºç¡€ KeyPath æœ¬è´¨ä¸Šè®©æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªå€¼æ¥å¼•ç”¨ä»»æ„å¯¹è±¡çš„ç‰¹å®šå±æ€§ã€‚åƒè¿™æ ·ï¼Œå®ƒå¯ä»¥è¢«åˆ°å¤„ä¼ é€’å¼•ç”¨ï¼Œåœ¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨ï¼Œç”šè‡³å¯ä»¥åœ¨ä¸ç”¨çŸ¥é“å®ƒæ˜¯å“ªä¸ªç±»çš„å±æ€§æ—¶ï¼Œå¯¹å®ƒè¿›è¡Œset å’Œget æ“ä½œã€‚\nKeyPathä¸€èˆ¬æœ‰ä¸‰ç§ç±»å‹ï¼š\nKeyPathï¼šæä¾›åªè¯»çš„å±æ€§è®¿é—® WritableKeyPath: é€šè¿‡ç‰¹å®šè¯­æ³•ï¼Œæä¾›æŸä¸ªå¯¹è±¡çš„å¯å˜æ›´å±æ€§çš„è¯»å†™æƒé™ã€‚ï¼ˆè¯¥å¯¹è±¡å¿…é¡»æ˜¯å¯ä¿®æ”¹çš„ï¼‰ ReferenceWritableKeyPath: åªèƒ½å¯¹å¯å¼•ç”¨çš„ç±»å‹ä½¿ç”¨ï¼Œæ¯”å¦‚ç±»çš„å¯¹è±¡å®ä¾‹ã€‚åŒä¸Šï¼Œæä¾›è¯¥å¯¹è±¡çš„æŸä¸ªå¯ä¿®æ”¹çš„å±æ€§çš„è¯»å†™æƒé™ã€‚ è¿˜æœ‰ä¸€äº›å…¶ä»–çš„keyPathç±»å‹ï¼Œç”¨æ¥å‡å°‘ä»£ç é‡å¤æ€§ï¼ŒåŒæ—¶ç§»é™¤ç±»å‹é™åˆ¶ã€‚ä¸è¿‡æˆ‘ä»¬æš‚æ—¶åªå…³æ³¨ä¸»è¦çš„è¿™å‡ ä¸ªç±»å‹ã€‚\nè®©æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨KeyPathï¼Œä»¥åŠä¸ºä»€ä¹ˆå®ƒè¿™ä¹ˆæœ‰è¶£åˆåŠŸèƒ½å¼ºå¤§ã€‚\nåŠŸèƒ½é€Ÿè®° æ¯”å¦‚è¯´æˆ‘ä»¬è¦å¼€å‘ä¸€ä¸ª è®©ç”¨æˆ·å¯ä»¥ä»å„ç§Webä¸Šé˜…è¯»æ–‡ç« çš„Appï¼Œå¯ä»¥è®¾è®¡ä¸€ä¸ªArticle æ•°æ®æ¨¡å‹æ¥è¡¨ç¤ºä¸€ç¯‡æ–‡ç« ï¼Œåƒè¿™æ ·ï¼š\nstruct Article { let id: UUID let source: URL let title: String let body: String } å½“æˆ‘ä»¬ä½¿ç”¨è¿™ç§æ•°æ®æ¨¡å‹çš„æ•°ç»„æ—¶ï¼Œç»å¸¸éœ€è¦ä»ç±»é‡Œæ‘˜å–å•ä¸€å±æ€§å‡ºæ¥é‡æ–°ç”Ÿæˆä¸€ä¸ªæ–°çš„æ•°æ®æ•°ç»„ã€‚æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰id å’Œsourceæ•°æ®æ‹¿å‡ºæ¥ç”Ÿæˆæ–°çš„æ•°æ®æ•°ç»„ã€‚\nlet articleIDs = articles.map { $0.id } let articleSources = articles.map { $0.source } å½“æˆ‘ä»¬åªéœ€è¦ä½¿ç”¨åˆ°ä¸€ä¸ªå±æ€§æ•°æ®æ—¶ï¼Œä¸Šé¢çš„ä»£ç æ˜¯okçš„ã€‚ä½†å…¶å®æˆ‘ä»¬ä¸éœ€è¦ä½¿ç”¨åˆ°é—­åŒ…çš„æ‰€æœ‰åŠŸèƒ½ï¼Œè¿™æ—¶å€™ä½¿ç”¨keypath å°±æ˜¯æ¯”è¾ƒåˆé€‚çš„é€‰æ‹©äº†ã€‚\næˆ‘ä»¬å¯ä»¥é‡è½½Sequence çš„map æ–¹æ³•ï¼Œè®©å®ƒä½¿ç”¨ä¸€ä¸ªkeypathæ¥æ›¿ä»£ä¹‹å‰çš„é—­åŒ…ä½œä¸ºå‚æ•°ã€‚åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘ä»¬åªå¯¹åªè¯»å±æ€§æ•°æ®æ„Ÿå…´è¶£ï¼Œå› æ­¤ä½¿ç”¨KeyPath ç±»å‹å³å¯ã€‚ä½¿ç”¨ä¼ å…¥çš„KeyPath æ¥ç”Ÿæˆæ•°æ®è¿”å›ï¼Œå°±åƒä¸‹é¢è¿™æ ·ï¼š\nextension Sequence { func map\u0026lt;T\u0026gt;(_ keyPath: KeyPath\u0026lt;Element, T\u0026gt;) -\u0026gt; [T] { return map { $0[keyPath: keyPath] } } } æ³¨æ„ï¼šSwift 5.2 ä»¥ä¸Šçš„Sequence mapå‡½æ•°å·²ç»æ”¯æŒç”¨KeyPathä½œä¸ºå‚æ•°äº†ã€‚automatically converted into functions.\nä½¿ç”¨ä¸Šé¢çš„æ‰©å±•æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å°†å¯¹è±¡çš„å•ä¸€ä»»æ„å±æ€§ä»æ•°ç»„é‡Œæˆªå–å‡ºæ¥ï¼Œä¸Šé¢çš„ä¾‹å­ä»£ç å¯ä»¥ä¿®æ”¹ä¸ºï¼š\nlet articleIDs = articles.map(\\.id) let articleSources = articles.map(\\.source) è¿™å¾ˆcoolï¼Œä½†keypathçœŸæ­£çš„å¼ºå¤§ä¹‹å¤„æˆ‘ä»¬å¯ä»¥ç”¨æ›´å¤æ‚ä¸€ç‚¹çš„è¡¨è¾¾å¼ä½“ç°å‡ºæ¥ï¼Œæ¯”å¦‚å°†æ•°ç»„è¿›è¡Œæ’åºã€‚\næ ‡å‡†åº“å·²ç»å¯ä»¥å°†ä»»æ„å¸¦æœ‰Sortable å…ƒç´ çš„åºåˆ—è¿›è¡Œæ’åºäº†ï¼Œä½†æ˜¯å¯¹äºæ‰€æœ‰ç±»å‹ï¼Œæˆ‘ä»¬éƒ½å¿…é¡»å®ç°è‡ªå·±çš„æ’åºé—­åŒ…ã€‚ç„¶è€Œï¼Œä½¿ç”¨keypathï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾ˆç®€å•åœ°ä½¿ç”¨æ•°ç»„å…ƒç´ çš„Comparableç±»å‹keypathæ¥è¿›è¡Œæ’åºäº†ã€‚åƒä¸Šé¢åšçš„é‚£æ ·ï¼Œæˆ‘ä»¬ç»™Sequenceæ–°å¢ä¸€ä¸ªæ‰©å±•æ–¹æ³•ï¼Œå°†ä¼ å…¥çš„keypath è½¬æ¢æˆæ’åºé—­åŒ…è¿”å›ã€‚\nextension Sequence { func sorted\u0026lt;T: Comparable\u0026gt;(by keyPath: KeyPath\u0026lt;Element, T\u0026gt;) -\u0026gt; [Element] { return sorted { a, b in return a[keyPath: keyPath] \u0026lt; b[keyPath: keyPath] } } } ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æŒ‡å®šçš„keypathæ¥æ›´å¿«é€Ÿå’Œæ–¹ä¾¿åœ°å¯¹ä¸€ä¸ªåºåˆ—è¿›è¡Œæ’åºäº†ã€‚å¦‚æœæˆ‘ä»¬è¦å¼€å‘ä¸€ä¸ª ä½¿ç”¨å¯æ’åºæ•°æ®åˆ—è¡¨çš„appï¼Œæ¯”å¦‚ä¸€ä¸ªå¸¦æ’­æ”¾åˆ—è¡¨çš„éŸ³ä¹appï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ä»»ä½•å¯æ¯”è¾ƒçš„å±æ€§æ¥å¯¹æ’­æ”¾åˆ—è¡¨è¿›è¡Œæ’åºï¼Œç”šè‡³å¯ä»¥ä½¿ç”¨åµŒå¥—çš„å¤šå±‚å±æ€§ã€‚\nplaylist.songs.sorted(by: \\.name) playlist.songs.sorted(by: \\.dateAdded) playlist.songs.sorted(by: \\.ratings.worldWide) åƒä¸Šé¢é‚£æ ·çš„ä»£ç å°±åƒæ–°å¢äº†ä¸€ä¸ªè¯­æ³•ç³–ï¼Œå¯¹ä»»æ„å±æ€§éƒ½èƒ½ä½¿ç”¨åŒæ ·çš„æ’åºä»£ç ï¼Œä¸ä½†èƒ½è®©å¤„ç†åºåˆ—çš„å¤æ‚ä»£ç çš„å¯è¯»æ€§å˜å¾—æ›´é«˜ï¼Œä¹Ÿèƒ½å‡å°‘é‡å¤ä»£ç ã€‚\nä¸éœ€è¦å¯¹è±¡å®ä¾‹äº† é€‚é‡çš„è¯­æ³•ç³–è¿˜æ˜¯å¾ˆæ£’çš„ã€‚keypathçš„çœŸæ­£å¼ºå¤§ä¹‹å¤„åœ¨äºæˆ‘ä»¬å¯ä»¥å¼•ç”¨ä»»æ„å±æ€§å´ä¸ç”¨å…³å¿ƒå®ƒæ‰€å±çš„å¯¹è±¡å®ä¾‹ã€‚å›åˆ°ä¸Šé¢æ‰€è¯´çš„éŸ³ä¹ä¸»é¢˜ï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬å¼€å‘çš„appè¦æ˜¾ç¤ºä¸€ä¸ªéŸ³ä¹åˆ—è¡¨ï¼Œéœ€è¦ä¸ºä¸€é¦–éŸ³ä¹é…ç½®ä¸€ä¸ªUITableViewCellï¼Œæˆ‘ä»¬å¯ä»¥å®šä¸€ä¸ªé…ç½®ä¿¡æ¯å¦‚ä¸‹ï¼š\nstruct SongCellConfigurator { func configure(_ cell: UITableViewCell, for song: Song) { cell.textLabel?.text = song.name cell.detailTextLabel?.text = song.artistName cell.imageView?.image = song.albumArtwork } } ä½ å¯ä»¥ä»ä¸‹é¢çš„ç½‘ç«™äº†è§£åˆ°æ›´å¤šå…³äºä¸ºè§†å›¾å®šä¹‰é…ç½®ä¿¡æ¯çš„çŸ¥è¯† \u0026ldquo;Preventing views from being model aware in Swift\u0026rdquo;.\nä¸Šé¢ä»£ç æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æœ‰å¾ˆé«˜çš„å‡ ç‡æˆ‘ä»¬è¿˜è¦ç”¨åŒæ ·çš„é£æ ¼æ¥æ¸²æŸ“æ•°æ®æ¨¡å‹ï¼ˆtableviewç»å¸¸è¦æ˜¾ç¤ºåŒ…å«æ ‡é¢˜ï¼Œå‰¯æ ‡é¢˜ä»¥åŠå›¾ç‰‡ï¼Œæ— è®ºå®ƒä½¿ç”¨çš„æ˜¯ä»€ä¹ˆç±»å‹çš„æ•°æ®æ¨¡å‹ï¼‰æˆ‘ä»¬æ¥çœ‹çœ‹æ˜¯å¦å¯ä»¥ç”¨keypathæ¥åˆ›å»ºä¸€å¥—é€šç”¨é…ç½®ï¼Œæ— è®ºä»€ä¹ˆç±»å‹çš„æ•°æ®æ¨¡å‹éƒ½èƒ½ä½¿ç”¨ã€‚\nå…ˆåˆ›å»ºä¸€ä¸ªå« CellConfigurator çš„æ³›å‹ç±»å‹ï¼Œå½“æˆ‘ä»¬éœ€è¦ä¸ºä¸åŒçš„æ•°æ®æ¨¡å‹æ¸²æŸ“ä¸åŒçš„æ•°æ®æ—¶ï¼Œå¯ä»¥å®šä¹‰ä¸€ç»„åŸºäºkeypathç±»å‹çš„å±æ€§ï¼Œæ¯ä¸€ä¸ªå±æ€§å¯¹åº”ä¸€ä¸ªéœ€è¦æ¸²æŸ“çš„æ•°æ®ã€‚\nstruct CellConfigurator\u0026lt;Model\u0026gt; { let titleKeyPath: KeyPath\u0026lt;Model, String\u0026gt; let subtitleKeyPath: KeyPath\u0026lt;Model, String\u0026gt; let imageKeyPath: KeyPath\u0026lt;Model, UIImage?\u0026gt; func configure(_ cell: UITableViewCell, for model: Model) { cell.textLabel?.text = model[keyPath: titleKeyPath] cell.detailTextLabel?.text = model[keyPath: subtitleKeyPath] cell.imageView?.image = model[keyPath: imageKeyPath] } } ä¸Šé¢æ–¹æ³•çš„ç¾å¦™ä¹‹å¤„åœ¨äºæˆ‘ä»¬å¯ä»¥å¾ˆç®€å•åœ°ä¸ºæ¯ä¸ªæ•°æ®æ¨¡å‹è®¾å®šä¸€ä¸ªæ³›å‹CellConfiguratorï¼Œåªè¦ä½¿ç”¨keypathå°±å¯ä»¥è¾¾åˆ°ç›®çš„ã€‚å°±åƒè¿™æ ·ï¼š\nlet songCellConfigurator = CellConfigurator\u0026lt;Song\u0026gt;( titleKeyPath: \\.name, subtitleKeyPath: \\.artistName, imageKeyPath: \\.albumArtwork ) let playlistCellConfigurator = CellConfigurator\u0026lt;Playlist\u0026gt;( titleKeyPath: \\.title, subtitleKeyPath: \\.authorName, imageKeyPath: \\.artwork ) æˆ‘ä»¬å¯ä»¥ç”¨é—­åŒ…æ¥åˆ›å»ºCellConfiguratorï¼Œå°±åƒåŸºç¡€åº“é‡Œçš„åŠŸèƒ½æ€§å‡½æ•° sort å’Œ mapæ–¹æ³•ä¸€æ ·ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨keypathæ¥å®ç°ä¼˜ç¾çš„è¯­æ³•ï¼Œæˆ‘ä»¬ä¹Ÿä¸ç”¨ç¼–å†™ç‰¹å®šçš„ä»£ç æ¥ä¸æ•°æ®æ¨¡å‹å®ä¾‹ç›´æ¥æ‰“äº¤é“äº†ï¼Œä¹Ÿè®©è¿™äº›é…ç½®å£°æ˜æ›´åŠ ç®€å•å’Œæ˜“æ‡‚ã€‚\nè½¬æ¢ä¸ºå‡½æ•° åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬åªç”¨äº†keypathæ¥è¯»å–æ•°æ®ï¼Œç°åœ¨æ¥çœ‹çœ‹æˆ‘ä»¬æ€ä¹ˆä½¿ç”¨keypathæ¥åŠ¨æ€å†™å…¥æ•°æ®ã€‚åœ¨å„ç§å¼€æºä»£ç é‡Œæœ€å¸¸è§çš„å°±åƒä¸‹é¢çš„ä¾‹å­ - æˆ‘ä»¬åœ¨ListViewControlleré‡ŒåŠ è½½æ¸²æŸ“ä¸€ä¸ªç‰©å“åˆ—è¡¨ï¼Œå½“åŠ è½½å·¥ä½œå®Œæˆæ—¶ï¼Œæˆ‘ä»¬å°†ç›¸å…³æ•°æ®è®¾ç½®ç»™ViewControllerçš„ä¸€ä¸ªå±æ€§ã€‚\nclass ListViewController { private var items = [Item]() { didSet { render() } } func loadItems() { loader.load { [weak self] items in self?.items = items } } } æˆ‘ä»¬æ¥çœ‹çœ‹keypathæ˜¯å¦å¯ä»¥è®©ä¸Šé¢çš„è¯­æ³•æ›´åŠ ç®€å•ï¼Œæˆ‘ä»¬æ˜¯å¦å¯ä»¥å°† weak selfè¿™ç§ç»å¸¸è¦æ‰‹åŠ¨å®ç°çš„ä¸œè¥¿ç»™ç§»é™¤æ‰ï¼ˆä½¿ç”¨weak self ä¸»è¦æ˜¯ä¸ºäº†é¿å…å¾ªç¯å¼•ç”¨ï¼‰ã€‚\næˆ‘ä»¬éœ€è¦åšçš„æ˜¯å°†ä¼ ç»™æˆ‘ä»¬å®ç°çš„é—­åŒ…çš„æ•°æ®è®¾ç½®ç»™ViewControllerçš„ä¸€ä¸ªå±æ€§ã€‚å¦‚æœæˆ‘ä»¬å¯ä»¥ä¸ºè¿™ä¸ªå±æ€§ä¼ é€’ä¸€ä¸ªsetterå‡½æ•°ï¼Œé‚£æ˜¯ä¸æ˜¯å°±æ›´é…·äº†ï¼Ÿæ–¹æ³•æ˜¯æˆ‘ä»¬loadå‡½æ•°ç›´æ¥ä¼ å…¥ä¸€ä¸ªå‡½æ•°ä½œä¸ºå›è°ƒå¤„ç†ï¼Œè¿™æ ·å°±è¡Œçš„é€šäº†ã€‚\nè¦å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªå¯ä»¥å°†ä¼ å…¥çš„å¯å†™keypathè½¬æ¢æˆ ä¸ºè¿™ä¸ªkeypathè®¾å®šæ•°æ®çš„é—­åŒ…çš„å‡½æ•°ã€‚è¿™æ¬¡æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ ReferenceWritableKeyPath ç±»å‹ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦é™å®šåªå¯¹å¯å¼•ç”¨ç±»å‹æ¥ä½¿ç”¨ï¼ˆä¸ç„¶çš„è¯æˆ‘ä»¬æ”¹å˜çš„æ˜¯å®ä¾‹æ•°æ®çš„æ‹·è´è€Œä¸æ˜¯å®ä¾‹æœ¬èº«ï¼‰ã€‚ä¼ å…¥å¯¹è±¡å®ä¾‹å’Œå®ä¾‹çš„å±æ€§keypathåï¼Œå°±å¯ä»¥è‡ªåŠ¨å°†å®ä¾‹æ•è·ä¸ºweakå¼•ç”¨ï¼Œå¹¶åœ¨è°ƒç”¨è¿”å›çš„é—­åŒ…åæ›´æ”¹keypathå¯¹åº”çš„å±æ€§ - å°±åƒè¿™æ ·ï¼š\nfunc setter\u0026lt;Object: AnyObject, Value\u0026gt;( for object: Object, keyPath: ReferenceWritableKeyPath\u0026lt;Object, Value\u0026gt; ) -\u0026gt; (Value) -\u0026gt; Void { return { [weak object] value in object?[keyPath: keyPath] = value } } ç”¨ä¸Šé¢çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†ä¹‹å‰çš„ä»£ç ç®€åŒ–ï¼Œå»æ‰weak selfçš„è¯­æ³•ï¼Œæœ€ç»ˆå¾—åˆ°çœ‹ä¸Šå»æ›´å¹²å‡€çš„ä»£ç ã€‚\nclass ListViewController { private var items = [Item]() { didSet { render() } } func loadItems() { loader.load(then: setter(for: self, keyPath: \\.items)) } } å¤ªé…·äº†ï¼å¦‚æœæˆ‘ä»¬å°†å®ƒåº”ç”¨åœ¨è¿›é˜¶çš„åŠŸèƒ½é‡Œï¼Œæ¯”å¦‚å‡½æ•°ç»„åˆï¼Œé‚£å°±æ›´é…·äº†ï¼Œæ¯”å¦‚æˆ‘ä»¬å¯ä»¥å°†å¤šä¸ªsetterå’Œå…¶ä»–å‡½æ•°ç»‘å®šåœ¨ä¸€èµ·ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šæ›´æ·±å…¥åœ°æ¢è®¨keypathåŠŸèƒ½ï¼Œå‡½æ•°ç»„åˆå°†æ˜¯æ¥ä¸‹æ¥çš„æ–‡ç« è¯é¢˜ã€‚\nç»“è®º ä¸€å¼€å§‹ï¼Œå¯èƒ½æœ‰ç‚¹éš¾ä»¥ç†è§£å¦‚ä½•ä»¥åŠä½•æ—¶ä½¿ç”¨swiftçš„keypathï¼Œè®¤ä¸ºå®ƒåªæ˜¯ç®€å•çš„è¯­æ³•ç³–è€Œå·² è€Œå¿½ç•¥å®ƒçš„çœŸæ­£å¼ºå¤§ä¹‹å¤„ã€‚èƒ½æ›´åŠ¨æ€åœ°å¼•ç”¨å¯¹è±¡çš„å±æ€§æ˜¯ä¸€ä¸ªå¼ºå¤§çš„åŠŸèƒ½ï¼Œå°½ç®¡é—­åŒ…èƒ½ç»å¸¸èƒ½è¾¾åˆ°ç›¸ä¼¼çš„åŠŸèƒ½ï¼Œä½†ç®€å•çš„è¯­æ³•å’Œå¯å£°æ˜æ€§çš„æœ¬è´¨è®©å®ƒæˆä¸ºå¤„ç†å„ç§å„æ ·çš„æ•°æ®çš„å¾ˆæ£’çš„é€‰æ‹©ã€‚\nä½œä¸ºä¸€ä¸ªæ¯”è¾ƒæ–°å‡ºçš„åŠŸèƒ½ï¼ˆSwift 4 ä»¥ä¸Šï¼‰ï¼Œæˆ‘ç›¸ä¿¡éšç€æ—¶é—´çš„æ¨ç§»ï¼ŒæŠ€æœ¯ç¤¾åŒºé‡Œä¼šå‡ºç°å…³äºkeypathçš„æ–°ç”¨æ³•å’Œæ€è·¯ï¼Œå› æ­¤åœ¨ä»¥åçš„æŠ€æœ¯æ–‡ç« é‡Œæˆ‘ä»¬è¿˜ä¼šå›é¡¾keypathåŠŸèƒ½ã€‚åˆ°é‚£æ—¶ï¼Œæˆ‘ä¹Ÿæƒ³å¬å¬å¤§å®¶å…³äºkeypathçš„æƒ³æ³• - æ¯”å¦‚ä½ ä»¬æ˜¯å¦çœŸçš„åœ¨ä½¿ç”¨å®ƒ æˆ–æ˜¯ æ­£åœ¨å°è¯•ç€ä½¿ç”¨å®ƒï¼Ÿ\nè°¢è°¢é˜…è¯»æˆ‘çš„æ–‡ç« ã€‚\n"
},
{
	"uri": "https://leverkusen188.github.io/swift/swift_oc_communicate/",
	"title": "Swift ä¸ OCçš„äº’ç›¸ä½¿ç”¨tips",
	"tags": [],
	"description": "",
	"content": "Swiftè¦ä½¿ç”¨OCä»£ç  Case1 : å¦‚æœæ˜¯ä¸»å·¥ç¨‹é‡Œï¼Œåˆ™éœ€è¦å°†å¯¹åº”çš„OCå¤´æ–‡ä»¶æ”¾å…¥ ç”Ÿæˆçš„ \u0026ldquo;-Bridging-Header.h\u0026rdquo; å¤´æ–‡ä»¶é‡Œã€‚ Case2: å¦‚æœæ˜¯å­å·¥ç¨‹ï¼Œå¿…é¡»å°†OCå¯¹åº”çš„å¤´æ–‡ä»¶è®¾ä¸ºPublicï¼›å†å°†è¯¥å¤´æ–‡ä»¶æ”¾å…¥modular headeré‡Œæ¥importã€‚ Swiftä½¿ç”¨OCçš„ æšä¸¾ã€‚ï¼ˆä¸åŒçš„å£°æ˜æ–¹å¼å¯¹åº”ä¸åŒçš„ä½¿ç”¨æ–¹å¼ï¼‰ **Case1: **\ntypedef enum : NSUInteger { XXXX1, } XXXX; åœ¨swiftä¸­ï¼š let vv : XXXX = XXXX1 Case2:\ntypedef NS_ENUM(NSUInteger, JapaneseFoodType1) { JapaneseFoodType1_Sushi = 1, JapaneseFoodType1_Tempura = 2, }; åœ¨swiftä¸­ï¼š let v : JapaneseFoodType1 = .sushi PSï¼šä¹Ÿéƒ½å¯ä»¥ç”¨ init(rawValue:) æ¥ä½¿ç”¨ï¼Œä½†ä¸æ¨èã€‚\nSwift ä½¿ç”¨OCçš„æŒ‡é’ˆ Swift ç«¯çš„æŒ‡é’ˆç±»å‹æœ‰ï¼š UnsafePointer: ç±»ä¼¼äºconst Pointee * UnsafeMutablePointer: ç±»ä¼¼äºPointee * UnsafeRawPointer: ç±»ä¼¼äºconst void * UnsafeMutableRawPointer: ç±»ä¼¼äºvoid * //OCä¼ æŒ‡é’ˆç»™Swift //Swiftç«¯ @objc class SwiftClosure : NSObject { @objc class func test1(_ ptr: UnsafeMutablePointer\u0026lt;Int\u0026gt;) { ptr.pointee += 10 } } //OCç«¯ NSInteger b = 4; [SwiftClosure test1:\u0026amp;b]; //b ä¸º 14 //Swiftä¼ æŒ‡é’ˆç»™OC //Swiftç«¯ var intV = 4 var intVP = withUnsafeMutablePointer(to: \u0026amp;intV) { $0 } ClassForSwift1.myPointer(intVP) //intV ä¸º 8 //OCç«¯ + (void)myPointer:(NSInteger *) intP { *intP += 4; } Swiftçš„æŒ‡é’ˆå¸¸ç”¨æ–¹æ³• //åˆ†é…å†…å­˜ï¼Œåˆ›å»ºæŒ‡é’ˆï¼Œç±»å‹æ˜¯ UnsafeMutableRawPointer let p = malloc(50) //å¦ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘ offset 16çš„ä½ç½® let anotherPointer = p! + 16 //æˆ–è€…ç”¨ p!.advanced(by: 16) //å†™å…¥æ•°æ®åˆ°æŒ‡å®šä½ç½® p?.storeBytes(of: 55, toByteOffset: 16, as: Int.self) //è·å–å†…å­˜åˆ¶å®šä½ç½®çš„å€¼ var p1 : Int = p!.load(fromByteOffset: 0, as: Int.self) //é”€æ¯å†…å­˜ free(p) //åˆ›å»º å¤§å°ä¸º3ä¸ªIntçš„å†…å­˜æŒ‡é’ˆ var ptr = UnsafeMutablePointer\u0026lt;Int\u0026gt;.allocate(capacity: 3) // å…ˆåˆå§‹åŒ–å†…å­˜ ptr.initialize(to: 11) // ptr.successorè¡¨ç¤ºä¸‹ä¸€ä¸ªIntï¼Œä¹Ÿå°±æ˜¯è·³ä¸€ä¸ªç±»å‹å­—èŠ‚å¤§å° ptr.successor().initialize(to: 22) ptr.successor().successor().initialize(to: 33) print(ptr.pointee) // 11 // ptr + 1ï¼Œæ„å‘³ç€è·³è¿‡ä¸€ä¸ªIntç±»å‹å¤§å°çš„å­—èŠ‚æ•° print((ptr + 1).pointee) // 22 print((ptr + 2).pointee) // 33 // é‡Šæ”¾è¦è°ƒç”¨ååˆå§‹åŒ–ï¼Œè°ƒç”¨äº†å‡ ä¸ªå°±é‡Šæ”¾å‡ ä¸ª ptr.deinitialize(count: 3) ptr.deallocate() //RawPointer å’Œ Pointerä¹‹é—´çš„è½¬æ¢ let convertedIntP : UnsafeMutablePointer\u0026lt;Int\u0026gt; = p!.assumingMemoryBound(to: Int.self) let convertedIntP2 : UnsafePointer\u0026lt;Int\u0026gt; = unsafeBitCast(p!, to: UnsafePointer\u0026lt;Int\u0026gt;.self) "
},
{
	"uri": "https://leverkusen188.github.io/swift/swift_function_closure/",
	"title": "Swift å‡½æ•°å’Œé—­åŒ…",
	"tags": [],
	"description": "",
	"content": "å¯å˜å‚æ•° å¯ä»¥è®¾å®šåŒç±»å‹çš„å‚æ•°ä¸ºå¯å˜ä¸ªæ•°ï¼Œç„¶ååœ¨å‡½æ•°é‡Œå°†è¯¥å‚æ•°ä½œä¸ºæ•°ç»„æ¥ä½¿ç”¨ã€‚ å¯å˜å‚æ•°çš„ä½ç½®ä¸ä¸€å®šæ˜¯æœ€åä¸€ä¸ªã€‚\nç¤ºä¾‹ä»£ç ï¼š\nfunc manyVar(v : Int..., d : Double) { for i in v {\t//ä½œä¸ºæ•°ç»„ä½¿ç”¨ } } manyVar( d: 2.2) //ä¼  0 ä¸ªvå‚æ•° manyVar(v:1,2,3, d: 2.2) //ä¼ 3ä¸ª vå‚æ•° é—­åŒ… å’Œ å‡½æ•° å¯¹å¤–éƒ¨å˜é‡çš„å¼•ç”¨ Block å’Œ å‡½æ•°åœ¨ä½¿ç”¨å®ƒä»¬å¤–éƒ¨çš„å˜é‡æ—¶ï¼Œä½¿ç”¨çš„æ˜¯è¯¥å˜é‡çš„å¼•ç”¨ï¼ˆæ— è®ºæ˜¯åŸºæœ¬ç±»å‹è¿˜æ˜¯ ç±»ç»“æ„ï¼‰ï¼Œå½“å˜é‡å˜åŒ–æ—¶ï¼Œblockå’Œå‡½æ•°å†…éƒ¨çš„è¯¥å˜é‡ä¹Ÿä¼šä¸€èµ·å˜åŒ–ã€‚\nä»£ç ä¾‹å­ï¼š\nvar bInt : Int = 4 func capture(_ num : Int) -\u0026gt; String { bInt += num return \u0026#34;caturpe \\(bInt)\u0026#34; } bInt += 1 print(\u0026#34;capture \\(capture(1))â€) //æ‰“å° capture 6 print(\u0026#34;capture \\(capture(2))â€) //æ‰“å° capture 7, æ­¤æ—¶ bInt å˜æˆ7äº† å°¾éšé—­åŒ… å½“é—­åŒ…ä½œä¸ºå‡½æ•°æœ€åä¸€ä¸ªå‚æ•°æ—¶ï¼Œå¯ä»¥å°†é—­åŒ…ä½“æ”¾åœ¨å‡½æ•°çš„æ‹¬å·å¤–é¢ï¼Œè¿™æ˜¯ä¸€ä¸ªè¯­æ³•ç³–ã€‚\nä»£ç ä¾‹å­ï¼š\nfunc someFunctionThatTakesAClosure(closure: () -\u0026gt; Void) { // å‡½æ•°ä½“éƒ¨åˆ† } someFunctionThatTakesAClosure({ //é—­åŒ…ä½“ }) someFunctionThatTakesAClosure() { //é—­åŒ…ä½“ } é—­åŒ…çš„ç¼©å†™ åœ¨é—­åŒ…ä½“å†…ï¼Œå¯ä»¥ç”¨ $0 ä¸‹æ ‡æ¥è·å–å¯¹åº”çš„ä½ç½®çš„å‚æ•°ã€‚ ä»£ç ä¾‹å­ï¼š\nlet sort : (Int, Int) -\u0026gt; Bool = { $0 \u0026gt; $1 } [1,2,3].sorted(by: sort) é‡è½½è¿ç®—ç¬¦ å¯ä»¥æ”¹å†™ç‰¹å®šç±»å‹æ•°æ®ï¼ˆå¯¹è±¡ï¼‰çš„è¿ç®—ç¬¦è¡Œä¸ºã€‚\næ ·ä¾‹ä»£ç ï¼š\nclass EqualClass : Equatable { var value : Int = 2 init(v : Int) { value = v } static func == (o1 : EqualClass, o2 : EqualClass) -\u0026gt; Bool { return o1.value == o2.value } static func \u0026gt; (o1 : EqualClass, o2 : EqualClass) -\u0026gt; Bool { return o1.value \u0026gt; o2.value } } å¯é€ƒé€¸é—­åŒ… @escaping é€ƒé€¸é—­åŒ…ï¼šé—­åŒ…æœ‰å¯èƒ½åœ¨å‡½æ•°ç»“æŸåè°ƒç”¨ï¼Œé—­åŒ…è°ƒç”¨é€ƒç¦»äº†å‡½æ•°çš„ä½œç”¨åŸŸï¼Œéœ€è¦é€šè¿‡@escapingå£°æ˜ã€‚ æ¯”å¦‚ä¸‹é¢ä¾‹å­ï¼Œä¼ å…¥çš„é—­åŒ…ç”¨å¯¹è±¡å±æ€§ä¿å­˜äº†ä¸‹æ¥ï¼Œå¯èƒ½åœ¨ä»»æ„æ—¶é—´è¢«è°ƒç”¨ã€‚\nclass SwiftClosure : SwiftTestProtocol { typealias emptyClosure = () -\u0026gt; () var callback :emptyClosure? = nil func setCallback(_ call : @escaping emptyClosure) { self.callback = call } func main() { self.setCallback { print(\u0026#34;my callback\u0026#34;) } } } é€ƒé€¸é—­åŒ…é‡Œä¸èƒ½ä½¿ç”¨å¤–é¢çš„ inout å‚æ•°ã€‚\nfunc modifyInt(_ value : inout Int) { self.setCallback { [weak self] in value += 4 //ç¼–è¯‘æŠ¥é”™ print(\u0026#34;my callback\u0026#34;) } self.callback!() self.callback!() } "
},
{
	"uri": "https://leverkusen188.github.io/swift/swift_pattern_match/",
	"title": "Swift å­—é¢é‡åè®®å’Œæ¨¡å¼åŒ¹é…",
	"tags": [],
	"description": "",
	"content": "å­—é¢é‡åè®®(Literal Type) å­—é¢é‡(Literal Type)å°±æ˜¯åŸºæœ¬ç±»å‹çš„å¸¸é‡å€¼ã€‚ æ¯”å¦‚ï¼š 10ã€falseã€\u0026ldquo;Jack\u0026quot;å°±æ˜¯å­—é¢é‡\nvar age = 10 var isRed = false var name = \u0026#34;Jack\u0026#34; è€Œå¦‚æœç±»å®ç°äº†å¯¹åº”çš„å­—é¢é‡åè®®åï¼Œå°±å¯ä»¥ç”¨å­—é¢é‡æ¥åˆå§‹åŒ–å¯¹è±¡äº†ã€‚ å¸¸ç”¨çš„å­—é¢é‡åè®®æœ‰ï¼š\nBool: ExpressibleByBooleanLiteral Int: ExpressibleByIntegerLiteral Floatã€Double: ExpressibleByIntegerLiteralã€ExpressibleByFloatLiteral String: ExpressibleByStringLiteral Arrayã€Set: ExpressibleByArrayLiteral Dictionary: ExpressibleByDictionaryLiteral Optional:Â ExpressibleByNilLiteral æ ·ä¾‹ä»£ç ï¼š\nclass LiteralTypeClass : ExpressibleByBooleanLiteral { var boolValue : Bool //å®ç°äº†boolçš„å­—é¢é‡åè®®ï¼Œå¯ä»¥ç”¨boolæ¥åˆå§‹åŒ–äº† required init(booleanLiteral value: BooleanLiteralType) { boolValue = value } } let obj : LiteralTypeClass = false æ¨¡å¼åŒ¹é… æ¨¡å¼æ˜¯ç”¨äºåŒ¹é…çš„è§„åˆ™ï¼Œæ¯”å¦‚switchçš„caseã€æ•æ‰é”™è¯¯çš„catchã€if\\guard\\while\\forè¯­å¥çš„æ¡ä»¶ç­‰ã€‚\n1. é€šé…ç¬¦æ¨¡å¼ï¼ˆWildcard Patternï¼‰ 1.1 _ åŒ¹é…ä»»ä½•å€¼ 1.2 _? åŒ¹é…énilå€¼\næ ·ä¾‹ä»£ç ï¼š\nenum Life { case human(name: String, age: Int?) case animal(name: String, age: Int?) } func check(_ life: Life) { switch life { case .human(let name, _): //case 1 print(\u0026#34;human\u0026#34;, name) case .animal(let name, _?): //case 2 print(\u0026#34;animal\u0026#34;, name) default: //case 3 print(\u0026#34;other\u0026#34;) } } check(.human(name: \u0026#34;Rose\u0026#34;, age: 20)) // æ»¡è¶³case 1 check(.human(name: \u0026#34;Jack\u0026#34;, age: nil)) //æ»¡è¶³ case 1 check(.animal(name: \u0026#34;Dog\u0026#34;, age: 5)) // æ»¡è¶³case 2 check(.animal(name: \u0026#34;Cat\u0026#34;, age: nil)) // æ»¡è¶³ case3 2. å€¼ç»‘å®šæ¨¡å¼ï¼ˆValue-Binding Patternï¼‰ let point = (3, 2) switch point { case let (x, y): print(\u0026#34;The point is at (\\(x), \\(y).\u0026#34;) } 3. å…ƒç»„æ¨¡å¼ï¼ˆTuple Patternï¼‰ let name: String? = \u0026#34;jack\u0026#34; let age = 18 let info: Any = [1, 2] switch (name, age, info) { case (_?, _, _ as String): print(\u0026#34;case\u0026#34;) default: print(\u0026#34;default\u0026#34;) } // default 4. æšä¸¾Caseæ¨¡å¼ï¼ˆEnumeration Case Patternï¼‰ if caseè¯­å¥ç­‰ä»·äºåªæœ‰1ä¸ªcaseçš„switchè¯­å¥\nlet age = 2 // æšä¸¾Caseæ¨¡å¼ if case 0...9 = age { print(\u0026#34;[0, 9]\u0026#34;) } let ages: [Int?] = [2, 3, nil, 5] for case nil in ages { print(\u0026#34;æœ‰nilå€¼\u0026#34;) break } // æœ‰nilå€¼ let points = [(1, 0), (2, 1), (3, 0)] for case let (x, 0) in points { print(x) } // 1 3 5. å¯é€‰æ¨¡å¼ï¼ˆOptional Patternï¼‰ let ages: [Int?] = [nil, 2, 3, nil, 5] for case let age? in ages { print(age) } // 2 3 5 // åŒä¸Šé¢æ•ˆæœç­‰ä»· let ages: [Int?] = [nil, 2, 3, nil, 5] for item in ages { if let age = item { print(age) } } 6. ç±»å‹è½¬æ¢æ¨¡å¼ï¼ˆType-Casting Patternï¼‰ class Animal { func eat() { print(type(of: self), \u0026#34;eat\u0026#34;) } } class Dog: Animal { } class Cat: Animal { } func check(_ animal: Animal) { switch animal { case let dog as Dog: dog.eat() dog.run() case is Cat: animal.eat() default: break } } check(Dog()) // Dog eat, Dog run check(Cat()) // Cat eat 7. è¡¨è¾¾å¼æ¨¡å¼ï¼ˆExpression Patternï¼‰ è¡¨è¾¾å¼ç”¨åœ¨ case ä¸­\nlet point = (1, 2) switch point { case (0, 0): print(\u0026#34;(0, 0) is at the origin.\u0026#34;) case (-2...2, -2...2): print(\u0026#34;(\\(point.0), \\(point.1) is near the origin.\u0026#34;) default: print(\u0026#34;The point is at (\\(point.0), \\(point.1).\u0026#34;) } // (1, 2) is near the origin. è‡ªå®šä¹‰è¡¨è¾¾å¼æ¨¡å¼ é‡è½½ ~= è¿ç®—ç¬¦ï¼Œå¯ä»¥å®ç° case é‡Œçš„å­—å®šä¹‰æ¡ä»¶åŒ¹é…ã€‚\nä¸‹é¢æ˜¯æ•°å€¼ç±»å‹ä»¥åŠåŒºé—´çš„è‡ªå®šä¹‰åŒ¹é…å®ç°ã€‚\nstruct Student { var score = 0, name = \u0026#34;\u0026#34; // patternï¼šæ”¾çš„æ˜¯caseåé¢çš„å€¼ // valueï¼šæ”¾çš„æ˜¯switchåé¢çš„å€¼ //ä¸Int å€¼çš„åŒ¹é…åˆ¤æ–­ static func ~= (pattern: Int, value: Student) -\u0026gt; Bool { value.score \u0026gt;= pattern } //ä¸ 0â€¦5 æ­¤ç±»åŒºé—´çš„åŒ¹é…åˆ¤æ–­ static func ~= (pattern: ClosedRange\u0026lt;Int\u0026gt;, value: Student) -\u0026gt; Bool { pattern.contains(value.score) } //ä¸ 0..\u0026lt;5 æ­¤ç±»åŒºé—´çš„åŒ¹é…åˆ¤æ–­ static func ~= (pattern: Range\u0026lt;Int\u0026gt;, value: Student) -\u0026gt; Bool { pattern.contains(value.score) } //ä¸Doubleå€¼çš„åŒ¹é…åˆ¤æ–­ static func ~= (pattern: Double, value : Student) -\u0026gt; Bool { return Double(value.score) \u0026gt; pattern } } var stu = Student(score: 75, name: \u0026#34;Jack\u0026#34;) switch stu { case 61.1: print(\u0026#34;DOuble???\u0026#34;) case 100: print(\u0026#34;\u0026gt;= 100\u0026#34;) case 90: print(\u0026#34;\u0026gt;= 90\u0026#34;) case 80..\u0026lt;90: print(\u0026#34;[80, 90]\u0026#34;) case 60...79: print(\u0026#34;[60, 79]\u0026#34;) case 0: print(\u0026#34;\u0026gt;= 0\u0026#34;) default: break } // [60, 79] if case 60 = stu { print(\u0026#34;\u0026gt;= 60\u0026#34;) } // \u0026gt;= 60 æ‰“å°ç»“æœæ˜¯ï¼š DOuble??? \u0026gt;= 60\nä¸‹é¢æ˜¯å­—ç¬¦ä¸²çš„è‡ªå®šä¹‰åŒ¹é…å®ç° extension String { static func ~= (pattern: (String) -\u0026gt; Bool, value: String) -\u0026gt; Bool { pattern(value) } } func hasPrefix(_ prefix: String) -\u0026gt; ((String) -\u0026gt; Bool) { { $0.hasPrefix(prefix) } } func hasSuffix(_ suffix: String) -\u0026gt; ((String) -\u0026gt; Bool) { { $0.hasSuffix(suffix) } } var str = \u0026#34;jack\u0026#34; switch str { //è¿™é‡Œ hasPrefixå’Œ hasSuffix è¿”å›çš„closure å°±æ˜¯é‡è½½çš„ ~= è¿ç®—ç¬¦çš„ pattern å‚æ•° case hasPrefix(\u0026#34;j\u0026#34;), hasSuffix(\u0026#34;k\u0026#34;): print(\u0026#34;ä»¥jå¼€å¤´ï¼Œä»¥kç»“å°¾\u0026#34;) default: break } // ä»¥jå¼€å¤´ï¼Œä»¥kç»“å°¾ "
},
{
	"uri": "https://leverkusen188.github.io/swiftui/swiftui_pandding/",
	"title": "Swift å¸¸ç”¨UIç•Œé¢è®¾ç½®",
	"tags": [],
	"description": "",
	"content": "èƒŒæ™¯è‰²è®¾ç½® ä¸€ä¸ªæŒ‡å®šé¢œè‰²çš„ç©ºè§†å›¾ã€‚ color.red.ignoresSafeArea() ç»™ä¸€ä¸ªæˆ–å¤šä¸ªè§†å›¾æŒ‡å®šèƒŒæ™¯é¢œè‰² Color.green.overlay { //ç”¨ overlayä½œä¸ºèƒŒæ™¯çš„ å¤šä¸ªé‡å çš„è§†å›¾ Text(\u0026#34;hello\u0026#34;).bold().foregroundColor(.white) }.frame(width: 50, height: 50) æ§ä»¶ä½ç½®è®¾ç½® HStack å’Œ VStack åˆå§‹åŒ–æ—¶éƒ½æœ‰spacingå‚æ•°æ¥è®¾å®š å®ƒä»¬é‡Œé¢çš„æ§ä»¶çš„é—´è·ã€‚\næ§ä»¶çš„offset å±æ€§å¯ä»¥è®¾ç½®è¯¥æ§ä»¶ç›¸æ¯”åŸå¸ƒå±€ä½ç½®çš„ä½ç§»ã€‚\nä½†æ³¨æ„å…¶ä»–æ§ä»¶å¹¶ä¸ä¼šå› ä¸ºå®ƒçš„ä½ç½®å˜åŒ–è€Œè‡ªåŠ¨å¸ƒå±€ï¼ˆä¹Ÿå°±æ˜¯ å¦‚æœä¸‹é¢çš„æ§ä»¶ä¸è®¾offsetæ—¶ï¼Œå¯èƒ½ä¼šè·Ÿå®ƒé‡å ï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ ·ï¼šï¼‰ padding å¡«å……è®¾ç½®\nfunc padding( _ edges: Edge.Set = .all, _ length: CGFloat? = nil ) -\u0026gt; some View å¾€æŒ‡å®šçš„Edge å¡«å……æŒ‡å®š(Length) å¤§å°çš„ç©ºé—´ã€‚edges å¯ä»¥æ˜¯å¤šä¸ªã€‚Â æ ·ä¾‹ä»£ç ï¼š\n//å¾€æ§ä»¶çš„åº•éƒ¨å’Œå³è¾¹å°¾éƒ¨ å¡«å……20åƒç´ å®½åº¦ç©ºé—´ Text(\u0026#34;Text padded by 20 points on the bottom and trailing edges.\u0026#34;) .padding([.bottom, .trailing], 20) .border(.gray) "
},
{
	"uri": "https://leverkusen188.github.io/swift/swift_array_dictionary/",
	"title": "Swift æ•°ç»„å’Œå­—å…¸",
	"tags": [],
	"description": "",
	"content": "æ•°ç»„å’Œå­—å…¸çš„éå†(enumerated) æ•°ç»„å’Œå­—å…¸çš„éå†æœ‰ä¸¤ç§æ–¹å¼ã€‚\næ–¹å¼1: let arr = [1,2,3] for v in arr.enumerated() { v.offset //å°±æ˜¯ä¸‹æ ‡åºå· v.element //å°±æ˜¯å½“å‰å…ƒç´  } let dict = [1: â€œfirstâ€, 2: â€œsecondâ€] for v in dict.enumerated() { v.offset //å°±æ˜¯åºå· v.element //ç±»å‹æ˜¯ [Int: String].Element, æœ‰key å’Œvalueå±æ€§ï¼› } æ–¹å¼2: for (index, value) in arr.enumerated() { //index æ˜¯ä¸‹æ ‡ï¼Œvalueæ˜¯å…ƒç´  } for (index, value) in arr.enumerated() { //index æ˜¯ä¸‹æ ‡ï¼Œvalueæ˜¯ [Int: String].Element } ç”¨æ•°ç»„é‡Œçš„å¯¹è±¡çš„å±æ€§è´µæ—å½’ç»„ å¿«é€Ÿåˆ›å»ºå­—å…¸ æ ·ä¾‹ä»£ç ï¼š\nstruct Data { var i : Int var text : String } //dic ä¼šç”¨ Dataçš„ i å±æ€§æ¥ä½œä¸ºkeyç”Ÿæˆã€‚ let dic = Dictionary(grouping: [ Data999(i: 1, text: \u0026#34;haha\u0026#34;), Data999(i: 1, text: \u0026#34;baa\u0026#34;), Data999(i: 4, text: \u0026#34;abnn\u0026#34;), Data999(i: 4, text: \u0026#34;erwr\u0026#34;), Data999(i: 6, text: \u0026#34;babr\u0026#34;), ], by: { $0.i }) æ•°ç»„è½¬æ¢æˆå­—å…¸ ä¸‹é¢ä¾‹å­ï¼Œå°†é•¿åº¦ç›¸åŒçš„å­—ç¬¦ä¸²æ”¾å…¥ä¸€ä¸ªæ•°ç»„ä½œä¸ºvalueï¼Œkeyä¸ºå­—ç¬¦é•¿åº¦\nvar playerNames = [\u0026#34;Harry\u0026#34;, \u0026#34;Ron\u0026#34;, \u0026#34;Hermione\u0026#34;, \u0026#34;Bil\u0026#34;] //into å‚æ•°æ˜¯åˆå§‹åŒ–çš„å­—å…¸ã€‚ æœ€ç»ˆè¿”å›çš„æ˜¯å¦ä¸€ä¸ªå­—å…¸ let scoreboard = playerNames.reduce(into: [Int: [String]]()) { if $0[$1.count] == nil { $0[$1.count] = [] } $0[$1.count]?.append($1) } "
},
{
	"uri": "https://leverkusen188.github.io/swift/swift_class_structure/",
	"title": "Swift ç±»å’Œç»“æ„",
	"tags": [],
	"description": "",
	"content": "ç»“æ„çš„mutating å‡½æ•° ç»“æ„ä½“ä¸­ï¼Œé™¤äº†init å‡½æ•°å¤–ï¼Œå…¶ä»–å‡½æ•°ä¸­å¦‚æœæœ‰ä¿®æ”¹è‡ªèº«å±æ€§ï¼Œå¿…é¡»å£°æ˜ä¸º mutating\nstruct s { var str : String = \u0026#34;\u0026#34; mutating func(s1 : String) { self.str = s1 } } ç±»æ–¹æ³•å’Œ Static æ–¹æ³• ç±»æ–¹æ³•å’Œstaticæ–¹æ³•éƒ½æ˜¯é€šè¿‡ ç±»å(ç»“æ„å) ç›´æ¥è°ƒç”¨çš„æ–¹æ³•ã€‚ ä½† ç±»æ–¹æ³•å¯ä»¥è¢«å­ç±»é‡å†™ï¼Œè€Œstatic ä¸è¡Œ.\nclass EqualClass { class func canOverride() { print(\u0026#34;EqualClass canOverride\u0026#34;) } static func cannotOverride() { print(\u0026#34;EqualClass cannotOverride\u0026#34;) } } class SubEqualClass : EqualClass { override class func canOverride() { print(\u0026#34;SubEqualClass canOverride\u0026#34;) } //ä¸‹é¢ä»£ç æ— æ³•ç¼–è¯‘ override static func cannotOverride() { print(\u0026#34;SubEqualClass cannotOverride\u0026#34;) } } ä¸‹æ ‡è„šæœ¬ï¼ˆsubscriptï¼‰ åœ¨ç±»ï¼Œç»“æ„æˆ–æ˜¯æšä¸¾ å£°æ˜ä¸­ï¼Œå¯ä»¥å®šä¹‰ä¸‹æ ‡è„šæœ¬ï¼Œé€šè¿‡ä¸€ä¸ªæˆ–å¤šä¸ªç´¢å¼•æ¥è®¿é—®å®ä¾‹é‡Œçš„æ•°æ®ã€‚\nclass EqualClass { subscript(first : Int, second : String) -\u0026gt; String { return \u0026#34;Int=\\(first) second=\\(second)\u0026#34; } } let object = EqualClass() print(\u0026#34;subscript = \u0026#34;+object[1,\u0026#34;bb\u0026#34;]) //ç”¨ä¸¤ä¸ªç´¢å¼•å‚æ•°æ¥è®¿é—®ä¸Šé¢å£°æ˜çš„ä¸‹æ ‡è„šæœ¬ å®ä¾‹æ„é€ ç›¸å…³ ç±»å’Œç»“æ„ä½“åœ¨å®ä¾‹åˆ›å»ºæ—¶ï¼Œå¿…é¡»ä¸ºæ‰€æœ‰å­˜å‚¨å‹å±æ€§è®¾ç½®åˆé€‚çš„åˆå§‹å€¼ã€‚å¯é€‰ç±»å‹çš„ä¸ç”¨ã€‚ å­˜å‚¨å±æ€§åœ¨æ„é€ å™¨ä¸­èµ‹å€¼æ—¶ï¼Œå®ƒä»¬çš„å€¼æ˜¯è¢«ç›´æ¥è®¾ç½®çš„ï¼Œä¸ä¼šè§¦å‘ä»»ä½•å±æ€§è§‚æµ‹å™¨ï¼ˆä¹Ÿå°±æ˜¯didSetï¼ŒwillSetç­‰ï¼‰ã€‚case 1 åŒæ—¶ï¼Œå±æ€§åœ¨å£°æ˜å¤„çš„åˆå§‹åŒ–ä¹Ÿæ˜¯ä¸ä¼šè§¦å‘å±æ€§è§‚æµ‹å™¨çš„ã€‚ Case 2\nclass SubCls { override init(v : String) { self.sss = v + \u0026#34;sss\u0026#34; //case 1 } var sss : String? = \u0026#34;\u0026#34; { //case 2 willSet { print(\u0026#34;\\(newValue)\u0026#34;) } } } å¯å¤±è´¥æ„é€ å™¨ åœ¨æŸäº›è‡ªå®šä¹‰æ¡ä»¶ä¸æ»¡è¶³æ—¶ï¼Œåœ¨ å¯å¤±è´¥æ„é€ å™¨å†…è¿”å›nilï¼Œè¡¨ç¤ºæ„é€ å¤±è´¥. ä½ å¯ä»¥ç”¨ä¸€ä¸ªéå¯å¤±è´¥æ„é€ å™¨è¦†ç›–ä¸€ä¸ªå¯å¤±è´¥æ„é€ å™¨ï¼Œä½†åè¿‡æ¥å´è¡Œä¸é€šã€‚ ä¸€ä¸ªéå¯å¤±è´¥çš„æ„é€ å™¨æ°¸è¿œä¹Ÿä¸èƒ½ä»£ç†è°ƒç”¨ä¸€ä¸ªå¯å¤±è´¥æ„é€ å™¨ã€‚\nClass Failure { init?(v : Int) { if v \u0026lt; 0 { return nil } } init(v1 : Int) { } } class SubFailure : Failure { override init?(v : Int) { super.init(v1: v) //å¯å¤±è´¥æ„é€ å™¨ å¯ä»¥è°ƒç”¨çˆ¶ç±»çš„ éå¯å¤±è´¥æ„é€ å™¨ } init(v2 : Int) { //ç¼–è¯‘é”™è¯¯ï¼ éå¯å¤±è´¥æ„é€ å™¨ä¸èƒ½è°ƒç”¨çˆ¶ç±»çš„ å¯å¤±è´¥æ„é€ å™¨ super.init(v: v2) } } å…³è”ç±» associatedtype ç”¨ associatedtype å…³é”®å­—æ¥è®¾ç½®å…³è”ç±»å‹å®ä¾‹ã€‚ å£°æ˜çš„å…³è”ç±»å‹å¯ä»¥æ›¿ä»£ä»»ä½•å…¶ä»–ç±»å‹ï¼Œç±»ä¼¼æ³›å‹ã€‚\nprotocol Cont { associatedtype ItemType // è¯¥åè®®å£°æ˜å…³è”ç±»å‹ï¼Œå¯ä»¥æ›¿ä»£ä»»ä½•å…¶ä»–ç±»å‹ mutating func append(_ item: ItemType) } extension Int : Cont { func append(_ item: Int) { //å…³è”ç±»å‹ Int print(\u0026#34;Int append\u0026#34;) } } extension Double : Cont { func append(_ item: Double) { //å…³è”ç±»å‹Double print(\u0026#34;Double append\u0026#34;) } } ç±»å‹çº¦æŸ Whereè¯­å¥ ç±»å‹çº¦æŸè¯­å¥å¯ä»¥ç¡®ä¿ æŒ‡å®šçš„ç±»å‹ç¬¦åˆ æ³›å‹æˆ–æ˜¯ç±»çš„å®šä¹‰ã€‚ å¯ä»¥åœ¨å‚æ•°åˆ—è¡¨ä¸­å®šä¹‰æ³›å‹å‚æ•°çš„çº¦æŸï¼Œä»¥ä¿è¯å‚æ•°ç±»å‹ç¬¦åˆä½ çš„é¢„æœŸã€‚ Where æ”¾åœ¨å‡½æ•°çš„æ‰€æœ‰å‚æ•°ç±»å‹æœ€åï¼Œå¯ä»¥æ¥å¤šä¸ªçº¦æŸè¯­å¥ï¼Œæ¥æ»¡è¶³è‡ªå·±å¯¹å‚æ•°ç±»å‹çš„éœ€æ±‚ã€‚\næ ·ä¾‹ä»£ç (è‡ªå®šä¹‰ä¸€ä¸ªStackå®¹å™¨ç±»ï¼Œå®ç°ä¸€ä¸ªcompareStackå‡½æ•°ï¼Œå¯¹æ¯”ä¸¤ä¸ªå®¹å™¨é‡Œå…ƒç´ æ˜¯å¦å®Œå…¨ä¸€è‡´)ï¼š\n//å…ˆå£°æ˜åè®®ï¼Œå£°æ˜ä¸€ä¸‹ compareStack é‡Œç”¨åˆ°çš„å®¹å™¨ç±»çš„æ–¹æ³• protocol Cont { associatedtype ItemType var count : Int {get} // æ·»åŠ ä¸€ä¸ªæ–°å…ƒç´ åˆ°å®¹å™¨é‡Œ mutating func append(_ item: ItemType) subscript(i : Int) -\u0026gt; ItemType {get} } //å®ç°è‡ªå®šä¹‰Stack å®¹å™¨ç±» class MyStack\u0026lt;Element\u0026gt; : Cont { var myItems : [Element] = [] init(v : Element...) { for value in v { myItems.append(value) } } var count: Int { get {myItems.count} } func append(_ item: Element) { myItems.append(item) } subscript(i : Int) -\u0026gt; Element { return myItems[i] } } // æ‰©å±•ï¼Œå°† Array å½“ä½œ Cont æ¥ä½¿ç”¨, å› ä¸ºArrayæœ¬èº«ä¹Ÿå®ç°äº† Conté‡Œå£°æ˜çš„æ–¹æ³• extension Array: Cont {} //å®¹å™¨å¯¹æ¯”å‡½æ•° func compareStack\u0026lt;C1 : Cont, C2 : Cont\u0026gt;(stack1 : C1, stack2 : C2) -\u0026gt; Bool //C1 å’Œ C2 ç±»å‹éƒ½å¿…é¡»å®ç°Cont åè®® where C1.ItemType == C2.ItemType, //çº¦æŸ1ï¼ŒC1çš„Elementå’ŒC2çš„å¿…é¡»ç›¸åŒ C1.ItemType : Equatable { //çº¦æŸ2ï¼ŒC1çš„Element å¿…é¡»å®ç°Equatable åè®® guard stack1.count == stack2.count else { return false } for i in 0..\u0026lt;stack2.count { if stack1[i] != stack2[i] { return false } } return true } let arrr1 = [1,2,3] //ä¸€ä¸ªArray let stack1 = MyStack.init(v: 1,2,3) //ä¸€ä¸ªMyStackå®¹å™¨ if compareStack(stack1: arrr1, stack2: stack1) { //å¯¹æ¯”Arrayå’ŒMyStackå®¹å™¨å…ƒç´ æ˜¯å¦å®Œå…¨ä¸€è‡´ print(\u0026#34;the same!\u0026#34;) //ä¼šè¿›å…¥è¿™é‡Œ } "
},
{
	"uri": "https://leverkusen188.github.io/swift/swift_privilege/",
	"title": "Swift è®¿é—®æ§åˆ¶ç­‰çº§",
	"tags": [],
	"description": "",
	"content": "Top open: å…è®¸åœ¨å®šä¹‰å®ä½“çš„æ¨¡å—ã€å…¶ä»–æ¨¡å—ä¸­è®¿é—®ï¼Œå…è®¸å…¶ä»–æ¨¡å—è¿›è¡Œç»§æ‰¿ã€é‡å†™ï¼ˆopenåªèƒ½ç”¨åœ¨ç±»ã€ç±»æˆå‘˜ä¸Šï¼‰ public: å…è®¸åœ¨å®šä¹‰å®ä½“çš„æ¨¡å—ã€å…¶ä»–æ¨¡å—ä¸­è®¿é—®ï¼Œä¸å…è®¸å…¶ä»–æ¨¡å—è¿›è¡Œç»§æ‰¿ã€é‡å†™ internal: åªå…è®¸åœ¨å®šä¹‰å®ä½“çš„æ¨¡å—ä¸­è®¿é—®ï¼Œä¸å…è®¸åœ¨å…¶ä»–æ¨¡å—ä¸­è®¿é—® fileprivate: åªå…è®¸åœ¨å®šä¹‰å®ä½“çš„æºæ–‡ä»¶ä¸­è®¿é—® privateï¼š åªå…è®¸åœ¨å®šä¹‰å®ä½“çš„å°é—­å£°æ˜ä¸­è®¿é—® ç»å¤§éƒ¨åˆ†å®ä½“é»˜è®¤éƒ½æ˜¯internalçº§åˆ«\nå‡†åˆ™1: ä½ç­‰çº§çš„å®šä¹‰ä¸èƒ½è¢«é«˜ç­‰çº§çš„å®šä¹‰åŒ…å«ï¼Œå¹¶æš´éœ²å‡ºå» //fileprivate ç­‰çº§çš„ç±» fileprivate class Person {} public var p : Person //âŒ public class Jason : Person {} //âŒ fileprivate class John : Person {} //æ­£ç¡® å‡†åˆ™2: æ³›å‹ä½¿ç”¨åœºæ™¯ä¸­ï¼Œåº”è¯¥ä»¥æœ€ä½è®¿é—®ç­‰çº§çš„é‚£ä¸ªç±»å‹ä¸ºå‡†ã€‚ internal class Car {} fileprivate class Dog {} //æœ€ä½ç­‰çº§ public class Person\u0026lt;T1, T2\u0026gt; {} fileprivate var p = Person\u0026lt;Car, Dog\u0026gt;() //ä»¥æœ€ä½ç­‰çº§ä¸ºå‡†ï¼Œè¯¥å˜é‡å¿…é¡»è®¾å®šä¸º fileprivate å‡†åˆ™3: ç±»å‹çš„ç­‰çº§ä¼šå½±å“å®ƒçš„å‡½æ•°ï¼Œå˜é‡ç­‰è®¿é—®ç­‰çº§ã€‚ fileprivate class Person { var age : Int //ä¹Ÿæ˜¯fileprivate } å‡†åˆ™4: æºç æ–‡ä»¶æœ€å¤–é¢çš„privateç­‰åŒäº fileprivateã€‚ //æ–‡ä»¶æœ€å¤–å±‚çš„ private Dogç»“æ„ï¼Œç­‰åŒäºfileprivateç­‰çº§ã€‚ private struct Dog { private var age: Int = 0 //ä½†å®ƒçš„å±æ€§å’Œå‡½æ•°éƒ½æ˜¯ privateï¼Œåªèƒ½åœ¨ Dogç»“æ„å£°æ˜é‡Œä½¿ç”¨ã€‚ func run() {} //è·Ÿéš Dogçš„ç­‰çº§ï¼Œéƒ½æ˜¯fileprivate } fileprivate struct Person { var dog: Dog = Dog() mutating func walk() { dog.run() //å¯ä»¥è®¿é—® dog.age = 1 //âŒç¼–è¯‘æŠ¥é”™ï¼Œå› ä¸ºage æ˜¯privateçš„ } } å‡†åˆ™5: å¯ä»¥å•ç‹¬è®¾å®šå±æ€§çš„ set å’Œ getçš„è®¿é—®ç­‰çº§ struct Dog { fileprivate private(set) var age: Int = 0 //getæ˜¯ fileprivateï¼Œset æ˜¯ private } å‡†åˆ™6: ä¸èƒ½ç»™æšä¸¾çš„å€¼å•ç‹¬è®¾ç½®è®¿é—®ç­‰çº§ enum Weather { case winter private case spring //âŒ } "
},
{
	"uri": "https://leverkusen188.github.io/swift/swift_operator_override/",
	"title": "Swift è¿ç®—ç¬¦é‡è½½",
	"tags": [],
	"description": "",
	"content": "åŠ å‡ä¹˜é™¤é‡è½½ åœ¨å¯¹åº”çš„ç»“æ„ï¼Œç±»ï¼Œæšä¸¾é‡Œé‡å†™å³å¯ã€‚\nstruct Point { var x: Int, y: Int static func + (p1: Point, p2: Point) -\u0026gt; Point { Point(x: p1.x + p2.x, y: p1.y + p2.y) } } Equatableï¼ŒComparable Equatable è®¾å®šå¯¹è±¡å¯ä»¥æ¯”è¾ƒæ˜¯å¦ç›¸ç­‰ã€‚é‡å†™ == è¿ç®—ç¬¦ã€‚ Comparable è®¾å®šå¯¹è±¡å¯ä»¥æ¯”è¾ƒå¤§å°ã€‚é‡å†™ \u0026gt;, \u0026lt;, \u0026gt;=, \u0026lt;= ç­‰è¿ç®—ç¬¦ã€‚\nè‡ªå®šä¹‰è¿ç®—ç¬¦ï¼ˆCustom Operatorï¼‰ å¯ä»¥è‡ªå®šä¹‰æ–°çš„è¿ç®—ç¬¦ï¼šåœ¨å…¨å±€ä½œç”¨åŸŸä½¿ç”¨operatorè¿›è¡Œå£°æ˜ã€‚\nprefix operator å‰ç¼€è¿ç®—ç¬¦ postfix operator åç¼€è¿ç®—ç¬¦\n//å‰åè¿ç®—ç¬¦ï¼Œè‡ªå®šä¹‰ +++ ä¸ºæ•´å‹åŠ 2 prefix operator +++ postfix operator ++- prefix func +++ (_ i: inout Int) { i += 2 } postfix func ++- (_ i: inout Int) { i -= 2 } var age = 10 +++age print(age) // 12 age++- print(age) // 10 //ä¸­ç¼€è¿ç®—ç¬¦ï¼Œä¹Ÿå°±æ˜¯æ”¾ç½®åœ¨ä¸¤ä¸ªå˜é‡ä¸­é—´çš„è¿ç®—ç¬¦ï¼Œå¯ä»¥å®šä¹‰å®ƒçš„è¿ç®—ä¼˜å…ˆçº§ infix operator ä¸­ç¼€è¿ç®—ç¬¦ï¼šä¼˜å…ˆçº§ç»„ precedencegroup ä¼˜å…ˆçº§ç»„ { associativity: ç»“åˆæ€§ï¼ˆleft\\right\\noneï¼‰ higherThan: æ¯”è°çš„ä¼˜å…ˆçº§æ›´é«˜ lowerThan: æ¯”è°çš„ä¼˜å…ˆçº§ä½ assignment: trueä»£è¡¨åœ¨å¯é€‰é“¾æ“ä½œä¸­æ‹¥æœ‰è·Ÿèµ‹å€¼è¿ç®—ç¬¦ä¸€æ ·çš„ä¼˜å…ˆçº§ } æ ·ä¾‹ä»£ç ï¼š\n//å£°æ˜è‡ªå®šä¹‰çš„ä¸­ç¼€è¿ç®—ç¬¦ï¼Œåç§°ä¸º PlusMinusPrecedence infix operator +-: PlusMinusPrecedence //å®šä¹‰è¯¥è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§ precedencegroup PlusMinusPrecedence { /*** left: ä»å·¦å¾€å³æ‰§è¡Œï¼Œå¯ä»¥å¤šä¸ªè¿›è¡Œç»“åˆ right: ä»å³å¾€å·¦æ‰§è¡Œï¼Œå¯ä»¥å¤šä¸ªè¿›è¡Œç»“åˆ none: ä¸æ”¯æŒå¤šä¸ªç»“åˆ æ¯”å¦‚ p1 +- p2 +- p3 å°±ä¼šæŠ¥é”™ */ associativity: none higherThan: AdditionPrecedence lowerThan: MultiplicationPrecedence assignment: true } struct Point { var x = 0, y = 0 //å®ç°è¿ç®—ç¬¦ static func +- (p1: Point, p2: Point) -\u0026gt; Point { Point(x: p1.x + p2.x, y: p1.y - p2.y) } } print(Point(x: 10, y: 20) +- Point(x: 5, y: 10)) // Point(x: 15, y: 10) "
},
{
	"uri": "https://leverkusen188.github.io/swift/",
	"title": "Swifts",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "https://leverkusen188.github.io/swiftui/swiftui_ui_refresh/",
	"title": "SwiftUI UIåˆ·æ–°ç»†èŠ‚",
	"tags": [],
	"description": "",
	"content": "SwiftUI çš„View æ¯æ¬¡åˆ·æ–°éƒ½ä¼šé‡æ–°åˆ›å»ºé‡Œé¢çš„View //æ¯æ¬¡textæ”¹å˜å¼•èµ·çš„åˆ·æ–°ï¼Œéƒ½ä¼šé‡æ–°åˆ›å»ºä¸€ä¸ªText @State var text : String var body : some View { Text(text) } Body ä¸­çš„ForEach é‡ç”¨ Bodyä¸­çš„ForEach æ¯æ¬¡åˆ·æ–°å¹¶ä¸ä¼šé‡å»ºã€‚ å› æ­¤ä¸‹é¢çš„ä¾‹å­é‡Œï¼Œå³ä½¿å¤šæ¬¡åˆ·æ–°Viewï¼Œä½†ForEachå¯¹è±¡è¿˜æ˜¯æœ€åˆé‚£ä¸ªï¼Œå¾ªç¯çš„æ¬¡æ•°ä¹Ÿä¸ä¼šéšç€ increasingValue å¢åŠ è€Œæ”¹å˜ã€‚\nvar increasingValue : Int = 1 func testLoopCount() -\u0026gt; Int { increasingValue += 1 return increasingValue } var body : some View { let loop = testLoopCount() //æ¯æ¬¡éƒ½åªå¾ªç¯ä¸¤æ¬¡ï¼Œå› ä¸ºç¬¬ä¸€æ¬¡æ—¶ loop æ˜¯2 ForEach(0..\u0026lt;loop) {_ in Text(â€œTextâ€) } } "
},
{
	"uri": "https://leverkusen188.github.io/swiftui/swiftu_uikit_merge/",
	"title": "SwiftUI ä¸ UIKit æ··ç”¨",
	"tags": [],
	"description": "",
	"content": "UIKit åˆ° SwiftUI ç”¨å®ç°äº† UIViewRepresentable åè®®çš„ â€œfinal classâ€ æˆ–æ˜¯ â€œstructâ€ï¼Œéƒ½å¯ä»¥ç›´æ¥ä½œä¸º SwiftUIé‡Œçš„ View æ¥ä½¿ç”¨ã€‚æ ·ä¾‹ä»£ç å¦‚ä¸‹ï¼š UIKit é‡Œï¼š final class ButtonForSwiftUI : UIViewRepresentable { var btn : UIButton = UIButton(type: .system) //å½“SwiftUIç¬¬ä¸€æ¬¡åˆå§‹åŒ– ButtonForSwiftUIæ—¶ ä¼šè°ƒç”¨ func makeUIView(context: Context) -\u0026gt; UIButton { btn.setTitle(\u0026#34;Button1\u0026#34;, for: .normal) btn.setTitleColor(.green, for: .normal) btn.backgroundColor = .black btn.addTarget(self, action: #selector(onClick), for: .touchUpInside) return btn } //å½“SwiftUI åˆå§‹åŒ–æˆ–åˆ·æ–°viewæ—¶ï¼Œå¦‚æœç”¨åˆ°äº†ButtonForSwiftUIï¼Œå°±ä¼šè°ƒç”¨ func updateUIView(_ uiView: UIButton, context: Context) { //ä» context.coordinator æ¥è®¿é—®åˆ›å»ºçš„ DoWithAction å®ä¾‹ } //åˆ›å»ºä¸€ä¸ªä¸“é—¨å¤„ç†æ•°æ®çš„å®ä¾‹ func makeCoordinator() -\u0026gt; DoWithAction { DoWithAction(self) } @objc private func onClick() { print(\u0026#34;\\(self)\u0026#34;) } //å£°æ˜ æ•°æ®å¤„ç†ç±» class DoWithAction { var control : ButtonForSwiftUI init(_ c : ButtonForSwiftUI) { control = c } } } SwiftUIé‡Œï¼š\nButtonForSwiftUI().frame(width: 100, height: 50, alignment: .leading) SwiftUI åˆ° UIKit ä½¿ç”¨ SwiftUI çš„Viewæ¥åˆ›å»º UIHostingControllerï¼Œç„¶åä½¿ç”¨ UIHostingControllerçš„viewå±æ€§å³å¯ã€‚ æ ·ä¾‹ä»£ç ï¼š\nlet swiftUIVC = UIHostingController(rootView: SwiftUIView()) swiftUIVC.view.frame = CGRect(x: 50, y: 200, width: 200, height: 200) Objective-C ä½¿ç”¨SwiftUI ç”±äº SwiftUI å¯¹OCæ˜¯ä¸èƒ½ç›´æ¥ä½¿ç”¨çš„ï¼Œé‚£ä¹ˆéœ€è¦ç”¨Swift åœ¨ä¸­é—´æ­æ¡¥ï¼Œç”±Swift åˆ›å»º UIHostingControllerï¼Œä½œä¸ºUIViewController è¿”å›ç»™OCæ¥ä½¿ç”¨ã€‚ æ ·ä¾‹ä»£ç ï¼š\nObjective-C\nUIViewController * vc = [SwiftUIFactory vc_swiftUI]; [self presentViewController:vc animated:YES completion:NULL]; Swift\n@objc class SwiftUIFactory : NSObject { @objc class func vc_swiftUI() -\u0026gt; UIViewController { return UIHostingController(rootView: SwiftUIView()) } } SwiftUIå’ŒOCä¹‹é—´å¯ä»¥é€šè¿‡ä¼ å…¥çš„closure æ¥é€šè®¯ã€‚\n"
},
{
	"uri": "https://leverkusen188.github.io/swiftui/swiftui_common_controller/",
	"title": "SwiftUI åŸºç¡€äº¤äº’æ§ä»¶",
	"tags": [],
	"description": "",
	"content": "å¯¼èˆªé¡µé¢è·³è½¬ å¯¼èˆªé¡µé¢ï¼ˆNavigationViewï¼‰çš„ç‚¹å‡»ï¼ˆNavigationLinkï¼‰åè·³è½¬è‡³å¦ä¸€ä¸ªé¡µé¢ã€‚\næ ·ä¾‹ä»£ç ï¼š\n//NavigationView çš„ç‚¹å‡»äº‹ä»¶ä¸ NavigationLink çš„è·³è½¬ç»‘å®š NavigationView { //NavigationLink çš„è·³è½¬ç›®æ ‡ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªView. è¿™é‡Œæ˜¯ LandmarkDetail //åˆ›å»º NavigationLink çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œclosure è¿”å›çš„View å°±æ˜¯å¯ç‚¹å‡»çš„åŒºåŸŸ NavigationLink(destination: LandmarkDetail(landmark: landmarkData[0])) { Text(\u0026#34;hello22\u0026#34;).background(Color.red) } //åœ¨ NavigationView é‡Œå¯ä»¥åˆ›å»ºå¤šä¸ª NavigationLinkï¼Œè·³è½¬åˆ°ä¸åŒçš„é¡µé¢ NavigationLink(destination: LandmarkDetail(landmark: landmarkData[1])) { Text(\u0026#34;hello22\u0026#34;).background(Color.red) } } PSï¼šé¡µé¢è·³è½¬åŒºåŸŸæ˜¯è¯¥NavigationView çš„åŒºåŸŸï¼Œç•Œé¢é‡Œå¯ä»¥æœ‰å¤šä¸ªNavigationViewï¼Œåˆ†åˆ«è¿›è¡Œè·³è½¬ã€‚ å‚è€ƒæˆªå›¾ï¼š å¼¹å‡ºçª—å£(Present) åŒ presentViewController ç”¨ä¸€ä¸ª Binding æ¥æ§åˆ¶å¼¹å‡ºæ—¶æœºã€‚\n@State var showingProfile = false //å½“ showingProfile ä¸ºtrueæ—¶ï¼Œè§¦å‘present .sheet(isPresented: $showingProfile) { //è¿”å› presentå‡ºæ¥çš„view ProfileHost() .environmentObject(self.userData) } //å°† showingProfile è®¾ä¸ºfalseï¼Œèƒ½dismisså¯¹åº”çš„present view\nå¼€å…³æ§ä»¶Toggleï¼ˆUISwitchï¼‰ å¯ä»¥ç»‘å®šä¸€ä¸ªå£°æ˜ä¸º @State çš„Boolå±æ€§ã€‚\n//ç»‘å®šå£°æ˜ä¸º @Stateçš„å¯¹è±¡çš„ä¸€ä¸ªboolå±æ€§ï¼Œè¯¥boolå±æ€§éœ€è¦è®¾ç½®ä¸º @Pubished Toggle(isOn: $profile.isOn) { Text(\u0026#34;Is He On:\u0026#34;) //è¿”å› å·¦è¾¹è®¢åˆ¶çš„è§†å›¾ } æ—¥æœŸé€‰æ‹©å™¨ï¼ˆDatePickerï¼‰ æ—¥æœŸé€‰æ‹©æ§ä»¶\nDatePicker( \u0026#34;Date Pick:\u0026#34;, selection: $profile.birth, in: dateRange, displayedComponents: .date) "
},
{
	"uri": "https://leverkusen188.github.io/swiftui/swiftui_property_wapper/",
	"title": "SwiftUI å¸¸ç”¨å±æ€§åŒ…è£…å™¨",
	"tags": [],
	"description": "",
	"content": "@State å¯ç›‘å¬çš„åŸºæœ¬ç±»å‹ å¯ç›‘å¬çš„çš„æ•°æ®å±æ€§ï¼Œå¯ä»¥è§¦å‘å¯¹åº”viewçš„åˆ·æ–°ã€‚ ç”¨äºåŸºæœ¬æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚ Bool, Int, String\næ ·ä¾‹ä»£ç ï¼š\n//å£°æ˜ å¯ç›‘å¬çš„å±æ€§ @State private var showScore = true Button(â€œShowOrHideâ€) { //ä¿®æ”¹è¯¥å±æ€§ï¼Œä¼šè§¦å‘æ‰§è¡Œ ä½¿ç”¨è¯¥å±æ€§çš„ä»£ç  showScore = !showScore } if showScore { ScorePlate(model: model).padding(.top, 20) } @Binding åŒå‘ç»‘å®šä¸¤ä¸ªå±æ€§ å°†ä¸€ä¸ª @State å±æ€§ç»‘å®šåˆ°ä¸€ä¸ª @Binding å±æ€§ä¸Šã€‚ å½“åŒæ–¹å‘ç”Ÿæ”¹å˜æ—¶ï¼Œéƒ½ä¼šæ”¹å˜å¦ä¸€ä¸ªã€‚\nstruct CategoryHome: View { @State var showingProfile = false var body: some View { List { //å°† self.showingProfile è®¾ä¸º true æ¥å¼¹å‡º ProfileHost Button(\u0026#34;Change\u0026#34;) { self.showingProfile = true } } .sheet(isPresented: $showingProfile) { //å°† showingProfile ç»‘å®šåˆ° ProfileHostçš„ shouldHide ä¸Šï¼Œç„¶å ProfileHostå°±å¯ä»¥æ§åˆ¶shouldHideæ¥åšdismissæ“ä½œäº†ã€‚ ProfileHost(shouldHide: $showingProfile) } } } struct ProfileHost: View { @Binding var shouldHide : Bool var body: some View { Button(\u0026#34;Close\u0026#34;) { // ç»‘å®šçš„showingProfile ä¹Ÿä¼šæ”¹ä¸ºfalseï¼Œå°†å½“å‰view ç»™dismissæ‰ self.shouldHide = false } } } Binding å±æ€§å¯ä»¥ç”¨å¸¸é‡æ¥åˆå§‹åŒ– æ¯”å¦‚ä¸Šé¢çš„ Bindingï¼š\nBinding.constant(false) Bindingå±æ€§çš„åˆå§‹åŒ–å¯ä»¥æ˜¯\n@Binding(projectedValue: .constant(1)) var currentPage : Int init(currentPage : Binding\u0026lt;Int\u0026gt;) { self._currentPage = currentPage } @ObservedObject å¼•ç”¨å¯ç›‘å¬çš„å¯¹è±¡ç±»å‹ å¯ç›‘å¬æŒ‡å®šç±»çš„æ‰€æœ‰å±æ€§å˜åŒ–æƒ…å†µ ä»¥åˆ·æ–°UI. å½“@Published å±æ€§å˜åŒ–æ—¶ï¼Œå­˜å‚¨è¯¥å¯¹è±¡çš„å˜é‡å£°æ˜ä¸º @ObservedObject æ—¶ï¼Œä½¿ç”¨åˆ°è¯¥å®ä¾‹å¯¹è±¡ä»£ç ä¼šæ‰§è¡Œã€‚ è¯¥å±æ€§å¯ä»¥ä»å¤–éƒ¨ä¼ å…¥ï¼Œæˆ–æ˜¯View å¯¹è±¡è‡ªå·±åˆ›å»ºã€‚\næ ·ä¾‹ä»£ç ï¼š\n//ç±»å¿…é¡»å®ç° ObservableObject åè®® class ObserverbleModel: ObservableObject { //éœ€è¦ç›‘å¬çš„å±æ€§ å£°æ˜ä¸º @Publishedã€‚åªæœ‰åœ¨Published å±æ€§å˜åŒ–æ—¶ï¼Œæ‰ä¼šè§¦å‘å£°æ˜äº† @ObservedObject å±æ€§çš„View çš„body é‡ç»˜ @Published var score: Int = 0 var bigScore : Int = 0 } struct ScoreText: View { //éœ€è¦ç›‘å¬çš„æ•°æ®å¯¹è±¡ï¼Œå£°æ˜ä¸º @ObservedObject @ObservedObject var model: ObserverbleModel var body: some View { if model.bigScore \u0026gt; 5 { Text(\u0026#34;Big good\u0026#34;) } else { Text(\u0026#34;Big bad\u0026#34;) } } } @StateObject åˆå§‹åŒ–å¹¶æŒæœ‰çš„å¯ç›‘å¬å¯¹è±¡ è·ŸObservedObject ä¸€æ ·éƒ½æ˜¯å¯ç›‘å¬çš„ã€‚ ä¸åŒçš„æ˜¯ï¼Œå£°æ˜StateObjectçš„Viewï¼Œå¿…é¡»æ˜¯å®ƒåˆ›å»ºçš„è¯¥å¯¹è±¡ï¼ˆStateObjectå±æ€§æ˜¯åªè¯»çš„ï¼‰ï¼Œè¯¥å¯¹è±¡ç”Ÿå‘½å‘¨æœŸè·ŸéšView\n@EnvironmentObject æ— éœ€æ‰‹åŠ¨ä¼ é€’çš„å¯ç›‘å¬å¯¹è±¡ ä½¿ç”¨ObservedObject æ—¶ï¼Œéœ€è¦å°†å¯¹è±¡é€ä¸ªä¼ é€’ç»™å­Viewçš„å±æ€§ã€‚ å¦‚æœä½¿ç”¨ç¯å¢ƒå¯¹è±¡EnvironmentObjectï¼Œåˆ™åªç”¨ä¼ é€’ä¸€æ¬¡ï¼Œè¯¥View å’Œå®ƒä¸‹é¢çš„å­Viewé‡Œï¼Œå£°æ˜ä¸º EnvironmentObjectçš„å¯¹è±¡éƒ½èƒ½è¢«èµ‹å€¼ã€‚ ä¸€ä¸ªViewçš„EnvironmentObject åªèƒ½å£°æ˜ä¸€ä¸ªï¼Œå£°æ˜å¤šä¸ªçš„è¯ï¼Œéƒ½ä¼šæŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚ EnvironmentObjectåªèƒ½é€šè¿‡ environmentObject æ–¹æ³•ä»view å¤–éƒ¨ä¼ å…¥ã€‚\næ ·ä¾‹ä»£ç ï¼š\n//ç¬¬ä¸€çº§å­view struct SubEnvironmentView : View { //å£°æ˜äº†ä¸¤ä¸ªï¼Œä½†éƒ½ä¼šæŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ @EnvironmentObject fileprivate var data : TestBigData @EnvironmentObject fileprivate var data2 : TestBigData var body: some View { VStack { Text(\u0026#34;SubEnvironmentView\u0026#34;).font(.largeTitle).foregroundColor(.red) if data.showText { Text(data2.text).foregroundColor(.red) } SubEnvironmentView2() } } } //ç¬¬äºŒçº§å­view struct SubEnvironmentView2 : View { @EnvironmentObject fileprivate var data : TestBigData var body: some View { VStack { Text(\u0026#34;SubEnvironmentView2\u0026#34;).font(.largeTitle).foregroundColor(.blue) if data.showText { Text(data.text).foregroundColor(.blue) } } } } //é¡¶çº§view struct StateObservedEnvironment: View { @StateObject fileprivate var data : TestBigData = TestBigData() @EnvironmentObject fileprivate var envData : TestBigData var body: some View { VStack { Toggle(isOn: $data.showText) { Text(\u0026#34;å¼€å…³\u0026#34;) }.onChange(of: data.showText) { newValue in envData.showText = newValue } SubEnvironmentView() } } } //æœ€å¤–é¢ï¼Œå°†ç¯å¢ƒå¯¹è±¡ä¼ å…¥ StateObservedEnvironment().environmentObject(TestBigData()) ä»£ç è¯´æ˜ï¼š\nObservedObject å’Œ StateObject å¯ä»¥å¾€ä¸‹ç©¿é€ ç»™ä¸‹çº§viewå»ä½¿ç”¨ï¼ˆæ¯”å¦‚ä»£ç é‡Œçš„ ScoreTextï¼‰ ObservedObject å’Œ StateObject å¯ä»¥ç”±swiftUI å¤–é¢ä¼ å…¥ã€‚ å±æ€§å˜åŒ–è§¦å‘ ä½¿ç”¨å±æ€§çš„ä»£ç å—æ‰§è¡Œçš„æ—¶æœºï¼Œ æ˜¯å˜åŒ–å±æ€§çš„ä»£ç ä½œç”¨åŸŸå®Œæ¯•åæ‰è§¦å‘ æ¯”å¦‚ï¼š Button(â€œShowOrHideâ€) { //ä¿®æ”¹è¯¥å±æ€§ï¼Œä¼šè§¦å‘æ‰§è¡Œ ä½¿ç”¨è¯¥å±æ€§çš„ä»£ç  showScore = !showScore //æ­¤æ—¶ä¸ä¼šåŒæ­¥è§¦å‘ ç›‘å¬è€…çš„ä»£ç å— print(â€œoverâ€) //è¯¥ä½œç”¨åŸŸä»£ç æ‰§è¡Œå®Œæ¯•åï¼Œæ‰ä¼šè§¦å‘ç›‘å¬ä»£ç  } Published å±æ€§çš„å˜åŒ–å¿…é¡»åœ¨ä¸»çº¿ç¨‹ï¼Œå› ä¸ºUIåˆ·æ–°ä¼šåŒæ­¥æ‰§è¡Œã€‚ å¯ç›‘å¬çš„å¯¹è±¡Aé‡Œï¼Œå¦‚æœå¦‚æœè¦è®©å­å±æ€§ä¸ºå¯¹è±¡ æˆ–æ˜¯æ•°ç»„å¯¹è±¡çš„å˜åŒ– ä¹Ÿè¢«ç›‘å¬åˆ°çš„è¯ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡å¾—æ˜¯ structï¼ˆå› ä¸ºPublishedçš„æˆå‘˜å˜é‡åªæœ‰å˜åŒ–æ—¶ï¼Œæ‰ä¼šè§¦å‘ä¸»ç±»çš„ç›‘å¬äº‹ä»¶ï¼Œ è€Œstruct çš„å±æ€§å˜åŒ–æ—¶ï¼Œä¼šç”Ÿæˆæ–°çš„structå®ä¾‹ï¼Œç”±æ­¤è§¦å‘ä¸»ç±»çš„ç›‘å¬äº‹ä»¶ï¼‰ æ¯”å¦‚ï¼š class TestBigData : ObservableObject { var realShow : Bool = true @Published var subData : SubTestData = SubTestData() @Published var subDataArr = [SubTestData()] } //å¿…é¡»æ˜¯struct struct SubTestData { var subShowFlag : Bool = true } PS: å¦‚æœå£°æ˜ä¸ºclassï¼Œå½“subShowFlag å˜åŒ–æ—¶ï¼Œå®é™…ä¸Š TestBigData çš„é‚£ä¸¤ä¸ªPublished å±æ€§çš„å€¼å¹¶æ²¡æœ‰å˜åŒ–ï¼Œå› æ­¤æ— æ³•è§¦å‘ ç›‘å¬äº‹ä»¶\n"
},
{
	"uri": "https://leverkusen188.github.io/swiftui/",
	"title": "SwiftUIs",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "https://leverkusen188.github.io/xctest/xctest_mork/",
	"title": "XCTest Mork",
	"tags": [],
	"description": "",
	"content": "ä»¥ç½‘ç»œè¯·æ±‚åœºæ™¯ä¸ºä¾‹ æ ·ä¾‹ä»£ç ï¼š\nclass NetworkManager { func loadData(from url: URL, completionHandler: @escaping (NetworkResult) -\u0026gt; Void) { let task = URLSession.shared.dataTask(with: url) { data, _, error in // Create either a .success or .failure case of a result enum let result = data.map(NetworkResult.success) ?? .failure(error) completionHandler(result) } task.resume() } } å¯ä»¥ç”±ä¸¤ç§æ–¹æ³•æ¥mockæ•°æ®ã€‚\nåˆ›å»º ä½¿ç”¨åˆ°çš„ç±»çš„mockå­ç±»ï¼Œå¹¶é‡å†™è°ƒç”¨è·¯å¾„ä¸Šçš„ç›¸å…³æ–¹æ³•ï¼Œæ¥è¿”å›mockæ•°æ® // We create a partial mock by subclassing the original class class URLSessionDataTaskMock: URLSessionDataTask { private let closure: () -\u0026gt; Void init(closure: @escaping () -\u0026gt; Void) { self.closure = closure } // We override the \u0026#39;resume\u0026#39; method and simply call our closure // instead of actually resuming any task. override func resume() { closure() } } class URLSessionMock: URLSession { typealias CompletionHandler = (Data?, URLResponse?, Error?) -\u0026gt; Void // Properties that enable us to set exactly what data or error // we want our mocked URLSession to return for any request. var data: Data? var error: Error? override func dataTask( with url: URL, completionHandler: @escaping CompletionHandler ) -\u0026gt; URLSessionDataTask { let data = self.data let error = self.error return URLSessionDataTaskMock { completionHandler(data, nil, error) } } } //è°ƒæ•´ä¸€ä¸‹NetworkManagerçš„å®ç° class NetworkManager { private let session: URLSession // By using a default argument (in this case .shared) we can add dependency // injection without making our app code more complicated. init(session: URLSession = .shared) { self.session = session } func loadData(from url: URL, completionHandler: @escaping (NetworkResult) -\u0026gt; Void) { let task = session.dataTask(with: url) { data, _, error in let result = data.map(NetworkResult.success) ?? .failure(error) completionHandler(result) } task.resume() } } å°†ç½‘ç»œè¯·æ±‚çš„æ–¹æ³•åŒ…è£…ä¸ºsessionçš„ä¸€ä¸ªæ–¹æ³•ï¼ˆå‰¥ç¦»ä¸DataTaskçš„å…³ç³»ï¼‰ï¼›ç„¶ååˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„åè®®ï¼Œè¯¥åè®®å®ç°äº†è¯¥æ–¹æ³•ï¼›å†è®©URLSessionç±»æ¥éµå¾ªè¯¥åè®®ï¼Œå¹¶æŒ‰éœ€æ±‚å®ç°è¯¥æ–¹æ³•ï¼›æœ€ååˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰mockç±»ç—…éµå¾ªè¯¥åè®®ï¼Œåœ¨è¯¥æ–¹æ³•é‡Œè¿”å›æŒ‡å®šçš„Mockæ•°æ®ã€‚ //ç½‘ç»œè¯·æ±‚æ–¹æ³•æ”¶æ•›ä¸ºä¸€ä¸ªè‡ªå®šä¹‰æ–¹æ³• class NetworkManager { private let session: NetworkSession init(session: NetworkSession = URLSession.shared) { self.session = session } func loadData(from url: URL, completionHandler: @escaping (NetworkResult) -\u0026gt; Void) { session.loadData(from: url) { data, error in let result = data.map(NetworkResult.success) ?? .failure(error) completionHandler(result) } } } //åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„åè®®ï¼Œè¯¥åè®®å®ç°äº†è¯¥æ–¹æ³• protocol NetworkSession { func loadData(from url: URL, completionHandler: @escaping (Data?, Error?) -\u0026gt; Void) } //å†è®©URLSessionç±»æ¥éµå¾ªè¯¥åè®®ï¼Œå¹¶æŒ‰éœ€æ±‚å®ç°è¯¥æ–¹æ³• extension URLSession: NetworkSession { func loadData(from url: URL, completionHandler: @escaping (Data?, Error?) -\u0026gt; Void) { let task = dataTask(with: url) { (data, _, error) in completionHandler(data, error) } task.resume() } } //æœ€ååˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰mockç±»å¹¶éµå¾ªè¯¥åè®®ï¼Œåœ¨è¯¥æ–¹æ³•é‡Œè¿”å›æŒ‡å®šçš„Mockæ•°æ®ã€‚ class NetworkSessionMock: NetworkSession { var data: Data? var error: Error? func loadData(from url: URL, completionHandler: @escaping (Data?, Error?) -\u0026gt; Void) { completionHandler(data, error) } } "
},
{
	"uri": "https://leverkusen188.github.io/xctest/xctest_waiter/",
	"title": "XCTest åŸºç¡€çŸ¥è¯† &amp; Waiter",
	"tags": [],
	"description": "",
	"content": "åŸºæœ¬çŸ¥è¯† å¼‚æ­¥æ¥å£æµ‹è¯•ï¼Œå¯ä»¥ç”¨ XCTestExpectationã€‚ æµ‹è¯•æ€§èƒ½ï¼Œå¯ç”¨ measureBlock æ¥å£ã€‚ å…³äºXCTWaiterç”¨æ³• ç®€å•æ¥è¯´å°±æ˜¯é€šè¿‡delegateçš„æ–¹å¼æŠŠå¤„ç†XCTExpectationçš„æ–¹æ³•è§£è€¦ï¼Œå¯ä»¥åœ¨delegateå›è°ƒä¸­å¤„ç†è¶…æ—¶ï¼Œä¸­æ–­ç­‰å¼‚æ­¥æµ‹è¯•ç”¨ä¾‹çš„å¼‚å¸¸ï¼Œæ ¹æ®å®é™…éœ€æ±‚ï¼Œå†³å®šæ˜¯å¦è®©case é€šè¿‡ï¼Œæˆ–æ˜¯æŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚\næ ·ä¾‹ä»£ç ï¼š\nclass WeiboModelTest : XCTestCase { var model : WeiboModel? let bag = DisposeBag() let chinaCode = \u0026#34;001\u0026#34; var waiter : XCTWaiter? override func setUpWithError() throws { self.model = WeiboModel() self.waiter = XCTWaiter(delegate: self) } func testWaiter() { let expectaton1:XCTestExpectation = expectation(description: \u0026#34;Fail1\u0026#34;) DispatchQueue.global().async { Thread.sleep(forTimeInterval: 1) expectaton1.fulfill() } expectaton1.isInverted = true waiter?.wait(for: [expectaton1], timeout: 2) } func testWaiterSuccess() { let expectaton1:XCTestExpectation = expectation(description: \u0026#34;Pass\u0026#34;) DispatchQueue.global().async { Thread.sleep(forTimeInterval: 1) expectaton1.fulfill() } waiter?.wait(for: [expectaton1], timeout: 0.5) } } ç„¶ååœ¨delegateå›è°ƒé‡Œåšè‡ªå®šä¹‰å¤„ç† extension WeiboModelTest { override func waiter(_ waiter: XCTWaiter, didFulfillInvertedExpectation expectation: XCTestExpectation) { if (expectation.expectationDescription == \u0026#34;Fail\u0026#34;) { XCTFail(expectation.expectationDescription) } } override func waiter(_ waiter: XCTWaiter, didTimeoutWithUnfulfilledExpectations unfulfilledExpectations: [XCTestExpectation]) { if (unfulfilledExpectations[0].expectationDescription != \u0026#34;Pass\u0026#34;) { XCTFail(unfulfilledExpectations[0].expectationDescription) } } } è™½ç„¶ä¸¤ä¸ªcaseé‡Œçš„expectationéƒ½è¶…æ—¶äº†ï¼Œä½† testWaiter ä¼šå¤±è´¥ï¼› è€ŒtestWaiterSuccess ä¼šæˆåŠŸã€‚ "
},
{
	"uri": "https://leverkusen188.github.io/xctest/",
	"title": "XCTests",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "https://leverkusen188.github.io/iosrelated/%E4%B8%80%E6%AC%A1%E8%BF%98%E5%8E%9Fios-release%E5%8C%85%E7%9A%84%E5%8D%A1%E9%A1%BF%E5%A0%86%E6%A0%88%E7%9A%84%E8%AE%B0%E5%BD%95/",
	"title": "ä¸€æ¬¡è¿˜åŸios releaseåŒ…çš„å¡é¡¿å †æ ˆçš„è®°å½•",
	"tags": [],
	"description": "",
	"content": "å‰æï¼š æµ‹è¯•æäº†ä¸€ä¸ªå…³äºæŸä¸ªæ“ä½œä¸‹ä¼šæ¯”è¾ƒå¡é¡¿çš„é—®é¢˜ï¼Œå¹¶ä¸Šä¼ äº†applogã€‚\nlogåˆæ¢ appå†…éƒ¨å·¥å…·çš„InnerToolBlockDetect é‡Œè®°å½•äº†å¡é¡¿çš„æƒ…å†µå¹¶æ‰“å°äº†å¯¹åº”çš„çº¿ç¨‹å †æ ˆä¿¡æ¯ã€‚ ä½†ç”±äºæµ‹è¯•ç”¨çš„æ˜¯releaseåŒ…ï¼Œå› æ­¤å †æ ˆé‡Œéƒ½æ˜¯ç›¸åº”å‡½æ•°çš„ä½ç§»åœ°å€ï¼Œæ— æ³•çœ‹å‡ºçœŸæ­£çš„å¡é¡¿ä»£ç ã€‚\nlibsystem_kernel.dylib 0x1f59140f4 mach_msg_trap + 8 libsystem_kernel.dylib 0x1f59135a0 mach_msg + 72 libdispatch.dylib 0x1f5778884 \u0026lt;redacted\u0026gt; + 500 libdispatch.dylib 0x1f5778d14 \u0026lt;redacted\u0026gt; + 52 libxpc.dylib 0x1f59d891c xpc_connection_send_message_with_reply_sync + 204 CoreMedia 0x1f93a9514 FigXPCRemoteClientSendSyncMessageCreatingReply + 36 CoreMedia 0x1f92ca884 \u0026lt;redacted\u0026gt; + 192 CoreFoundation 0x1f5d15d30 \u0026lt;redacted\u0026gt; + 192 MediaToolbox 0x1fa95459c \u0026lt;redacted\u0026gt; + 1448 MediaToolbox 0x1fa953f6c FigAssetRemoteCreateWithURL + 120 AVFoundation 0x1fbdf5bb0 \u0026lt;redacted\u0026gt; + 192 AVFoundation 0x1fbd0a874 \u0026lt;redacted\u0026gt; + 884 AVFoundation 0x1fbd033e4 \u0026lt;redacted\u0026gt; + 100 Fly-rls 0x106382da0 _ZNSt3__114__thread_proxyINS_5tupleIJNS_10unique_ptrINS_15__thread_structENS_14default_deleteIS3_EEEEZN3dji6common6WorkerC1EvEUlvE_EEEEEPvSC_ + 1355164 Fly-rls 0x106383224 _ZNSt3__114__thread_proxyINS_5tupleIJNS_10unique_ptrINS_15__thread_structENS_14default_deleteIS3_EEEEZN3dji6common6WorkerC1EvEUlvE_EEEEEPvSC_ + 1356320 Fly-rls 0x1044c5fec _mh_execute_header + 303084 Fly-rls 0x1044c5e1c _mh_execute_header + 302620 Fly-rls 0x10466c0ec _mh_execute_header + 2031852 Fly-rls 0x10466b920 _mh_execute_header + 2029856 Fly-rls 0x1044bd92c _mh_execute_header + 268588 libdispatch.dylib 0x1f57c0a38 \u0026lt;redacted\u0026gt; + 24 libdispatch.dylib 0x1f57c17d4 \u0026lt;redacted\u0026gt; + 16 libdispatch.dylib 0x1f576f008 \u0026lt;redacted\u0026gt; + 1068 CoreFoundation 0x1f5d1432c \u0026lt;redacted\u0026gt; + 12 CoreFoundation 0x1f5d0f264 \u0026lt;redacted\u0026gt; + 1924 CoreFoundation 0x1f5d0e7c0 CFRunLoopRunSpecific + 436 GraphicsServices 0x1f7f0f79c GSEventRunModal + 104 UIKitCore 0x222813c38 UIApplicationMain + 212 Fly-rls 0x10448482c _mh_execute_header + 34860 libdyld.dylib 0x1f57d28e0 \u0026lt;redacted\u0026gt; + 4 å †æ ˆè¿˜åŸ æ‰‹å¤´ä¸Šæœ‰å¯¹åº”appåŒ…çš„ dysm æ–‡ä»¶ï¼ŒæŸ¥äº†ä¸€ä¸‹ï¼Œå‘ç°å¯ä»¥ç”¨ xcrun å‘½ä»¤æ¥è¿˜åŸå †æ ˆã€‚æ¯”å¦‚ï¼š\nxcrun atos -o Foo.app/Foo -arch arm64 -l 0xd7000 0x0033f9bb å…¶ä¸­ 0xd7000 æ˜¯appæ‰§è¡Œæ–‡ä»¶çš„ è¿è¡Œå¼€å§‹å†…å­˜åœ°å€ï¼Œ0x0033f9bb æ˜¯ å¯¹åº”çš„å †æ ˆå‡½æ•°åœ°å€ï¼ˆæ¯”å¦‚ä¸Šé¢çš„0x1044bd92cï¼‰ å‡½æ•°åœ°å€éƒ½å·²çŸ¥ï¼Œä½†ä¸åƒcrashçš„ ipsæ–‡ä»¶ï¼Œè¿™é‡Œå¹¶æ²¡æœ‰åˆ—å‡º Fly-rls æ‰§è¡Œæ–‡ä»¶çš„è¿è¡Œèµ·å§‹åœ°å€ã€‚ åœ¨ crash çš„ipsæ–‡ä»¶é‡Œ,åˆ—å‡ºäº† å¯¹åº”æ‰§è¡Œæ–‡ä»¶çš„è¿è¡Œæ—¶å†…å­˜åœ°å€åŒºé—´ã€‚\nBinary Images: 0x104144000 - 0x10922bfff Fly-dbg arm64 \u0026lt;191a2e0e899a36d2affc5183f78af174\u0026gt; /var/containers/Bundle/Application/25A26AFE-CE43-4E1C-B3E0-543BA6C28ADB/Fly-dbg.app/Fly-dbg ä½†æˆ‘å‘ç°ï¼Œmainå‡½æ•°çš„å…¥å£åœ°å€ å°±æ˜¯appè¿è¡Œå¼€å§‹åœ°å€ åŠ ä¸Šä¸€éƒ¨åˆ†ä½ç§»ï¼ˆè¯¥ä½ç§»åœ¨ä¸åŒçš„build åŒ…é‡Œï¼Œæ˜¯ä¸ä¸€æ ·çš„ï¼‰ã€‚ å¦‚ï¼š\n34 Fly-dbg 0x000000010415466c 0x104144000 + 67180 äºæ˜¯æˆ‘ä¾¿å»buglyä¸Šï¼Œæœç´¢ å¯¹åº”releaseåŒ…çš„crashè®°å½•ï¼Œçœ‹èƒ½ä¸èƒ½æ‰¾åˆ°äº§ç”Ÿå¡é¡¿çš„ç‰ˆæœ¬çš„appåŒ…çš„ mainå‡½æ•°ä½ç§»åœ°å€ã€‚ éšä¾¿æœäº†ä¸€æ¡crashè®°å½•ï¼Œå¹¶æŸ¥çœ‹è¿™ä¸ªè®°å½•çš„åŸå§‹ å †æ ˆåœ°å€ä¿¡æ¯ï¼ŒæˆåŠŸæ‰¾åˆ°äº† ä½ç§»å¤§å°ï¼ˆå°±æ˜¯34860ï¼‰ã€‚\nFly-rls\t0x000000010252082c 0x0000000102518000 + 34860 çœ‹ï¼Œè·Ÿå¡é¡¿å †æ ˆlog çš„ ä½ç§»æ˜¯ä¸€æ ·çš„ã€‚ é‚£ä¹ˆç”¨ ** 0x10448482c** å‡å» 34860 å°±æ˜¯å¡é¡¿å‘ç”Ÿé‚£æ¬¡è¿è¡Œçš„appçš„èµ·å§‹å†…å­˜åœ°å€äº†ã€‚ ç®—å‡ºæ¥æ˜¯ 0x10447c000 ç„¶åå†è·‘xcrun å‘½ä»¤å°±å¯ä»¥é¡ºåˆ©è§£æå‡ºå¡é¡¿å †æ ˆäº†ã€‚\nxcrun atos -o /Users/spy.liu/Downloads/_GO_Lite_Develop_697.dSYM/\\ Fly-rls.app.dSYM/Contents/Resources/DWARF/\\ Fly-rls -arch arm64 -l 0x10447c000 0x1044c5e1c æŠŠå¤šä¸ªå †æ ˆåœ°å€æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œæ¢è¡Œéš”å¼€ï¼Œå¯ä»¥ä¸€æ¬¡è§£æå¤šä¸ªå †æ ˆã€‚\nxcrun atos -o /Users/spy.liu/Downloads/_GO_Lite_Develop_697.dSYM/\\ Fly-rls.app.dSYM/Contents/Resources/DWARF/\\ Fly-rls -arch arm64 -l 0x10447c000 -f addresss.txt "
},
{
	"uri": "https://leverkusen188.github.io/javascript/function/",
	"title": "å‡½æ•°ç›¸å…³è¯­æ³•æ³¨æ„ç‚¹",
	"tags": [],
	"description": "",
	"content": "å‚æ•°ä¸è¿”å›å€¼ 1. æ— returnå€¼çš„å‡½æ•°ï¼Œè¿”å› undefined\nfunction tttt() { } if (tttt() === undefined) { console.log(\u0026#39;undefined111\u0026#39;) } 2. å‡½æ•°åªç”¨åå­—æ¥é™å®šå”¯ä¸€æ€§\nfunction t1(p1) { console.log(\u0026#39;t1 p1=\u0026#39; + p1) } function t1(p1, p2) { console.log(\u0026#39;t1 p1=\u0026#39; + p1 + \u0026#34;p2=\u0026#34;+p2) } å‰é¢é‚£ä¸ªt1 ä¼šè¢«è¦†ç›–\n3. è°ƒç”¨å‡½æ•°æ—¶ï¼Œå‚æ•°ä¸ªæ•°ä¸ä¸€å®šè¦ä¸€è‡´ å¦‚æœå‚æ•°å¤šäº†ï¼Œå‡½æ•°ä¼šå¿½ç•¥ å¦‚æœå‚æ•°å°‘äº†ï¼Œé»˜è®¤ä¸º undefined\n4. å‡½æ•°å†…ä½¿ç”¨ arguments arguments å¯ä»¥è®¿é—®å‡½æ•°ä¼ å…¥çš„å‚æ•°ï¼Œä½†ä¸åŒäºæ•°ç»„ã€‚å¯ä»¥ç”¨ length æ¥åˆ¤æ–­ä¸ªæ•°ï¼Œä»¥åŠ ä¸‹æ ‡æ¥è®¿é—®\nfunction abs() { if (arguments.length === 0) { return 0; } var x = arguments[0]; return x \u0026gt;= 0 ? x : -x; } abs(); // 0 abs(10); // 10 abs(-9); // 9 5. ç”¨rest è·å–å¤šå‡ºçš„å‚æ•°æ•°ç»„ï¼Œreståªèƒ½æ”¾åœ¨å‚æ•°æœ€åé¢å£°æ˜\nfunction foo(a, b, ...rest) { console.log(\u0026#39;a = \u0026#39; + a); console.log(\u0026#39;b = \u0026#39; + b); console.log(rest); } foo(1, 2, 3, 4, 5); ç»“æœ: a = 1 b = 2 Array [ 3, 4, 5 ]\nå¯¹è±¡å†…çš„å‡½æ•°çš„ this é—®é¢˜ ä»¥ä¸‹é¢ä»£ç ä¸ºä¾‹ï¼š\nfunction getAge() { var y = new Date().getFullYear(); return y - this.birth; } var xiaoming = { name: \u0026#39;å°æ˜\u0026#39;, birth: 1990, age: getAge }; xiaoming.age(); // 32, æ­£å¸¸ç»“æœ getAge(); // NaN åœ¨ä¸€ä¸ªæ–¹æ³•å†…éƒ¨ï¼Œthisæ˜¯ä¸€ä¸ªç‰¹æ®Šå˜é‡ï¼Œå®ƒå§‹ç»ˆæŒ‡å‘å½“å‰å¯¹è±¡ã€‚ é€šè¿‡ xiaoming è¿™ä¸ªå¯¹è±¡è°ƒç”¨æ—¶ï¼Œthis å°±æ˜¯è¯¥å¯¹è±¡ã€‚ è€Œç›´æ¥è°ƒç”¨ getAge() æ—¶ï¼Œthis å°±å˜æˆå…¨å±€çš„ windowäº†ã€‚\nvar fn = xiaoming.age; // å…ˆæ‹¿åˆ°xiaomingçš„ageå‡½æ•° fn(); // NaN ä¸Šé¢çš„ç”¨æ³•ä¹Ÿæ˜¯ä¸è¡Œçš„ï¼Œå¿…é¡»è¦æŒ‡å®šè°ƒç”¨å“ªä¸ªå¯¹è±¡çš„ age å‡½æ•°ã€‚\nthisæŒ‡é’ˆåªåœ¨ageæ–¹æ³•çš„å‡½æ•°å†…æŒ‡å‘xiaomingï¼Œå¦‚æœæ˜¯ age æ–¹æ³•å†…çš„æ–¹æ³•é‡Œï¼Œåˆ™åˆæŒ‡å‘å…¨å±€windowäº†ï¼Œå‚è€ƒä¸‹ä¾‹ï¼š\nfunction getAge() { function getAgeFromBirth() { var y = new Date().getFullYear(); return y - this.birth; } return getAgeFromBirth(); } var xiaoming = { name: \u0026#39;å°æ˜\u0026#39;, birth: 1990, age: getAge }; xiaoming.age(); // NaN å› ä¸ºåœ¨getAge çš„ getAgeFromBirth é‡Œï¼Œthiså·²ç»ä¸å†æŒ‡å‘è°ƒç”¨æ–¹æ³•çš„å¯¹è±¡äº†ã€‚ å¯ä»¥å¦‚ä¸‹ä¿®æ”¹ï¼š(ç”¨ä¸€ä¸ªä¸´æ—¶å˜é‡ that æ¥ä¿å­˜thisæŒ‡é’ˆå³å¯)\nfunction getAge() { const that = this; function getAgeFromBirth() { var y = new Date().getFullYear(); return y - that.birth; } return getAgeFromBirth(); } å‡½æ•°çš„å¦ç±»è°ƒç”¨æ–¹å¼(apply å’Œ call) Applyå’Œcall èƒ½æŒ‡å®šå‡½æ•°çš„è°ƒç”¨å¯¹è±¡ï¼Œä»¥è®©this æŒ‡é’ˆæŒ‡å‘æˆ‘ä»¬éœ€è¦çš„å¯¹è±¡ã€‚ ä»¥ä¸Šé¢çš„ xiaoming ä¸ºä¾‹ã€‚\nlet tmpAge = xiaoming.age; tmpAge.apply(xiaoming, []) tmpAge.call(xiaoming) Applyå’Œcall çš„åŒºåˆ«åœ¨äºå‡½æ•°å‚æ•°çš„ä¼ é€’æ–¹å¼ï¼Œapplyç”¨çš„æ˜¯æ•°ç»„ï¼Œè€Œ callæ˜¯ä¾æ¬¡ä¼ å…¥\næ•°ç»„çš„ Map å’Œ Reduceç”¨æ³• Map å°±æ˜¯æŠŠæ•°ç»„çš„æ¯ä¸ªå…ƒç´  ç”¨ä¼ å…¥çš„å‡½æ•°å¤„ç†å ï¼Œå°†è¿”å›çš„æ–°å…ƒç´ ç»„æˆæ–°æ•°ç»„ã€‚ PS: ä¼ å…¥çš„å‡½æ•° åªæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œä¸”å¿…é¡»æœ‰è¿”å›å€¼ã€‚ æ ·ä¾‹ä»£ç ï¼š\n[1,2,3].map(function(x) { return x + 1; }) //è¿”å› [2,3,4] Reduce çš„å‡½æ•°å‚æ•° æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä¸º ä¸Šæ¬¡ä¸¤ä¸ªå…ƒç´ çš„è®¡ç®—ç»“æœ å’Œä¸‹ä¸€ä¸ªå…ƒç´ ã€‚ï¼ˆå¦‚æœæ˜¯é¦–ä¸ªå…ƒç´ ï¼Œé‚£å‚æ•°å°±æ˜¯ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªå…ƒç´ ï¼‰ [1,2,3].reduce((a, b) =\u0026gt; a+b) //ç»“æœæ˜¯6ï¼Œ ä¹Ÿå°±æ˜¯ (1+2) + 3 [x1, x2, x3, x4].reduce(f) = f(f(f(x1, x2), x3), x4)\næ•°ç»„çš„Filter ç”¨æ³• Filter ä¼ å…¥ä¸€ä¸ªä¸‰å‚æ•°ï¼ˆelementï¼Œ indexï¼Œ arrayï¼‰çš„å‡½æ•°ï¼Œç”¨ä»¥å†³å®šå½“å‰indexçš„å…ƒç´ æ˜¯å¦éœ€è¦ä¿ç•™åœ¨è¿”å›çš„æ–°æ•°ç»„é‡Œã€‚ æ ·ä¾‹ä»£ç ï¼š(è¿”å›å¥‡æ•°æ•°ç»„)\n[1,2,3].filter( function (ele, i, array) { return eye % 2 == 1; }); æ•°ç»„çš„å…¶ä»–é«˜é˜¶å‡½æ•° every() æ–¹æ³•å¯ä»¥åˆ¤æ–­æ•°ç»„çš„æ‰€æœ‰å…ƒç´ æ˜¯å¦æ»¡è¶³æµ‹è¯•æ¡ä»¶ã€‚\nvar arr = [\u0026#39;Apple\u0026#39;, \u0026#39;pear\u0026#39;, \u0026#39;orange\u0026#39;]; console.log(arr.every(function (s) { return s.length \u0026gt; 0; })); // true, å› ä¸ºæ¯ä¸ªå…ƒç´ éƒ½æ»¡è¶³s.length\u0026gt;0 find() æ–¹æ³•ç”¨äºæŸ¥æ‰¾ç¬¦åˆæ¡ä»¶çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœæ‰¾åˆ°äº†ï¼Œè¿”å›è¿™ä¸ªå…ƒç´ ï¼Œå¦åˆ™ï¼Œè¿”å›undefined\nfindIndex() å’Œfind() ç±»ä¼¼ï¼Œä¹Ÿæ˜¯æŸ¥æ‰¾ç¬¦åˆæ¡ä»¶çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œä¸åŒä¹‹å¤„åœ¨äºfindIndex()ä¼šè¿”å›è¿™ä¸ªå…ƒç´ çš„ç´¢å¼•ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œè¿”å›-1ï¼š\n"
},
{
	"uri": "https://leverkusen188.github.io/rxswift/citydemo/",
	"title": "å›½å®¶çœä»½åŸå¸‚demo ç¬”è®°å¿ƒå¾—",
	"tags": [],
	"description": "",
	"content": " å°†viewçš„rxçš„ControlEvent äº modelçš„æŸä¸ªSubjectï¼ˆObservable å’Œ Observerçš„åˆä½“ï¼‰ç»‘å®šèµ·æ¥ã€‚è€Œmodelçš„è¿™ä¸ªsubjectä½œä¸ºç½‘ç»œè¯·æ±‚çš„å‘èµ·è€…ï¼ŒåŒ…è£…ä¸€ä¸ªObservable ç»™UIå»è®¢é˜…ï¼Œå¹¶è·å–æŸ¥è¯¢è¿”å›çš„æ•°æ®ç”¨ä»¥æ›´æ–°UI modelæä¾›Observable æ¥ç»™UI æ›´æ–°ï¼Œå°½é‡ä¿è¯ è¯¥Observableçš„Element ä¸Viewçš„Observer æˆ–æ˜¯ setterå±æ€§ä¸€è‡´ï¼Œè¿™æ ·å°±å¯ä»¥ç›´æ¥é€šè¿‡binding æ¥æ›´æ–°ï¼Œè€Œä¸ç”¨å¤šä½™çš„ä»£ç ã€‚ ç¦æ­¢å‡ºç°åµŒå¥—è®¢é˜…ä»£ç ï¼Œéš¾ä»¥é˜…è¯»ä»¥åŠ å®¹æ˜“å‡ºç°retain circle Demoä¸‹è½½åœ°å€\n"
},
{
	"uri": "https://leverkusen188.github.io/reactnative/rn_image/",
	"title": "å›¾ç‰‡ç»„ä»¶ï¼ˆimageï¼‰",
	"tags": [],
	"description": "",
	"content": "åŠ è½½æœ¬åœ°å›¾ç‰‡ï¼ˆjs packageé‡Œï¼‰ å›¾ç‰‡æ”¾ç½®åœ¨ jsçš„packageé‡Œ\nä½¿ç”¨ Image ç»„ä»¶å³å¯ã€‚\n\u0026lt;Image source={require(\u0026#39;./img/check.png\u0026#39;)} /\u0026gt; ä¹Ÿèƒ½ç”¨å˜é‡æ¥åŠ¨æ€åŠ è½½\nconst icon = \u0026#34;small.png\u0026#34;; \u0026lt;Image source={require(\u0026#34;./\u0026#34;+icon)} /\u0026gt; ä¸Šé¢æè¿°çš„requireè¯­æ³•ä¹Ÿå¯ä»¥ç”¨æ¥é™æ€åœ°åŠ è½½ä½ é¡¹ç›®ä¸­çš„å£°éŸ³ã€è§†é¢‘æˆ–è€…æ–‡æ¡£æ–‡ä»¶ã€‚\nå¤§å¤šæ•°å¸¸è§æ–‡ä»¶ç±»å‹éƒ½æ”¯æŒï¼ŒåŒ…æ‹¬.mp3,Â .wav,Â .mp4,Â .mov,Â .htmÂ å’ŒÂ .pdfç­‰ã€‚\nå‚è€ƒ https://github.com/facebook/metro/blob/main/packages/metro-config/src/defaults/defaults.js#L14-L44\nåŠ è½½æ··åˆappçš„å›¾ç‰‡ æŒ‡çš„æ˜¯åŠ è½½åŸç”Ÿappçš„asseté‡Œçš„å›¾ç‰‡èµ„æºã€‚\niOS \u0026lt;Image source={{ uri: \u0026#39;app_icon\u0026#39; }} style={{ width: 40, height: 40 }} /\u0026gt; android \u0026lt;Image source={{ uri: \u0026#39;asset:/app_icon.png\u0026#39; }} style={{ width: 40, height: 40 }} /\u0026gt; æ³¨æ„ï¼šè¿™äº›åšæ³•å¹¶æ²¡æœ‰ä»»ä½•å®‰å…¨æ£€æŸ¥ã€‚ä½ éœ€è¦è‡ªå·±ç¡®ä¿å›¾ç‰‡åœ¨åº”ç”¨ä¸­ç¡®å®å­˜åœ¨ï¼Œè€Œä¸”è¿˜éœ€è¦æŒ‡å®šå°ºå¯¸ã€‚\nåŠ è½½ç½‘ç»œå›¾ç‰‡ ä½¿ç”¨è¿œç¨‹åœ°å€ä½œä¸ºå‚æ•°å³å¯.Â \u0026lt;Image source={{uri: \u0026#39;https://facebook.github.io/react/logo-og.png\u0026#39;}} style={{width: 400, height: 400}} /\u0026gt; æ³¨æ„ï¼šè·ŸåŠ è½½appå›¾ç‰‡ä¸€æ ·ï¼Œéœ€è¦æŒ‡å®šå°ºå¯¸ã€‚\nè¿˜èƒ½ç›´æ¥åˆ¶å®šè¯·æ±‚å‚æ•°\n\u0026lt;Image source={{ uri: \u0026#39;https://facebook.github.io/react/logo-og.png\u0026#39;, method: \u0026#39;POST\u0026#39;, headers: { Pragma: \u0026#39;no-cache\u0026#39; }, body: \u0026#39;Your Body goes here\u0026#39; }} style={{ width: 400, height: 400 }} /\u0026gt; ç»„ä»¶çš„èƒŒæ™¯å›¾** ç”¨ImageBackground å°†ç»„ä»¶åŒ…èµ·æ¥å³å¯ï¼Œç›¸å…³å±æ€§è·Ÿ Image ä¸€æ ·ã€‚\n\u0026lt;ImageBackground source={uri : â€˜app_iconâ€™} style={{width: \u0026#39;100%\u0026#39;, height: \u0026#39;100%\u0026#39;}}\u0026gt; \u0026lt;Text\u0026gt;Inside\u0026lt;/Text\u0026gt; \u0026lt;/ImageBackground\u0026gt; å›¾ç‰‡çš„åœ†è§’ borderTopLeftRadius borderTopRightRadius borderBottomLeftRadius borderBottomRightRadius "
},
{
	"uri": "https://leverkusen188.github.io/python/python_selenium%E7%88%AC%E8%99%AB/",
	"title": "åŸºäºPython +Seleniumçš„çˆ¬è™«è¯¦è§£",
	"tags": [],
	"description": "",
	"content": "èƒŒæ™¯ Selenium Selenium æ˜¯ä¸€ä¸ªç”¨äºwebåº”ç”¨ç¨‹åºè‡ªåŠ¨åŒ–æµ‹è¯•çš„å·¥å…·ï¼Œç›´æ¥è¿è¡Œåœ¨æµè§ˆå™¨å½“ä¸­ï¼Œæ”¯æŒchromeã€firefoxç­‰ä¸»æµæµè§ˆå™¨ã€‚å¯ä»¥é€šè¿‡ä»£ç æ§åˆ¶ä¸é¡µé¢ä¸Šå…ƒç´ è¿›è¡Œäº¤äº’ï¼ˆç‚¹å‡»ã€è¾“å…¥ç­‰ï¼‰ï¼Œä¹Ÿå¯ä»¥è·å–æŒ‡å®šå…ƒç´ çš„å†…å®¹ã€‚\n2.ä¼˜åŠ£\nåŠ£åŠ¿ï¼š\nç›¸æ¯”äºæŠ“åŒ…â†’æ„é€ è¯·æ±‚â†’è§£æè¿”å›å€¼çš„çˆ¬è™«ï¼Œç”±äºSeleniuméœ€è¦ç”Ÿæˆä¸€ä¸ªæµè§ˆå™¨ç¯å¢ƒï¼Œæ‰€æœ‰æ“ä½œï¼ˆä¸å…ƒç´ äº¤äº’ã€è·å–å…ƒç´ å†…å®¹ç­‰ï¼‰å‡éœ€è¦ç­‰å¾…é¡µé¢åŠ è½½å®Œæ¯•åæ‰å¯ä»¥ç»§ç»­è¿›è¡Œï¼Œæ‰€ä»¥é€Ÿåº¦ç›¸æ¯”æ„é€ è¯·æ±‚çš„æ…¢å¾ˆå¤šã€‚\nå¯¹äºä¸ºäº†åçˆ¬åšäº†ç‰¹æ®Šå¤„ç†çš„å±•ç¤ºå†…å®¹ï¼Œå¦‚å­—ä½“åŠ å¯†ï¼ˆå‚è€ƒçŒ«çœ¼ï¼‰ã€å›¾ç‰‡æ›¿æ¢æ•°å­—ï¼ˆå‚è€ƒè‡ªå¦‚ï¼‰ç­‰ï¼Œå¯èƒ½å–ä¸åˆ°æƒ³è¦çš„æ•°æ®ã€‚\nä½¿ç”¨å›¾ç‰‡æ›¿æ¢æ•°å­—çš„è‡ªå¦‚ï¼š\nä¼˜åŠ¿ï¼š\n1ã€ä¸éœ€è¦åšå¤æ‚çš„æŠ“åŒ…ã€æ„é€ è¯·æ±‚ã€è§£ææ•°æ®ç­‰ï¼Œå¼€å‘éš¾åº¦ç›¸å¯¹è¦ä½ä¸€äº›ã€‚\n2ã€å…¶è®¿é—®å‚æ•°è·Ÿä½¿ç”¨æµè§ˆå™¨çš„æ­£å¸¸ç”¨æˆ·ä¸€æ¨¡ä¸€æ ·ï¼Œè®¿é—®è¡Œä¸ºä¹Ÿç›¸å¯¹æ›´åƒæ­£å¸¸ç”¨æˆ·ï¼Œä¸å®¹æ˜“è¢«åçˆ¬è™«ç­–ç•¥å‘½ä¸­ã€‚\n3ã€ç”Ÿæˆçš„æµè§ˆå™¨ç¯å¢ƒå¯ä»¥è‡ªåŠ¨è¿è¡Œ JS æ–‡ä»¶ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒå¦‚ä½•é€†å‘æ··æ·†è¿‡çš„JSæ–‡ä»¶ç”Ÿæˆç”¨ä½œäººæœºæ ¡éªŒçš„å‚æ•°ï¼Œå¦‚é©¬èœ‚çªé…’åº—è¯„è®ºçš„äººæœºæ ¡éªŒå‚æ•°_snï¼Œç½‘æ˜“äº‘éŸ³ä¹è¯„è®ºçš„äººæœºæ ¡éªŒå‚æ•°paramsã€encSecKeyã€‚å¯ä»¥è‡ªè¡ŒæŠ“åŒ…æŸ¥çœ‹ã€‚\n4ã€å¦‚æœéœ€è¦æŠ“å–åŒä¸€ä¸ªå‰ç«¯é¡µé¢ä¸Šé¢æ¥è‡ªä¸åŒåç«¯æ¥å£çš„ä¿¡æ¯ï¼Œå¦‚OTAé…’åº—è¯¦æƒ…é¡µçš„é…’åº—åŸºç¡€ä¿¡æ¯ã€ä»·æ ¼ã€è¯„è®ºç­‰ï¼Œä½¿ç”¨Seleniumå¯ä»¥åœ¨ä¸€æ¬¡è¯·æ±‚ä¸­åŒæ—¶å®Œæˆå¯¹ä¸‰ä¸ªæ¥å£çš„è°ƒç”¨ï¼Œç›¸å¯¹æ–¹ä¾¿ã€‚\nå®ç° 1.ç¯å¢ƒ\npython3.6 + Macos\n2.ä¾èµ–åŒ…\nSelenium\nå®‰è£…çš„æ—¶å€™æ˜¯å¤§å†™çš„ S ï¼Œimportçš„æ—¶å€™æ˜¯ å°å†™ sã€‚\npip install Selenium 3.æµè§ˆå™¨é©±åŠ¨ï¼ˆwebdriverï¼‰\nåŠ è½½æµè§ˆå™¨ç¯å¢ƒéœ€è¦ä¸‹è½½å¯¹åº”çš„æµè§ˆå™¨é©±åŠ¨ï¼Œæ­¤å¤„é€‰æ‹© Chromeã€‚\nä¸‹è½½åœ°å€ï¼šhttp://npm.taobao.org/mirrors/chromedriver/ ï¼Œ\né€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬ä¸‹è½½è§£å‹åæ”¾åœ¨éšä¾¿ä¸€ä¸ªä½ç½®å³å¯ã€‚\n4.hello world\nfrom selenium import webdriver \u0026#39;\u0026#39;\u0026#39;è¿™é‡Œå¡«åˆšåˆšä¸‹è½½çš„é©±åŠ¨çš„è·¯å¾„\u0026#39;\u0026#39;\u0026#39; path = \u0026#39;/Applications/Google Chrome.app/Contents/chromedriver\u0026#39; driver = webdriver.Chrome(executable_path=path) url = \u0026#39;http://hotel.qunar.com/city/beijing_city/\u0026#39; driver.get(url) \u0026#39;\u0026#39;\u0026#39;è¿è¡Œä¸Šè¿°ä»£ç ï¼Œä¼šæ‰“å¼€ä¸€ä¸ªæµè§ˆå™¨ï¼Œå¹¶ä¸”åŠ è½½å»å“ªå„¿çš„é…’åº—åˆ—è¡¨é¡µ\u0026#39;\u0026#39;\u0026#39; è¿™æ—¶å€™å¯ä»¥é€šè¿‡webdriverè‡ªå¸¦çš„ä¸€äº›çš„ä¸€äº›æ–¹æ³•è·å–å…ƒç´ å†…å®¹æˆ–è€…ä¸å…ƒç´ è¿›è¡Œäº¤äº’ã€‚ #è¿”å›ID = js_block_beijing_city_7810çš„å…ƒç´ ä¿¡æ¯ hotel_info = driver.find_element_by_id(\u0026#39;js_block_beijing_city_7810\u0026#39;) print(hotel_info.text) #è¿”å› å±•ç¤ºåœ¨åˆ—è¡¨é¡µçš„é…’åº—ä¿¡æ¯ #åŒç†ï¼Œå¯ä»¥find_element_by_[class_name|name] ç­‰ï¼Œå‡å¯å®ŒæˆæŸ¥è¯¢ã€‚ ä¹Ÿå¯ä»¥é€šè¿‡æ–¹æ³• find_elementsæŸ¥æ‰¾ç¬¦åˆæŸæ¡ä»¶çš„ä¸€ç»„å…ƒç´ ï¼Œä»¥åˆ—è¡¨çš„å½¢å¼è¿”å›ã€‚ #å½“éœ€è¦æŸ¥è¯¢çš„å”¯ä¸€æ ‡è¯†å¸¦æœ‰ç©ºæ ¼æ—¶ï¼Œå¯ä»¥ä½¿ç”¨find_elements_by_css_selectorï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚ hotel_list = driver.find_elements_by_css_selector(\u0026#34;[class=\u0026#39;b_result_box js_list_block b_result_commentbox\u0026#39;]\u0026#34;) print(hotel_list) #è¿”å›é…’åº—åˆ—è¡¨çš„å…¨éƒ¨ä¿¡æ¯ã€‚ 5.å…³é—­å›¾ç‰‡åŠ è½½\nåœ¨ä¸éœ€è¦æŠ“å–å›¾ç‰‡çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è®¾ç½®ä¸åŠ è½½å›¾ç‰‡ï¼ŒèŠ‚çº¦æ—¶é—´ï¼Œè¿™æ ·å±äºè°ƒæ•´æœ¬åœ°è®¾ç½®ï¼Œåœ¨ä¼ å‚ä¸Šå¹¶ä¸ä¼šæœ‰å¼‚å¸¸ã€‚\nfrom selenium import webdriver chrome_opt = webdriver.ChromeOptions() prefs={\u0026#34;profile.managed_default_content_settings.images\u0026#34;:2} chrome_opt.add_experimental_option(\u0026#34;prefs\u0026#34;,prefs) path = \u0026#39;\u0026#39; #é©±åŠ¨è·¯å¾„ browser_noPic = webdriver.Chrome(executable_path=path,chrome_options=chrome_opt) ä½¿ç”¨webdriverä¸å…ƒç´ è¿›è¡Œäº¤äº’ 1.æ¨¡æ‹Ÿé¼ æ ‡ç‚¹å‡» hotel_info = driver.find_element_by_id(\u0026#34;js_plugin_tag_beijing_city_7810\u0026#34;) hotel.info.click() #è¿›å…¥é…’åº—è¯¦æƒ…é¡µ 2.æ¨¡æ‹Ÿé”®ç›˜è¾“å…¥\nhotel_search = driver.find_element_by_id(\u0026#34;jxQ\u0026#34;) hotel_search.send_keys(\u0026#34;å¦‚\u0026#34;) hotel_search.send_keys(\u0026#34;å¦‚å®¶\u0026#34;) #ç”±äºæœç´¢æ¡†è¾“å…¥çš„ç¬¬ä¸€ä¸ªå­—ä¼šè¢«é€‰ä¸­ï¼Œæ‰€ä»¥éœ€è¦ç¬¬äºŒæ¬¡æ‰èƒ½å®Œæ•´è¾“å…¥ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ¨¡æ‹ŸæŒ‰é”®ç›˜çš„ â†’(å³é”®)å–æ¶ˆé€‰ä¸­åå†æ¬¡è¾“å…¥ã€‚ 3.æ¨¡æ‹Ÿä¸‹æ‹‰\nwebdriverä¸­å¯¹é¼ æ ‡çš„æ“ä½œçš„æ–¹æ³•å°è£…åœ¨ActionChainsç±»ä¸­ ï¼Œä½¿ç”¨å‰è¦å…ˆå¯¼å…¥ActionChainsç±»ï¼š\nfrom selenium.webdriver.common.action_chains import ActionChains \u0026#34;\u0026#34;\u0026#34;åœ¨é¡µé¢é¡¶éƒ¨ã€åº•éƒ¨ä¸ªæ‰¾äº†ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶æ¨¡æ‹Ÿé¼ æ ‡ä»é¡¶åˆ°åº•çš„æ»‘åŠ¨\u0026#34;\u0026#34;\u0026#34; start = driver.find_element_by_class_name(\u0026#39;e_above_header\u0026#39;) target = driver.find_element_by_class_name(\u0026#39;qn_footer\u0026#39;) ActionChains(driver).drag_and_drop(start,target).perform() æ­¤å¤–ï¼Œwebdiverè¿˜æä¾›ä¸°å¯Œçš„äº¤äº’åŠŸèƒ½ï¼Œæ¯”å¦‚é¼ æ ‡æ‚¬åœã€åŒå‡»ã€æŒ‰ä½å·¦é”®ç­‰ç­‰ï¼Œæ­¤å¤„ä¸å±•å¼€ä»‹ç»ã€‚\nä¸€ä¸ªå®Œæ•´çš„æ¨¡æ‹Ÿæµè§ˆå™¨çˆ¬è™« from selenium import webdriver from selenium.webdriver.common.action_chains import ActionChains import time \u0026#39;\u0026#39;\u0026#39;è¿™é‡Œå¡«åˆšåˆšä¸‹è½½çš„é©±åŠ¨çš„è·¯å¾„\u0026#39;\u0026#39;\u0026#39; path = \u0026#39;/Users/./Desktop/chromedriver\u0026#39; driver = webdriver.Chrome(executable_path=path) url = \u0026#39;http://hotel.qunar.com/city/beijing_city/\u0026#39; driver.get(url) time.sleep(6) #ç­‰å¾…é¡µé¢åŠ è½½å®Œå†è¿›è¡Œåç»­æ“ä½œ \u0026#34;\u0026#34;\u0026#34;åœ¨é¡µé¢é¡¶éƒ¨ã€åº•éƒ¨ä¸ªæ‰¾äº†ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶æ¨¡æ‹Ÿé¼ æ ‡ä»é¡¶åˆ°åº•çš„æ»‘åŠ¨\u0026#34;\u0026#34;\u0026#34; start = driver.find_element_by_class_name(\u0026#39;e_above_header\u0026#39;) target = driver.find_element_by_class_name(\u0026#39;qn_footer\u0026#39;) ActionChains(driver).drag_and_drop(start,target).perform() time.sleep(5) #ç­‰å¾…é¡µé¢åŠ è½½å®Œå†è¿›è¡Œåç»­æ“ä½œ hotel_link_list = driver.find_elements_by_css_selector(\u0026#34;[class=\u0026#39;item_price js_hasprice\u0026#39;]\u0026#34;) print(\u0026#34;åœ¨æ­¤é¡µé¢å…±æœ‰é…’åº—\u0026#34;,len(hotel_link_list),\u0026#34;å®¶\u0026#34;) windows = driver.window_handles #æ­¤å¤„å¯ä»¥çˆ¬æ•´ä¸ªé¡µé¢ä»»ä½•æƒ³è¦æƒ³è¦çš„å…ƒç´  list_hotel_info=[] def hotel_info_clawer(): list_hotel_info.append([driver.find_element_by_class_name(\u0026#34;info\u0026#34;).text, driver.find_element_by_class_name(\u0026#34;js-room-table\u0026#34;).text, driver.find_element_by_class_name(\u0026#34;dt-module\u0026#34;).text]) for i in range(len(hotel_link_list)): hotel_link_list[i].click() driver.switch_to.window(windows[-1]) #åˆ‡æ¢åˆ°åˆšæ‰“å¼€çš„é…’åº—è¯¦æƒ…é¡µ hotel_info_clawer() driver.close() #å…³é—­å·²ç»çˆ¬å®Œçš„é…’åº—è¯¦æƒ…é¡µ print(\u0026#34;å·²ç»æŠ“å–é…’åº—\u0026#34;,i,\u0026#34;å®¶\u0026#34;) #åé¢å¯ä»¥è¡¥å……ç¿»é¡µç»§ç»­æŠ“å–çš„éƒ¨åˆ† ä½¿ç”¨æˆªå›¾+OCRæŠ“å–å…³é”®æ•°æ® å¯¹äºåšäº†ç‰¹æ®Šå¤„ç†çš„ä¿¡æ¯ï¼Œå¦‚ä¸Šè¿°çš„çŒ«çœ¼ç”µå½±çš„ç¥¨æˆ¿ä¿¡æ¯ã€è‡ªå¦‚çš„ä»·æ ¼ç­‰ï¼Œä¸é€‚ç”¨äºç›´æ¥è·å–åˆ¶å®šå…ƒç´ çš„ä¿¡æ¯è¿›è¡ŒæŠ“å–ï¼Œå¯ä»¥ä½¿ç”¨æˆªå›¾+OCRçš„æ–¹å¼æŠ“å–æ­¤ç±»æ•°æ®ã€‚\nä»¥è‡ªå¦‚çš„æˆ¿ç§Ÿä¸ºä¾‹ï¼š from selenium import webdriver \u0026#39;\u0026#39;\u0026#39;è¿™é‡Œå¡«åˆšåˆšä¸‹è½½çš„é©±åŠ¨çš„è·¯å¾„\u0026#39;\u0026#39;\u0026#39; path = \u0026#39;/Applications/Google Chrome.app/Contents/chromedriver\u0026#39; driver = webdriver.Chrome(executable_path=path) url = \u0026#39;http://www.ziroom.com/z/vr/61715463.html\u0026#39; driver.get(url) price = diver.find_element_by_class_name(\u0026#39;room_price\u0026#39;) print(price.text)#ç”±äºè‡ªå¦‚çš„ä»·æ ¼ç”¨å›¾ç‰‡åšäº†æ›¿æ¢ï¼Œè¿™æ ·å¹¶ä¸èƒ½è·å–åˆ°å®é™…ä»·æ ¼ï¼Œéœ€è¦è·å–å›¾ç‰‡å†åšocrå¤„ç† \u0026#34;å¯¹æŒ‡å®šå…ƒç´ éƒ¨åˆ†æˆªå›¾å†ä¿å­˜\u0026#34; price.screenshot(\u0026#39;/Users/./Desktop/price.png\u0026#39;) å®‰è£…ocrå·¥å…·ï¼š\nTesseractæ˜¯ä¸€ä¸ªå¼€æºçš„OCRå¼•æ“ï¼Œèƒ½è¯†åˆ«100å¤šç§è¯­è¨€ï¼ˆä¸­ï¼Œè‹±ï¼ŒéŸ©ï¼Œæ—¥ï¼Œå¾·ï¼Œæ³•â€¦ç­‰ç­‰ï¼‰ï¼Œä½†æ˜¯Tesseractå¯¹æ‰‹å†™çš„è¯†åˆ«èƒ½åŠ›è¾ƒå·®ï¼Œä»…é€‚ç”¨äºæ‰“å°å­—ä½“ã€‚\n//ä»…å®‰è£…tesseractï¼Œä¸å®‰è£…è®­ç»ƒå·¥å…·å’Œå…¶ä»–è¯­éŸ³åŒ…ï¼Œéœ€è¦è¯†åˆ«ä¸­æ–‡çš„è¯å¾—é¢å¤–ä¸‹è½½ //ä¸‹è½½åœ°å€ï¼šhttps://github.com/tesseract-ocr/tessdata brew install tesseract ä½¿ç”¨Tesseractï¼š\ntesseract ~/price.png result //è¯†åˆ«å›¾ç‰‡å¹¶å°†ç»“æœå­˜åœ¨resulté‡Œé¢ åœ¨pythonä¸‹ä½¿ç”¨Tesseractï¼š\né¦–å…ˆå®‰è£…ä¾èµ–åŒ…ï¼špip install pytesseract\nimport pytesseract from PIL import Image # open image image = Image.open(\u0026#39;price.png\u0026#39;) code = pytesseract.image_to_string(image) print(code) "
},
{
	"uri": "https://leverkusen188.github.io/javascript/basicgramma/",
	"title": "åŸºæœ¬è¯­æ³•æ³¨æ„ç‚¹",
	"tags": [],
	"description": "",
	"content": "æ•°æ®å¯¹æ¯” ä¸è¦ä½¿ç”¨==æ¯”è¾ƒï¼Œå§‹ç»ˆåšæŒä½¿ç”¨ === æ¯”è¾ƒã€‚ == ä¼šè‡ªåŠ¨è½¬æ¢æ•°æ®ç±»å‹æ¥å¯¹æ¯”ï¼Œæœ‰æ—¶å€™ä¼šå¾—åˆ°å¥‡æ€ªçš„ç»“æœï¼ˆå½“å¯¹æ¯”æ•°æ®ç±»å‹ä¸åŒæ—¶ï¼‰ === ä¼šå…ˆåˆ¤æ–­æ•°æ®ç±»å‹æ˜¯å¦ä¸€è‡´ï¼ˆä¸ä¸€è‡´è¿”å›falseï¼‰ï¼Œå†å¯¹æ¯”æ•°æ®æ˜¯å¦ç›¸åŒã€‚\nfalse == 0; // è¿”å› true false === 0; // è¿”å› false ç‰¹ä¾‹ï¼š\nNaN === NaN; //è¿”å›false å¿…é¡»ç”¨ isNaN(Nan) æ¥åˆ¤æ–­\nå­—ç¬¦ä¸²ç›¸å…³ æ ¼å¼åŒ–å¤šè¡Œå­—ç¬¦ä¸²\nvar name = \u0026#39;å°æ˜\u0026#39;; var age = 20; var message = `ä½ å¥½, ${name}, ä½ ä»Šå¹´${age}å²äº†!`; å­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ï¼Œéƒ½æ— æ³•æ”¹å˜å­—ç¬¦ä¸²\nvar s = \u0026#39;Hello, world!\u0026#39;; s[0] = \u0026#39;X\u0026#39;; //è¿˜æ˜¯ Hello world s.toUpperCase() //è¿”å›å¤§å†™çš„å­—ç¬¦ä¸²ï¼Œä½† s ä¸å˜ æ•°ç»„ç›¸å…³ ç›´æ¥ç»™Arrayçš„lengthèµ‹ä¸€ä¸ªæ–°çš„å€¼ä¼šå¯¼è‡´Arrayå¤§å°çš„å˜åŒ–\nvar arr = [1, 2, 3]; arr.length = 6; //arrå˜ä¸º[1, 2, 3, undefined, undefined, undefined] å¦‚æœé€šè¿‡ç´¢å¼•èµ‹å€¼æ—¶ï¼Œç´¢å¼•è¶…è¿‡äº†èŒƒå›´ï¼ŒåŒæ ·ä¼šå¼•èµ·Arrayå¤§å°çš„å˜åŒ–ï¼š\nvar arr = [1, 2, 3]; arr[5] = \u0026#39;x\u0026#39;;\t// arrå˜ä¸º[1, 2, 3, undefined, undefined, \u0026#39;x\u0026#39;] å¯¹è±¡ç›¸å…³ ç®€å•ç¤ºä¾‹ï¼š var xiaoming = { name: \u0026#39;å°æ˜\u0026#39;, birth: 1990, school: \u0026#39;No.1 Middle School\u0026#39;, height: 1.70, weight: 65, score: null }; åˆ¤æ–­å¯¹è±¡æ˜¯å¦æœ‰æŸä¸ªå±æ€§çš„æ–¹æ³• 'name' in xiaoming; // true xiaoming.hasOwnProperty('name'); //åªé’ˆå¯¹ è¯¥å±æ€§å±äºè¯¥ç±»ï¼Œå¿½ç•¥çˆ¶ç±» æ¡ä»¶åˆ¤æ–­ var s = â€˜â€™123 If (s.length) JavaScriptæŠŠnullã€undefinedã€0ã€NaNå’Œç©ºå­—ç¬¦ä¸²\u0026rsquo;\u0026lsquo;è§†ä¸ºfalseï¼Œå…¶ä»–å€¼ä¸€æ¦‚è§†ä¸ºtrueï¼Œå› æ­¤ä¸Šè¿°ä»£ç æ¡ä»¶åˆ¤æ–­çš„ç»“æœæ˜¯trueã€‚\nå®¹å™¨ç›¸å…³ å¾ªç¯ //å¯¹è±¡keyå¾ªç¯éå† var o = { name: \u0026#39;Jack\u0026#39;, age: 20, city: \u0026#39;Beijing\u0026#39; }; for (var key in o) { console.log(key); // \u0026#39;name\u0026#39;, \u0026#39;age\u0026#39;, \u0026#39;city\u0026#39; } //æ•°ç»„éå†ï¼Œ éå†çš„æ˜¯æ•°ç»„çš„åºå·ï¼ˆæ˜¯å­—ç¬¦ä¸²è€Œä¸æ˜¯æ•°å­—ç±»å‹ï¼‰ var a = [\u0026#39;A\u0026#39;, \u0026#39;B\u0026#39;, \u0026#39;C\u0026#39;]; for (var i in a) { console.log(i); // \u0026#39;0\u0026#39;, \u0026#39;1\u0026#39;, \u0026#39;2\u0026#39; } //éå†å…ƒç´ ï¼Œç”¨of For (var item of a) { console.log(i); // â€˜Aâ€™, â€˜Bâ€™, â€˜Câ€™ } for \u0026hellip; ofå¾ªç¯å’Œfor \u0026hellip; inå¾ªç¯æœ‰ä½•åŒºåˆ« Arrayå®é™…ä¸Šä¹Ÿæ˜¯ä¸ªå¯¹è±¡ï¼Œå…ƒç´ ä¸‹æ ‡å°±æ˜¯å®ƒçš„keyã€‚\nvar a = [\u0026#39;A\u0026#39;, \u0026#39;B\u0026#39;, \u0026#39;C\u0026#39;]; a.name = â€˜Dâ€˜ for (var x in a) { console.log(x); // \u0026#39;0\u0026#39;, \u0026#39;1\u0026#39;, \u0026#39;2\u0026#39;, \u0026#39;name\u0026#39; } å› æ­¤ç”¨ of æ¥éå†ï¼Œå°±ä¸ä¼šæœ‰ä¸Šé¢çš„é—®é¢˜\nfor (var x of a) { console.log(x); // \u0026#39;A\u0026#39;, \u0026#39;B\u0026#39;, \u0026#39;C\u0026#39; ä¸ä¼šæœ‰ â€˜Dâ€™ } //forEach éå†æ–¹æ³• ar.forEach(function (e, i, ar) { //e æ˜¯å…ƒç´ ï¼Œiæ˜¯åºå·ï¼Œar æ˜¯åŸæ•°ç»„ console.log(`element=${e} index=${i}`) }) å±€éƒ¨ä½œç”¨åŸŸ ç”±äºJavaScriptçš„å˜é‡ä½œç”¨åŸŸå®é™…ä¸Šæ˜¯å‡½æ•°å†…éƒ¨ï¼Œåœ¨å‡½æ•°ä»£ç å—ä¸­å£°æ˜çš„å˜é‡ï¼Œåœ¨å‡½æ•°ä½“å†…éƒ½æ˜¯å¯ä»¥ç”¨çš„\nfunction foo() { { var i = 1 } i += 100; // ä»ç„¶å¯ä»¥å¼•ç”¨å˜é‡i } ä½¿ç”¨let å³å¯ç”³è¯·ä¸€ä¸ªå—çº§ä½œç”¨åŸŸçš„å˜é‡ function foo() { { let i = 1 } i += 100; // ä¼šæŠ¥é”™ï¼Œæ— è¯¥å˜é‡ } PSï¼šå¸¸é‡å£°æ˜ const ä¹Ÿæœ‰å—çº§ä½œç”¨åŸŸåŠŸèƒ½\nå¿«é€Ÿç»“æ„èµ‹å€¼ ä»æ•°ç»„é‡Œèµ‹å€¼ var [x,y,z] = [â€˜aâ€™, â€˜bâ€™, â€˜câ€™] var [x, [y, z]] = [â€˜aâ€™, [1,2]] var [,y,z] = [1,2,3] ä»å¯¹è±¡ç»“æ„é‡Œèµ‹å€¼ var person = { name: \u0026#39;å°æ˜\u0026#39;, age: 20, address: { city: \u0026#39;Beijing\u0026#39;, street: \u0026#39;No.1 Road\u0026#39;, zipcode: \u0026#39;100001\u0026#39; } }; var {name, address: {city, zip=â€˜55â€™}} = person; name //å°æ˜ city //Beijing zip //åº”è¯¥æ— å€¼çš„ï¼Œä½†æœ‰é»˜è®¤å€¼ â€™55â€˜\nvar {name: realName} = person; name //undefined realName //å°æ˜\nå·²ç»å£°æ˜çš„å˜é‡ å†ä»å¯¹è±¡é‡Œèµ‹å€¼ var name, address; {name, address} = person; //æ‰§è¡Œä¼šæŠ¥é”™ ({name, address} = person; ) //ç”¨å°æ‹¬å·åŒ…èµ·æ¥å³å¯ "
},
{
	"uri": "https://leverkusen188.github.io/swift/swift_property_wrappers/",
	"title": "å±æ€§åŒ…è£…å™¨Property Wrappers",
	"tags": [],
	"description": "",
	"content": "ä»£ç ç¤ºä¾‹ï¼š\n@propertyWrapper struct Increase\u0026lt;T\u0026gt; { var wrappedValue : T { get {return value1} set { value1 = newValue if T.self is Int.Type { print(\u0026#34;\\(T.self)\u0026#34;) } if T.self is NSObject.Type || T.self is (NSObject?).Type { print(\u0026#34;\\(T.self)\u0026#34;) } } } var projectedValue : Increase\u0026lt;T\u0026gt; {return self} private var value1 : T init(wrappedValue: T) { self.value1 = wrappedValue } public func printValue() { if let v = wrappedValue as? Int { print(\u0026#34;Increase: value=\\(v+1)\u0026#34;) } } } class SwiftTestObject : NSObject { @Increase var wrappedInt : Int = 1 @Increase(wrappedValue: nil) var wrappedObject : NSObject? func testFunc() { self.wrappedObject. //NSObject _wrappedObject //Increase\u0026lt;NSObject\u0026gt; self.$wrappedObject. //Increase\u0026lt;NSObject\u0026gt; } } @propertyWrapper æ¥å£°æ˜ï¼Œå¿…é¡»å¸¦ æ³›å‹å®šä¹‰ã€‚ å¿…é¡»åˆ›å»º var wrappedValue ï¼ŒåŒæ—¶é‡å†™ set getæ–¹æ³•ã€‚ åœ¨å£°æ˜å¯¹åº”å±æ€§åŒ…è£…å™¨ å±æ€§çš„classé‡Œï¼Œå¯ä»¥ç”¨ _value æ¥è®¿é—® Increase å¯¹è±¡ã€‚ç”¨ self.value æ¥è®¿é—®å¯¹åº”çš„ T ç±»å‹å¯¹è±¡ å¯ä»¥ç”¨ @Increase var value :int = 1. æˆ–æ˜¯ @Increase(wrappedValue: 1) var value : Int. æ¥å£°æ˜å¹¶åˆå§‹åŒ– å¦‚æœå¤–é¢å…¶ä»–åœ°æ–¹è¦è®¿é—® Increase å¯¹è±¡ï¼Œå¿…é¡»åœ¨ propertyWrapper é‡Œå£°æ˜ä¸€ä¸ª projectedValue æ¥è¿”å›selfï¼Œå¤–é¢å³å¯ç”¨ object.$value è¯­æ³•ç³–æ¥è®¿é—®ã€‚ å±æ€§åŒ…è£…å™¨çš„é™åˆ¶ å¸¦æœ‰åŒ…è£…å™¨çš„å±æ€§ä¸èƒ½åœ¨å­ç±»ä¸­è¦†ç›–ã€‚ å…·æœ‰åŒ…è£…å™¨çš„å±æ€§ä¸èƒ½æ˜¯lazyï¼Œ@NSCopyingï¼Œ@NSManagedï¼Œweakæˆ–unowned å…·æœ‰åŒ…è£…å™¨çš„å±æ€§ä¸èƒ½å…·æœ‰è‡ªå®šä¹‰çš„setæˆ–getæ–¹æ³•ã€‚ wrappedValueï¼Œinitï¼ˆwrappedValue :)å’ŒprojectedValueå¿…é¡»å…·æœ‰ä¸åŒ…è£…ç±»å‹æœ¬èº«ç›¸åŒçš„è®¿é—®æ§åˆ¶çº§åˆ« ä¸èƒ½åœ¨åè®®æˆ–æ‰©å±•ä¸­å£°æ˜å¸¦æœ‰åŒ…è£…å™¨çš„å±æ€§ã€‚ å‚è€ƒï¼šSwift 5 å±æ€§åŒ…è£…å™¨Property Wrapperså®Œæ•´æŒ‡å—\n"
},
{
	"uri": "https://leverkusen188.github.io/%E9%9D%9E%E6%8A%80%E6%9C%AF/%E7%AE%80%E5%8E%86%E5%AD%97%E6%88%91%E4%BB%8B%E7%BB%8D%E8%A1%A5%E5%85%A8/",
	"title": "ç®€å†è‡ªæˆ‘ä»‹ç»è¡¥å…¨",
	"tags": [],
	"description": "",
	"content": "ç¦»èŒåŸå›  è…¾è®¯ DJIçš„å…‰ç¯ æ”¶å…¥çš„æå‡ DJI å¯¹ä»¥ç¡¬ä»¶ä¸ºä¸»è½¯ä»¶ä¸ºè¾…çš„äº§å“ç ”å‘æµç¨‹æ„Ÿåˆ°æœ‰ç‚¹åŒå€¦ã€‚ å¯¹æ‹æ‘„ç›¸å…³å…´è¶£ä¸é«˜ï¼Œå»¶ä¼¸åˆ°å¯¹è‡ªå®¶è½¯ä»¶äº§å“çš„æˆå°±æ„Ÿï¼Œå…³æ³¨åº¦ä¸å¤Ÿé«˜ã€‚ è´Ÿè´£çš„æ¨¡å—å¤„äºå¯¹æ¥å¤šä¸ªæ¨¡å—ï¼ˆå›¢é˜Ÿï¼‰çš„ä¸­å¿ƒä½ç½®ï¼Œé™¤æ—¥å¸¸å¼€å‘ç»´æŠ¤å¤–çš„å…¶ä»–å·¥ä½œï¼ˆæ¯”å¦‚è½¯ç¡¬ä»¶åŠŸèƒ½é—®é¢˜å®šä½ï¼ŒCIç¼–è¯‘é—®é¢˜ç­‰ï¼‰è¾ƒå¤šï¼Œè€—è´¹å¤§é‡ç²¾åŠ›ã€‚ å…¬å¸ç›¸å…³é¡¹ç›®ç»å† è…¾è®¯ç»å†ï¼š ä¸»è¦è´Ÿè´£ios æ‰‹æœºQQ Appçš„ç¾¤ç›¸å…³ä¸šåŠ¡å¼€å‘å·¥ä½œï¼Œä»¥åŠç§»åŠ¨ç«¯è·¨å¹³å°æ’ä»¶æŠ€æœ¯è°ƒç ” \u0026amp; ç ”å‘ã€‚\nlua-wax è¦ç‚¹ï¼š å†…å­˜ç®¡ç†ï¼šå®šæ—¶å™¨æ£€æŸ¥å¼•ç”¨è®¡æ•°ã€‚å¯¹è±¡å¼•ç”¨å…³ç³»å½±å“retain countã€‚å¯¹è±¡é‡Šæ”¾ä¼šæœ‰å»¶è¿Ÿã€‚ luaåˆ›å»ºçš„ocå¯¹è±¡ï¼Œä¸ç”¨æ˜¾å¼åœ°è°ƒç”¨allocï¼Œwaxä¼šå¸®ä½ è°ƒç”¨ã€‚åœ¨æ”¾å…¥ strongtableä¸­çš„å¯¹è±¡ï¼Œåœ¨å®šæ—¶å™¨æ‰«ææ—¶å‘ç°retainccount å°äº2æ—¶ï¼Œå°±ä¼šå¸®ä½ è°ƒç”¨releaseé‡Šæ”¾ï¼Œæ¨¡æ‹Ÿå‡ºarcæ•ˆæœã€‚ çº¿ç¨‹æ¨¡å‹ï¼šä¸€ä¸ªLua stack ä»£è¡¨ä¸€ä¸ªçº¿ç¨‹ï¼ˆstackæ˜¯luaç”¨æ¥å’ŒC è¿›è¡Œæ•°æ®é€šä¿¡çš„æ¸ é“ï¼‰ã€‚ä¸€ä¸ªwax instanceç­‰äºä¸€ä¸ªstackã€‚ block æ”¯æŒä¸æ˜¯å¾ˆå¥½ï¼Œæ¯”å¦‚blockçš„å‚æ•°ä¹Ÿæ˜¯blockæ—¶ã€‚ DJI ç»å†ï¼š å¸¦é¢†ioså›¢é˜Ÿï¼Œæ‰¿æ‹…ç”µå•†éƒ¨é—¨ioså¹³å°çš„ç›¸å…³äº§å“ç ”å‘å·¥ä½œã€‚ ä¸»è¦èŒè´£ï¼šappæ¡†æ¶æ­å»ºï¼ŒæŠ€æœ¯é€‰å‹è¯„ä¼°ï¼ˆæ¯”å¦‚å†…ç½®IMçš„ç¬¬ä¸‰æ–¹sdké€‰å‹ï¼‰ï¼Œå‚ä¸ä¸šåŠ¡éœ€æ±‚è®¨è®ºå®šå‹ï¼Œå‰åç«¯æ¥å£è®¾è®¡ã€‚\néƒ¨é—¨é‡ç»„ååŠ å…¥è½¯ä»¶éƒ¨ï¼Œå‚ä¸è½¯ä»¶éƒ¨å¤šä¸ªä¸»è¦appäº§å“çš„å¼€å‘ï¼Œç»´æŠ¤ï¼ŒæŒç»­ä¼˜åŒ– ä»¥åŠ ç–‘éš¾é—®é¢˜æ”»å…³å·¥ä½œã€‚ä»¥åŠä¸€äº›èƒ½æé«˜å›¢é˜Ÿç ”å‘æ•ˆç‡çš„ç›¸å…³æŠ€æœ¯è°ƒç ”å’Œå·¥å…·å¼€å‘å·¥ä½œã€‚ å¼€å‘è§’è‰²ï¼šå‰æœŸä¸»è¦è´Ÿè´£DJI Go Appä¸Š è¿œç«¯ \u0026amp; æœ¬åœ°ç›¸å†Œï¼Œè§†é¢‘ç¼–è¾‘ï¼Œç”¨æˆ·ä¸­å¿ƒï¼ŒAppå†…ç½®H5 ç­‰æ¨¡å—çš„å¼€å‘ç»´æŠ¤ã€‚ åæœŸä¸»è¦è´Ÿè´£ è·¨å¹³å°å›æ”¾ï¼ŒiOSç«¯çš„æ™ºèƒ½ç›¸å†Œæ¨¡å—ã€‚ å›¢é˜Ÿæ•ˆç‡æ–¹é¢ï¼šcsdk æºç /äºŒè¿›åˆ¶ç¼–è¯‘åˆ‡æ¢å·¥å…·ï¼›åˆ†äº«ï¼Œç½‘ç»œè¯·æ±‚ï¼Œç”¨æˆ·ä¸­å¿ƒå‡ ä¸ªåŠŸèƒ½çš„æ¨¡å—åŒ–ï¼›UIå’ŒMidwareä»£ç åº“åˆå¹¶ï¼ˆFly å’ŒMimoï¼‰\næ¡ˆä¾‹1ï¼š ç›¸æœºHTTPå¤šçº¿ç¨‹ä¸‹è½½å¼€å‘ï¼Œä»¥åŠ 32int æº¢å‡ºå¯¼è‡´çš„ä¸‹è½½å¤±è´¥é—®é¢˜ã€‚ åŠ¨æ€åº“å¼•èµ·çš„å¤šå•ä¾‹é—®é¢˜ã€‚\næ¡ˆä¾‹2: åœ¨ä½¿ç”¨å†…éƒ¨çš„KVOå·¥å…·ç»‘å®šæ¥æ”¶æ¶ˆæ¯æ—¶ï¼Œå‘ç°æ˜æ˜¾çš„æ€§èƒ½é—®é¢˜ã€‚ è·Ÿè¸ªå‘ç°æ˜¯å…¶ä»–å›¢é˜Ÿçš„å†…éƒ¨æ€§èƒ½æ£€æµ‹å·¥å…·åœ¨æ£€æµ‹åˆ°DJI å¼€å¤´çš„ç±»çš„å±æ€§å˜åŒ–æ—¶ï¼Œä¼šè®°å½•å½“å‰çš„çº¿ç¨‹ callstackï¼Œå¹¶åœ¨è€—æ—¶è¾¾åˆ°ä¸€å®šç¨‹åº¦æ—¶ è®°å½•ä¸‹æ¥ä½œä¸ºæ€§èƒ½é—®é¢˜ã€‚\næ¡ˆä¾‹3: Appæ€§èƒ½ä¼˜åŒ–ï¼š\nç¼“å­˜æ•°æ®ç»“æ„çš„ä¼˜åŒ–ï¼Œç”±æ•´å–æ•´å¯¸çš„æ–‡ä»¶ç¼“å­˜æ–¹å¼è°ƒæ•´ä¸º æ•°æ®åº“ï¼Œå¹¶åšäº†ç›¸åº”çš„è€æ•°æ®è¿ç§»ã€‚ 2022-10-12 è…¾è®¯é¢è¯•\nå…³äºè½¯ä»¶æ€§èƒ½ä¼˜åŒ–æ–¹é¢çš„æˆç»©ï¼ŒæŠ€æœ¯åŠ©åŠ›ä¸å¤Ÿã€‚ runloopçš„ç›¸å…³æ¦‚å¿µç»†èŠ‚ã€‚ "
},
{
	"uri": "https://leverkusen188.github.io/reactnative/rn_layout/",
	"title": "ç»„ä»¶å¸ƒå±€",
	"tags": [],
	"description": "",
	"content": "Flex Direction ä¸€ç§å­ç»„ä»¶çš„æ’åˆ—æ–¹å¼ã€‚ ä½¿ç”¨çš„æ˜¯ flexDirection å±æ€§ï¼Œé»˜è®¤æ˜¯ columnï¼Œä¸€å…±å››ç§ï¼š\n\u0026ldquo;column\u0026rdquo;, //ä»ä¸Šå¾€ä¸‹ \u0026ldquo;row\u0026rdquo;, //ä»å·¦å¾€å³ \u0026ldquo;row-reverse\u0026rdquo;, //ä»å³å¾€å·¦ \u0026ldquo;column-reverse\u0026rdquo; //ä»ä¸‹å¾€ä¸Š Layout Direction å¦ä¸€ç§æ’åˆ—æ–¹å¼ï¼Œä½¿ç”¨çš„æ˜¯ direction å±æ€§ï¼Œå†³å®šå­ç»„ä»¶é å·¦ï¼Œè¿˜æ˜¯é å³ï¼Œä½†ä¸ä¼šé€’å½’ä¼ é€’ä¸‹å»ã€‚\nä¸€å…±ä¸¤ç§ï¼š ltr: ä»å·¦å¾€å³ rtl: ä»å³å¾€å·¦ Justify Content åœ¨ç»„ä»¶çš„ style ä¸­æŒ‡å®šjustifyContentå¯ä»¥å†³å®šå…¶å­å…ƒç´ æ²¿ç€ä¸»è½´çš„æ’åˆ—æ–¹å¼ã€‚\nflex-start: å­å…ƒç´ ä»å¼€å§‹å¤„ä¾æ¬¡æ’åˆ—ã€‚ å½“ flexDirection ä¸º rowæ—¶ å½“ flexDirection ä¸º row-reverseæ—¶ï¼ˆå› ä¸ºå¸ƒå±€æ˜¯ä»å³å¾€å·¦çš„ï¼‰ flex-endï¼šæ‰€æœ‰å­å…ƒç´ é ç»“å°¾å¤„æ’åˆ— å½“ flexDirection ä¸º rowæ—¶(ç»“å°¾å¤„æ˜¯å³è¾¹) å½“ flexDirection ä¸º row-reverseæ—¶ï¼ˆå› ä¸ºå¸ƒå±€æ˜¯ä»å³å¾€å·¦çš„, æ‰€ä»¥ç»“å°¾å¤„å°±æ˜¯æœ€å·¦è¾¹ï¼‰ centerï¼š æ‰€æœ‰å­å…ƒç´ æŒ‰æ€»å®½åº¦è®¡ç®—åï¼Œé ä¸­é—´ä¸€èµ·æ’åˆ— space-betweenï¼šç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå­å…ƒç´ åˆ†åˆ«é å¼€å§‹å’Œç»“å°¾ï¼Œå…¶ä»–å­å…ƒç´ å¹³å‡æ’åˆ—ï¼Œä¿è¯å­å…ƒç´ ä¹‹é—´è·ç¦»ç›¸åŒã€‚ space-around: ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå­å…ƒç´ ä¼šè·Ÿå¼€å§‹å’Œç»“å°¾ ç©ºä¸€å°æ®µï¼Œå…¶ä»–å­å…ƒç´ å¹³å‡æ’åˆ—ï¼Œå­å…ƒç´ ä¹‹é—´è·ç¦»ç›¸åŒ space-evenlyï¼šæ‰€æœ‰å…ƒç´ ä¹‹é—´è·ç¦» ä»¥åŠ é¦–å°¾å…ƒç´ è·Ÿè¾¹ç¼˜çš„è·ç¦» å®Œå…¨ä¸€æ ·ã€‚ Align Items åœ¨ç»„ä»¶çš„ style ä¸­æŒ‡å®šalignItemså¯ä»¥å†³å®šå…¶å­å…ƒç´ æ²¿ç€æ¬¡è½´ï¼ˆå¦‚æœä¸»è½´æ˜¯rowï¼Œé‚£ä¹ˆæ¬¡è½´å°±æ˜¯ columnï¼‰çš„æ’åˆ—æ–¹å¼\nstretch: å°†å­å…ƒç´ å¾€æ¬¡è½´æ–¹å‘æ‹‰ä¼¸ï¼Œä»¥å¡«æ»¡ã€‚ï¼ˆè¦æ±‚widthä¸èƒ½é™å®šå€¼; ä¸‹å›¾é‡Œ ç¬¬ä¸€äºŒä¸ªå…ƒç´ é™å®šäº†width:50, ç¬¬ä¸‰ä¸ªæœªé™å®šï¼‰ flex-start: å­å…ƒç´ é æ¬¡è½´çš„å¼€å§‹æ–¹å‘å¸ƒå±€ã€‚ï¼ˆæ¬¡è½´æ˜¯rowï¼Œå¼€å§‹æ–¹å‘å°±æ˜¯æœ€å·¦è¾¹ï¼‰ flex-endï¼šå­å…ƒç´ é æ¬¡è½´çš„ç»“å°¾æ–¹å‘å¸ƒå±€ã€‚ centerï¼šå­å…ƒç´ é æ¬¡è½´çš„ä¸­é—´å¸ƒå±€ã€‚ Align Self å¯ä»¥å°†alignSelf ç»™å•ç‹¬çš„å­å…ƒç´ ï¼ˆå¯è®¾ç½®çš„å€¼è·Ÿ alignItems ä¸€æ ·ï¼‰ï¼Œé‚£ä¹ˆè¯¥å­å…ƒç´ å°±ä¼šéµä» alignSelfçš„è®¾ç½®è€Œå¿½ç•¥çˆ¶å…ƒç´ çš„alignItemsã€‚ æ¯”å¦‚ä¸‹é¢ä¾‹å­ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ çš„alignSelf è®¾ä¸º stretch, å› æ­¤å®Œå…¨å¿½ç•¥äº†çˆ¶å…ƒç´ çš„ centerè®¾ç½®ã€‚ Flex Wrap flexWrap å†³å®šå­å…ƒç´ åœ¨ä¸»è½´ä¸Šè¶…è¿‡çˆ¶å…ƒç´ å¤§å°æ—¶ï¼Œæ˜¯å¦åœ¨æ¬¡è½´æ–¹å‘è¿›è¡Œæ¢è¡Œæ˜¾ç¤ºã€‚ é»˜è®¤æ˜¯no-wrap, å¯ä»¥è®¾ç½®ä¸º wrap\nä¸‹é¢ä¾‹å­é‡Œï¼Œä¸»è½´æ˜¯ columnï¼Œç„¶åå­å…ƒç´ é«˜åº¦ä¸º150ï¼Œ çˆ¶å…ƒç´ ä¸€åˆ—æ”¾ä¸ä¸‹ä¸¤ä¸ªå­å…ƒç´ ï¼Œå› æ­¤å¾€row æ–¹å‘è¿›è¡Œäº†æ¢è¡Œã€‚ "
},
{
	"uri": "https://leverkusen188.github.io/reactnative/styleandsize/",
	"title": "ç»„ä»¶çš„æ ·å¼å’Œå¤§å°",
	"tags": [],
	"description": "",
	"content": "æ ·å¼ è®¢åˆ¶ç»„ä»¶çš„æ ·å¼ï¼Œç”¨style å±æ€§ã€‚ Style é‡Œå¯ä»¥æ”¾å…¥jsçš„å˜é‡ï¼Œä¹Ÿèƒ½æ”¾å…¥å¤šä¸ªå˜é‡çš„æ•°ç»„ï¼ˆä»¥æ•°ç»„é åçš„å˜é‡æ ·å¼ä¸ºæœ€ä¼˜å…ˆï¼‰\næ ·ä¾‹ä»£ç ï¼š\nimport React from \u0026#39;react\u0026#39;; import { StyleSheet, Text, View } from \u0026#39;react-native\u0026#39;; const LotsOfStyles = () =\u0026gt; { return ( \u0026lt;View style={styles.container}\u0026gt; \u0026lt;Text style={styles.red}\u0026gt;just red\u0026lt;/Text\u0026gt; \u0026lt;Text style={styles.bigBlue}\u0026gt;just bigBlue\u0026lt;/Text\u0026gt; \u0026lt;Text style={[styles.bigBlue, styles.red]}\u0026gt;bigBlue, then red\u0026lt;/Text\u0026gt; \u0026lt;Text style={[styles.red, styles.bigBlue]}\u0026gt;red, then bigBlue\u0026lt;/Text\u0026gt; //redçš„color è¢«åé¢çš„ bigBlueçš„colorè¦†ç›–äº† \u0026lt;/View\u0026gt; ); }; const styles = StyleSheet.create({ container: { marginTop: 50, }, bigBlue: { color: \u0026#39;blue\u0026#39;, fontWeight: \u0026#39;bold\u0026#39;, fontSize: 30, }, red: { color: \u0026#39;red\u0026#39;, }, }); export default LotsOfStyles; æ˜¾ç¤ºæ•ˆæœï¼š ç»„ä»¶å¤§å° é«˜å®½çš„ç»å¯¹å€¼ æœ€ç®€å•çš„ç»™ç»„ä»¶è®¾å®šå°ºå¯¸çš„æ–¹å¼å°±æ˜¯åœ¨æ ·å¼ä¸­æŒ‡å®šå›ºå®šçš„widthå’Œheightã€‚React Native ä¸­çš„å°ºå¯¸éƒ½æ˜¯æ— å•ä½çš„ï¼Œè¡¨ç¤ºçš„æ˜¯ä¸è®¾å¤‡åƒç´ å¯†åº¦æ— å…³çš„é€»è¾‘åƒç´ ç‚¹, å…¶å®ä¹Ÿå°±æ˜¯ç³»ç»Ÿçš„ UIScreen è·å–åˆ°çš„å¤§å°ã€‚\næ ·ä¾‹ä»£ç ï¼š\nimport React from \u0026#39;react\u0026#39;; import { View } from \u0026#39;react-native\u0026#39;; const FixedDimensionsBasics = () =\u0026gt; { return ( \u0026lt;View\u0026gt; \u0026lt;View style={{width: 50, height: 50, backgroundColor: \u0026#39;powderblue\u0026#39;}} /\u0026gt; \u0026lt;View style={{width: 100, height: 100, backgroundColor: \u0026#39;skyblue\u0026#39;}} /\u0026gt; \u0026lt;View style={{width: 150, height: 150, backgroundColor: \u0026#39;steelblue\u0026#39;}} /\u0026gt; \u0026lt;/View\u0026gt; ); }; export default FixedDimensionsBasics; å¼¹æ€§ï¼ˆFlexï¼‰å®½é«˜ ä¸€èˆ¬ç”¨ flex:1 æ¥è®¾å®šç»„ä»¶æ’‘æ»¡çˆ¶å®¹å™¨çš„æ‰€æœ‰ç©ºé—´ã€‚ å¦‚æœå¤šä¸ªç»„ä»¶éƒ½ç”¨äº† flex:1, åˆ™å¤§å®¶å¹³åˆ†ã€‚ å¦‚æœå€¼ä¸ä¸€æ ·ï¼Œåˆ™æŒ‰å€¼çš„æ¯”ä¾‹æ¥åˆ†ï¼ˆæ¯”å¦‚ flex:3 å’Œ flex1, åˆ™åˆ†ä¸º 3/4 å’Œ 1/4)\næ ·ä¾‹ä»£ç ï¼š\nimport React from \u0026#39;react\u0026#39;; import { View } from \u0026#39;react-native\u0026#39;; const FlexDimensionsBasics = () =\u0026gt; { return ( // è¯•è¯•å»æ‰çˆ¶Viewä¸­çš„`flex: 1`ã€‚ // åˆ™çˆ¶Viewä¸å†å…·æœ‰å°ºå¯¸ï¼Œå› æ­¤å­ç»„ä»¶ä¹Ÿæ— æ³•å†æ’‘å¼€ã€‚ // ç„¶åå†ç”¨`height: 300`æ¥ä»£æ›¿çˆ¶Viewçš„`flex: 1`è¯•è¯•çœ‹ï¼Ÿ \u0026lt;View style={{width: 50, height:100}}\u0026gt; \u0026lt;View style={{flex: 1, backgroundColor: \u0026#39;powderblue\u0026#39;}} /\u0026gt; \u0026lt;View style={{flex: 2, backgroundColor: \u0026#39;skyblue\u0026#39;}} /\u0026gt; \u0026lt;View style={{flex: 3, backgroundColor: \u0026#39;steelblue\u0026#39;}} /\u0026gt; \u0026lt;/View\u0026gt; ); }; export default FlexDimensionsBasics; ç™¾åˆ†æ¯”å®½é«˜ æ ·ä¾‹ä»£ç ï¼š\nimport React from \u0026#39;react\u0026#39;; import { View } from \u0026#39;react-native\u0026#39;; const PercentageDimensionsBasics = () =\u0026gt; { // Try removing the `height: \u0026#39;100%\u0026#39;` on the parent View. // The parent will not have dimensions, so the children can\u0026#39;t expand. return ( \u0026lt;View style={{ height: \u0026#39;100%\u0026#39; }}\u0026gt; \u0026lt;View style={{ height: \u0026#39;15%\u0026#39;, backgroundColor: \u0026#39;powderblue\u0026#39; }} /\u0026gt; \u0026lt;View style={{ width: \u0026#39;66%\u0026#39;, height: \u0026#39;35%\u0026#39;, backgroundColor: \u0026#39;skyblue\u0026#39; }} /\u0026gt; \u0026lt;View style={{ width: \u0026#39;33%\u0026#39;, height: \u0026#39;50%\u0026#39;, backgroundColor: \u0026#39;steelblue\u0026#39; }} /\u0026gt; \u0026lt;/View\u0026gt; ); }; export default PercentageDimensionsBasics; "
},
{
	"uri": "https://leverkusen188.github.io/reactnative/rndebug/",
	"title": "è°ƒè¯•debug ",
	"tags": [],
	"description": "",
	"content": "æœ¬æœºæ¨¡æ‹Ÿå™¨è°ƒè¯•ï¼š å®é™…ä¸Šå°±æ˜¯åœ¨æœ¬æœºå™¨ä¸Šå¯åŠ¨äº†ä¸€ä¸ªNPMçš„ webæœåŠ¡ï¼Œå°†å¯¹åº”çš„jsæ–‡ä»¶ä¹Ÿæ”¾è¿›å»ã€‚ æ¨¡æ‹Ÿå™¨app é€šè¿‡ localhost æ¥åŠ è½½æ‰€æœ‰çš„jsæ–‡ä»¶ï¼Œé€šè¿‡ react-native è§£ææˆnativeä»£ç ï¼Œæœ€ç»ˆæ¸²æŸ“å‡ºUIã€‚\nè¿æ‰‹æœºè°ƒè¯•ï¼š åœ¨æœ¬æœºå™¨ä¸Šå¯åŠ¨NPMçš„webæœåŠ¡ï¼Œå°†å¯¹åº”çš„jsæ–‡ä»¶ä¹Ÿæ”¾è¿›å»ã€‚ è”æœºç¼–è¯‘æ—¶ï¼Œreact-native-xcode.sh è„šæœ¬ä¼šç”Ÿæˆä¸€ä¸ª ip.txt æ–‡ä»¶ï¼Œé‡Œé¢æ˜¯æœ¬æœºå™¨çš„ipåœ°å€ï¼Œå¹¶å°†è¯¥txtæ–‡ä»¶æ”¾å…¥appçš„bundleé‡Œã€‚ æ‰‹æœºapp é€šè¿‡è¯¥IP ä»¥åŠ NPMçš„webæœåŠ¡æ¥åŠ è½½æ‰€æœ‰JSæ–‡ä»¶ã€‚\nUIå±‚æ¬¡è°ƒè¯• å¯ä»¥ä½¿ç”¨ react-devtoolsã€‚ å®‰è£…æ–¹å¼ï¼š\nexport ELECTRON_MIRROR=\u0026#34;https://npm.taobao.org/mirrors/electron/\u0026#34; //æ¢ä¸€ä¸‹packageæºï¼Œé¿å…å¢™é—®é¢˜ npm install -g react-devtools PSï¼šå¦‚æœè¿æ‰‹æœºè°ƒè¯•ï¼Œéœ€è¦æ‰‹æœºå’Œç”µè„‘åœ¨åŒä¸€ä¸ªç½‘æ®µä¸‹ã€‚\nç„¶åç”¨ react-devtools å¯åŠ¨å·¥å…·å³å¯ã€‚\nå †æ ˆè¿˜åŸ npx metro-symbolicate android/app/build/generated/sourcemaps/react/release/index.android.bundle.map \u0026lt; stacktrace.txt "
},
{
	"uri": "https://leverkusen188.github.io/%E9%9D%9E%E6%8A%80%E6%9C%AF/",
	"title": "éæŠ€æœ¯s",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "https://leverkusen188.github.io/categories/",
	"title": "Categories",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "https://leverkusen188.github.io/tags/",
	"title": "Tags",
	"tags": [],
	"description": "",
	"content": ""
}]